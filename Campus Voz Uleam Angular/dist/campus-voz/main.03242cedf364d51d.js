"use strict";(self.webpackChunkcampus_voz=self.webpackChunkcampus_voz||[]).push([[792],{331:()=>{function xc(n,e,t,r,i,o,s){try{var a=n[o](s),u=a.value}catch(c){return void t(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function I(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function s(u){xc(o,r,i,s,a,"next",u)}function a(u){xc(o,r,i,s,a,"throw",u)}s(void 0)})}}let St=null,Zh=1;const ns=Symbol("SIGNAL");function Ie(n){const e=St;return St=n,e}function lA(n){if((!Oc(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==Zh)){if(!n.producerMustRecompute(n)&&!V_(n))return n.dirty=!1,void(n.lastCleanEpoch=Zh);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Zh}}function V_(n){da(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(lA(t),r!==t.version))return!0}return!1}function Xh(n,e){if(function yA(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),da(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Xh(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];da(i),i.producerIndexOfThis[r]=e}}function Oc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function da(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let vA=null;function lt(n){return"function"==typeof n}function L_(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const U_=L_(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ef(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class On{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(lt(r))try{r()}catch(o){e=o instanceof U_?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{CA(o)}catch(s){e=e??[],s instanceof U_?e=[...e,...s.errors]:e.push(s)}}if(e)throw new U_(e)}}add(e){var t;if(e&&e!==this)if(this.closed)CA(e);else{if(e instanceof On){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ef(t,e)}remove(e){const{_finalizers:t}=this;t&&ef(t,e),e instanceof On&&e._removeParent(this)}}On.EMPTY=(()=>{const n=new On;return n.closed=!0,n})();const bA=On.EMPTY;function wA(n){return n instanceof On||n&&"closed"in n&&lt(n.remove)&&lt(n.add)&&lt(n.unsubscribe)}function CA(n){lt(n)?n():n.unsubscribe()}const rs={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},tf={setTimeout(n,e,...t){const{delegate:r}=tf;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=tf;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function TA(n){tf.setTimeout(()=>{const{onUnhandledError:e}=rs;if(!e)throw n;e(n)})}function B_(){}const m4=j_("C",void 0,void 0);function j_(n,e,t){return{kind:n,value:e,error:t}}let is=null;function nf(n){if(rs.useDeprecatedSynchronousErrorHandling){const e=!is;if(e&&(is={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=is;if(is=null,t)throw r}}else n()}class $_ extends On{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wA(e)&&e.add(this)):this.destination=w4}static create(e,t,r){return new H_(e,t,r)}next(e){this.isStopped?G_(function y4(n){return j_("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?G_(function _4(n){return j_("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?G_(m4,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const I4=Function.prototype.bind;function z_(n,e){return I4.call(n,e)}class E4{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){rf(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){rf(r)}else rf(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){rf(t)}}}class H_ extends $_{constructor(e,t,r){let i;if(super(),lt(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&rs.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&z_(e.next,o),error:e.error&&z_(e.error,o),complete:e.complete&&z_(e.complete,o)}):i=e}this.destination=new E4(i)}}function rf(n){rs.useDeprecatedSynchronousErrorHandling?function v4(n){rs.useDeprecatedSynchronousErrorHandling&&is&&(is.errorThrown=!0,is.error=n)}(n):TA(n)}function G_(n,e){const{onStoppedNotification:t}=rs;t&&tf.setTimeout(()=>t(n,e))}const w4={closed:!0,next:B_,error:function b4(n){throw n},complete:B_},q_="function"==typeof Symbol&&Symbol.observable||"@@observable";function os(n){return n}function DA(n){return 0===n.length?os:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Ct=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function D4(n){return n&&n instanceof $_||function T4(n){return n&&lt(n.next)&&lt(n.error)&&lt(n.complete)}(n)&&wA(n)}(t)?t:new H_(t,r,i);return nf(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=AA(r))((i,o)=>{const s=new H_({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[q_](){return this}pipe(...t){return DA(t)(this)}toPromise(t){return new(t=AA(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function AA(n){var e;return null!==(e=n??rs.Promise)&&void 0!==e?e:Promise}const A4=L_(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let vr=(()=>{class n extends Ct{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new SA(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new A4}next(t){nf(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){nf(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){nf(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?bA:(this.currentObservers=null,o.push(t),new On(()=>{this.currentObservers=null,ef(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new Ct;return t.source=this,t}}return n.create=(e,t)=>new SA(e,t),n})();class SA extends vr{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:bA}}class Hn extends vr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function PA(n){return lt(n?.lift)}function un(n){return e=>{if(PA(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function qt(n,e,t,r,i){return new S4(n,e,t,r,i)}class S4 extends $_{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Re(n,e){return un((t,r)=>{let i=0;t.subscribe(qt(r,o=>{r.next(n.call(e,o,i++))}))})}const RA="https://g.co/ng/security#xss";class $ extends Error{constructor(e,t){super(function ha(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Ti(n){return{toString:n}.toString()}const pa="__parameters__";function ma(n,e,t){return Ti(()=>{const r=function W_(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,c,d){const h=u.hasOwnProperty(pa)?u[pa]:Object.defineProperty(u,pa,{value:[]})[pa];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}const Be=globalThis;function ze(n){for(let e in n)if(n[e]===ze)return e;throw Error("Could not find renamed property on target object.")}function P4(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Wt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Wt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function K_(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const R4=ze({__forward_ref__:ze});function rt(n){return n.__forward_ref__=rt,n.toString=function(){return Wt(this())},n}function ce(n){return af(n)?n():n}function af(n){return"function"==typeof n&&n.hasOwnProperty(R4)&&n.__forward_ref__===rt}function re(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Kr(n){return{providers:n.providers||[],imports:n.imports||[]}}function uf(n){return OA(n,lf)||OA(n,kA)}function OA(n,e){return n.hasOwnProperty(e)?n[e]:null}function cf(n){return n&&(n.hasOwnProperty(Q_)||n.hasOwnProperty(V4))?n[Q_]:null}const lf=ze({\u0275prov:ze}),Q_=ze({\u0275inj:ze}),kA=ze({ngInjectableDef:ze}),V4=ze({ngInjectorDef:ze});class ee{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=re({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ey(n){return n&&!!n.\u0275providers}const kc=ze({\u0275cmp:ze}),ty=ze({\u0275dir:ze}),ny=ze({\u0275pipe:ze}),FA=ze({\u0275mod:ze}),Di=ze({\u0275fac:ze}),Vc=ze({__NG_ELEMENT_ID__:ze}),LA=ze({__NG_ENV_ID__:ze});function ge(n){return"string"==typeof n?n:null==n?"":String(n)}function ry(n,e){throw new $(-201,!1)}var we=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(we||{});let iy;function UA(){return iy}function Gn(n){const e=iy;return iy=n,e}function BA(n,e,t){const r=uf(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&we.Optional?null:void 0!==e?e:void ry()}const Fc={},oy="__NG_DI_FLAG__",df="ngTempTokenPath",$4=/\n/gm,jA="__source";let _a;function uo(n){const e=_a;return _a=n,e}function G4(n,e=we.Default){if(void 0===_a)throw new $(-203,!1);return null===_a?BA(n,void 0,e):_a.get(n,e&we.Optional?null:void 0,e)}function se(n,e=we.Default){return(UA()||G4)(ce(n),e)}function G(n,e=we.Default){return se(n,hf(e))}function hf(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function sy(n){const e=[];for(let t=0;t<n.length;t++){const r=ce(n[t]);if(Array.isArray(r)){if(0===r.length)throw new $(900,!1);let i,o=we.Default;for(let s=0;s<r.length;s++){const a=r[s],u=q4(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(se(i,o))}else e.push(se(r))}return e}function Lc(n,e){return n[oy]=e,n.prototype[oy]=e,n}function q4(n){return n[oy]}const ir=Lc(ma("Optional"),8),ff=Lc(ma("SkipSelf"),4);function ss(n,e){return n.hasOwnProperty(Di)?n[Di]:null}function ya(n,e){n.forEach(t=>Array.isArray(t)?ya(t,e):e(t))}function zA(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function pf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function or(n,e,t){let r=va(n,e);return r>=0?n[1|r]=t:(r=~r,function HA(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function uy(n,e){const t=va(n,e);if(t>=0)return n[1|t]}function va(n,e){return function GA(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const Qr={},xe=[],as=new ee(""),qA=new ee("",-1),cy=new ee("");class mf{get(e,t=Fc){if(t===Fc){const r=new Error(`NullInjectorError: No provider for ${Wt(e)}!`);throw r.name="NullInjectorError",r}return t}}var _f=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(_f||{}),Mr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Mr||{}),dt=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(dt||{});function X4(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function ly(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{const o=i,s=t[++r];KA(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function WA(n){return 3===n||4===n||6===n}function KA(n){return 64===n.charCodeAt(0)}function Uc(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||QA(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function QA(n,e,t,r,i){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}const YA="ng-template";function e3(n,e,t,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==X4(e[i+1].toLowerCase(),t,0))return!0}else if(dy(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===t)return!0}return!1}function dy(n){return 4===n.type&&n.value!==YA}function t3(n,e,t){return e===(4!==n.type||t?n.value:YA)}function n3(n,e,t){let r=4;const i=n.attrs,o=null!==i?function o3(n){for(let e=0;e<n.length;e++)if(WA(n[e]))return e;return n.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!t3(n,u,t)||""===u&&1===e.length){if(xr(r))return!1;s=!0}}else if(8&r){if(null===i||!e3(n,i,u,t)){if(xr(r))return!1;s=!0}}else{const c=e[++a],d=r3(u,i,dy(n),t);if(-1===d){if(xr(r))return!1;s=!0;continue}if(""!==c){let h;if(h=d>o?"":i[d+1].toLowerCase(),2&r&&c!==h){if(xr(r))return!1;s=!0}}}}else{if(!s&&!xr(r)&&!xr(u))return!1;if(s&&xr(u))continue;s=!1,r=u|1&r}}return xr(r)||s}function xr(n){return!(1&n)}function r3(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const s=e[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function s3(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function JA(n,e,t=!1){for(let r=0;r<e.length;r++)if(n3(n,e[r],t))return!0;return!1}function ZA(n,e){return n?":not("+e.trim()+")":e}function u3(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!xr(s)&&(e+=ZA(o,i),i=""),r=s,o=o||!xr(r);t++}return""!==i&&(e+=ZA(o,i)),e}function sr(n){return Ti(()=>{const e=eS(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===_f.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Mr.Emulated,styles:n.styles||xe,_:null,schemas:n.schemas||null,tView:null,id:""};tS(t);const r=n.dependencies;return t.directiveDefs=yf(r,!1),t.pipeDefs=yf(r,!0),t.id=function p3(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function d3(n){return Ee(n)||Kt(n)}function h3(n){return null!==n}function Ai(n){return Ti(()=>({type:n.type,bootstrap:n.bootstrap||xe,declarations:n.declarations||xe,imports:n.imports||xe,exports:n.exports||xe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function XA(n,e){if(null==n)return Qr;const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];let o,s,a=dt.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==dt.None?[r,a]:r,e[o]=s):t[o]=r}return t}function he(n){return Ti(()=>{const e=eS(n);return tS(e),e})}function Wn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ee(n){return n[kc]||null}function Kt(n){return n[ty]||null}function cn(n){return n[ny]||null}function mn(n,e){const t=n[FA]||null;if(!t&&!0===e)throw new Error(`Type ${Wt(n)} does not have '\u0275mod' property.`);return t}function eS(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Qr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||xe,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:XA(n.inputs,e),outputs:XA(n.outputs),debugInfo:null}}function tS(n){n.features?.forEach(e=>e(n))}function yf(n,e){if(!n)return null;const t=e?cn:d3;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(h3)}function us(n){return{\u0275providers:n}}function g3(...n){return{\u0275providers:hy(0,n),\u0275fromNgModule:!0}}function hy(n,...e){const t=[],r=new Set;let i;const o=s=>{t.push(s)};return ya(e,s=>{const a=s;vf(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&nS(i,o),t}function nS(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];fy(i,o=>{e(o,r)})}}function vf(n,e,t,r){if(!(n=ce(n)))return!1;let i=null,o=cf(n);const s=!o&&Ee(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const u=n.ngModule;if(o=cf(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of u)vf(c,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;r.add(i);try{ya(o.imports,d=>{vf(d,e,t,r)&&(c||=[],c.push(d))})}finally{}void 0!==c&&nS(c,e)}if(!a){const c=ss(i)||(()=>new i);e({provide:i,useFactory:c,deps:xe},i),e({provide:cy,useValue:i,multi:!0},i),e({provide:as,useValue:()=>se(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const c=n;fy(u,d=>{e(d,c)})}}}return i!==n&&void 0!==n.providers}function fy(n,e){for(let t of n)ey(t)&&(t=t.\u0275providers),Array.isArray(t)?fy(t,e):e(t)}const m3=ze({provide:String,useValue:ze});function py(n){return null!==n&&"object"==typeof n&&m3 in n}function cs(n){return"function"==typeof n}const gy=new ee(""),If={},y3={};let my;function Ef(){return void 0===my&&(my=new mf),my}class Kn{}class Ia extends Kn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,yy(e,s=>this.processProvider(s)),this.records.set(qA,Ea(void 0,this)),i.has("environment")&&this.records.set(Kn,Ea(void 0,this));const o=this.records.get(gy);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(cy,xe,we.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=Ie(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ie(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=uo(this),r=Gn(void 0);try{return e()}finally{uo(t),Gn(r)}}get(e,t=Fc,r=we.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(LA))return e[LA](this);r=hf(r);const o=uo(this),s=Gn(void 0);try{if(!(r&we.SkipSelf)){let u=this.records.get(e);if(void 0===u){const c=function w3(n){return"function"==typeof n||"object"==typeof n&&n instanceof ee}(e)&&uf(e);u=c&&this.injectableDefInScope(c)?Ea(_y(e),If):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&we.Self?Ef():this.parent).get(e,t=r&we.Optional&&t===Fc?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[df]=a[df]||[]).unshift(Wt(e)),o)throw a;return function W4(n,e,t,r){const i=n[df];throw e[jA]&&i.unshift(e[jA]),n.message=function K4(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Wt(e);if(Array.isArray(e))i=e.map(Wt).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Wt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace($4,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[df]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Gn(s),uo(o)}}resolveInjectorInitializers(){const e=Ie(null),t=uo(this),r=Gn(void 0);try{const o=this.get(as,xe,we.Self);for(const s of o)s()}finally{uo(t),Gn(r),Ie(e)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Wt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processProvider(e){let t=cs(e=ce(e))?e:ce(e&&e.provide);const r=function I3(n){return py(n)?Ea(void 0,n.useValue):Ea(oS(n),If)}(e);if(!cs(e)&&!0===e.multi){let i=this.records.get(t);i||(i=Ea(void 0,If,!0),i.factory=()=>sy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){const r=Ie(null);try{return t.value===If&&(t.value=y3,t.value=t.factory()),"object"==typeof t.value&&t.value&&function b3(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ie(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=ce(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function _y(n){const e=uf(n),t=null!==e?e.factory:ss(n);if(null!==t)return t;if(n instanceof ee)throw new $(204,!1);if(n instanceof Function)return function v3(n){if(n.length>0)throw new $(204,!1);const t=function k4(n){return n&&(n[lf]||n[kA])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new $(204,!1)}function oS(n,e,t){let r;if(cs(n)){const i=ce(n);return ss(i)||_y(i)}if(py(n))r=()=>ce(n.useValue);else if(function iS(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...sy(n.deps||[]));else if(function rS(n){return!(!n||!n.useExisting)}(n))r=()=>se(ce(n.useExisting));else{const i=ce(n&&(n.useClass||n.provide));if(!function E3(n){return!!n.deps}(n))return ss(i)||_y(i);r=()=>new i(...sy(n.deps))}return r}function Ea(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function yy(n,e){for(const t of n)Array.isArray(t)?yy(t,e):t&&ey(t)?yy(t.\u0275providers,e):e(t)}function Si(n,e){n instanceof Ia&&n.assertNotDestroyed();const r=uo(n),i=Gn(void 0);try{return e()}finally{uo(r),Gn(i)}}function sS(){return void 0!==UA()||null!=function H4(){return _a}()}const _t=0,W=1,ae=2,Pt=3,Nr=4,_n=5,ar=6,wa=7,it=8,Bt=9,Or=10,le=11,jc=12,uS=13,Ca=14,bt=15,$c=16,Ta=17,Pi=18,zc=19,cS=20,lo=21,Cf=22,ls=23,me=25,Iy=1,Yr=7,Da=9,Rt=10;var Ey=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Ey||{});function yn(n){return Array.isArray(n)&&"object"==typeof n[Iy]}function vn(n){return Array.isArray(n)&&!0===n[Iy]}function by(n){return!!(4&n.flags)}function ds(n){return n.componentOffset>-1}function Df(n){return!(1&~n.flags)}function kr(n){return!!n.template}function wy(n){return!!(512&n[ae])}class V3{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function fS(n,e,t,r){null!==e?e.applyValueToInputSignal(e,r):n[t]=r}function Ir(){return pS}function pS(n){return n.type.prototype.ngOnChanges&&(n.setInput=L3),F3}function F3(){const n=mS(this),e=n?.current;if(e){const t=n.previous;if(t===Qr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function L3(n,e,t,r,i){const o=this.declaredInputs[r],s=mS(n)||function U3(n,e){return n[gS]=e}(n,{previous:Qr,current:null}),a=s.current||(s.current={}),u=s.previous,c=u[o];a[o]=new V3(c&&c.currentValue,t,u===Qr),fS(n,e,i,t)}Ir.ngInherit=!0;const gS="__ngSimpleChanges__";function mS(n){return n[gS]||null}const Jr=function(n,e,t){};let vS=!1;function Qe(n){for(;Array.isArray(n);)n=n[_t];return n}function Gc(n,e){return Qe(e[n])}function kn(n,e){return Qe(e[n.index])}function qc(n,e){return n.data[e]}function Aa(n,e){return n[e]}function ur(n,e){const t=e[n];return yn(t)?t:t[_t]}function Sy(n){return!(128&~n[ae])}function Zr(n,e){return null==e?null:n[e]}function IS(n){n[Ta]=0}function G3(n){1024&n[ae]||(n[ae]|=1024,Sy(n)&&Wc(n))}function Py(n){return!!(9216&n[ae]||n[ls]?.dirty)}function Ry(n){n[Or].changeDetectionScheduler?.notify(1),Py(n)?Wc(n):64&n[ae]&&(function j3(){return vS}()?(n[ae]|=1024,Wc(n)):n[Or].changeDetectionScheduler?.notify())}function Wc(n){n[Or].changeDetectionScheduler?.notify();let e=hs(n);for(;null!==e&&!(8192&e[ae])&&(e[ae]|=8192,Sy(e));)e=hs(e)}function Af(n,e){if(!(256&~n[ae]))throw new $(911,!1);null===n[lo]&&(n[lo]=[]),n[lo].push(e)}function hs(n){const e=n[Pt];return vn(e)?e[Pt]:e}const de={lFrame:RS(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function wS(){return de.bindingsEnabled}function U(){return de.lFrame.lView}function Ce(){return de.lFrame.tView}function He(n){return de.lFrame.contextLView=n,n[it]}function Ge(n){return de.lFrame.contextLView=null,n}function qe(){let n=CS();for(;null!==n&&64===n.type;)n=n.parent;return n}function CS(){return de.lFrame.currentTNode}function Xr(n,e){const t=de.lFrame;t.currentTNode=n,t.isParent=e}function xy(){return de.lFrame.isParent}function Vn(){const n=de.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Vr(){return de.lFrame.bindingIndex++}function Mi(n){const e=de.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function nz(n,e){const t=de.lFrame;t.bindingIndex=t.bindingRootIndex=n,Oy(e)}function Oy(n){de.lFrame.currentDirectiveIndex=n}function Vy(){return de.lFrame.currentQueryIndex}function Sf(n){de.lFrame.currentQueryIndex=n}function iz(n){const e=n[W];return 2===e.type?e.declTNode:1===e.type?n[_n]:null}function SS(n,e,t){if(t&we.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&we.Host||(i=iz(o),null===i||(o=o[Ca],10&i.type))););if(null===i)return!1;e=i,n=o}const r=de.lFrame=PS();return r.currentTNode=e,r.lView=n,!0}function Fy(n){const e=PS(),t=n[W];de.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function PS(){const n=de.lFrame,e=null===n?null:n.child;return null===e?RS(n):e}function RS(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function MS(){const n=de.lFrame;return de.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const xS=MS;function Ly(){const n=MS();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function In(){return de.lFrame.selectedIndex}function fs(n){de.lFrame.selectedIndex=n}function ot(){const n=de.lFrame;return qc(n.tView,n.selectedIndex)}let OS=!0;function Qc(){return OS}function ei(n){OS=n}function Pf(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=d&&(n.destroyHooks??=[]).push(t,d)}}function Rf(n,e,t){kS(n,e,3,t)}function Mf(n,e,t,r){(3&n[ae])===t&&kS(n,e,t,r)}function Uy(n,e){let t=n[ae];(3&t)===e&&(t&=16383,t+=1,n[ae]=t)}function kS(n,e,t,r){const o=r??-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&n[Ta]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[Ta]+=65536),(a<o||-1==o)&&(dz(n,t,e,u),n[Ta]=(4294901760&n[Ta])+u+2),u++}function VS(n,e){Jr(4,n,e);const t=Ie(null);try{e.call(n)}finally{Ie(t),Jr(5,n,e)}}function dz(n,e,t,r){const i=t[r]<0,o=t[r+1],a=n[i?-t[r]:t[r]];i?n[ae]>>14<n[Ta]>>16&&(3&n[ae])===e&&(n[ae]+=16384,VS(a,o)):VS(a,o)}const Pa=-1;class Yc{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function jy(n){return n!==Pa}function Jc(n){return 32767&n}function Zc(n,e){let t=function mz(n){return n>>16}(n),r=e;for(;t>0;)r=r[Ca],t--;return r}let $y=!0;function xf(n){const e=$y;return $y=n,e}const FS=255,LS=5;let _z=0;const ti={};function Nf(n,e){const t=US(n,e);if(-1!==t)return t;const r=e[W];r.firstCreatePass&&(n.injectorIndex=e.length,zy(r.data,n),zy(e,null),zy(r.blueprint,null));const i=Of(n,e),o=n.injectorIndex;if(jy(i)){const s=Jc(i),a=Zc(i,e),u=a[W].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|u[s+c]}return e[o+8]=i,o}function zy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function US(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Of(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=qS(i),null===r)return Pa;if(t++,i=i[Ca],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Pa}function Hy(n,e,t){!function yz(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Vc)&&(r=t[Vc]),null==r&&(r=t[Vc]=_z++);const i=r&FS;e.data[n+(i>>LS)]|=1<<i}(n,e,t)}function BS(n,e,t){if(t&we.Optional||void 0!==n)return n;ry()}function jS(n,e,t,r){if(t&we.Optional&&void 0===r&&(r=null),!(t&(we.Self|we.Host))){const i=n[Bt],o=Gn(void 0);try{return i?i.get(e,r,t&we.Optional):BA(e,r,t&we.Optional)}finally{Gn(o)}}return BS(r,0,t)}function $S(n,e,t,r=we.Default,i){if(null!==n){if(2048&e[ae]&&!(r&we.Self)){const s=function wz(n,e,t,r,i){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[ae]&&!(512&s[ae]);){const a=zS(o,s,t,r|we.Self,ti);if(a!==ti)return a;let u=o.parent;if(!u){const c=s[cS];if(c){const d=c.get(t,ti,r);if(d!==ti)return d}u=qS(s),s=s[Ca]}o=u}return i}(n,e,t,r,ti);if(s!==ti)return s}const o=zS(n,e,t,r,ti);if(o!==ti)return o}return jS(e,t,r,i)}function zS(n,e,t,r,i){const o=function Ez(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Vc)?n[Vc]:void 0;return"number"==typeof e?e>=0?e&FS:bz:e}(t);if("function"==typeof o){if(!SS(e,n,r))return r&we.Host?BS(i,0,r):jS(e,t,r,i);try{let s;if(s=o(r),null!=s||r&we.Optional)return s;ry()}finally{xS()}}else if("number"==typeof o){let s=null,a=US(n,e),u=Pa,c=r&we.Host?e[bt][_n]:null;for((-1===a||r&we.SkipSelf)&&(u=-1===a?Of(n,e):e[a+8],u!==Pa&&GS(r,!1)?(s=e[W],a=Jc(u),e=Zc(u,e)):a=-1);-1!==a;){const d=e[W];if(HS(o,a,d.data)){const h=Iz(a,e,t,s,r,c);if(h!==ti)return h}u=e[a+8],u!==Pa&&GS(r,e[W].data[a+8]===c)&&HS(o,a,e)?(s=d,a=Jc(u),e=Zc(u,e)):a=-1}}return i}function Iz(n,e,t,r,i,o){const s=e[W],a=s.data[n+8],d=kf(a,s,t,null==r?ds(a)&&$y:r!=s&&!!(3&a.type),i&we.Host&&o===a);return null!==d?ps(e,s,d,a):ti}function kf(n,e,t,r,i){const o=n.providerIndexes,s=e.data,a=1048575&o,u=n.directiveStart,d=o>>20,p=i?a+d:n.directiveEnd;for(let m=r?a:a+d;m<p;m++){const _=s[m];if(m<u&&t===_||m>=u&&_.type===t)return m}if(i){const m=s[u];if(m&&kr(m)&&m.type===t)return u}return null}function ps(n,e,t,r){let i=n[t];const o=e.data;if(function hz(n){return n instanceof Yc}(i)){const s=i;s.resolving&&function U4(n,e){throw e&&e.join(" > "),new $(-200,n)}(function Ve(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ge(n)}(o[t]));const a=xf(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?Gn(s.injectImpl):null;SS(n,r,we.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function lz(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=pS(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==c&&Gn(c),xf(a),s.resolving=!1,xS()}}return i}function HS(n,e,t){return!!(t[e+(n>>LS)]&1<<n)}function GS(n,e){return!(n&we.Self||n&we.Host&&e)}class Yt{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return $S(this._tNode,this._lView,e,hf(r),t)}}function bz(){return new Yt(qe(),U())}function en(n){return Ti(()=>{const e=n.prototype.constructor,t=e[Di]||Gy(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[Di]||Gy(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Gy(n){return af(n)?()=>{const e=Gy(ce(n));return e&&e()}:ss(n)}function qS(n){const e=n[W],t=e.type;return 2===t?e.declTNode:1===t?n[_n]:null}function JS(n,e=null,t=null,r){const i=ZS(n,e,t,r);return i.resolveInjectorInitializers(),i}function ZS(n,e=null,t=null,r,i=new Set){const o=[t||xe,g3(n)];return r=r||("object"==typeof n?void 0:Wt(n)),new Ia(o,e||Ef(),r||null,i)}let tn=(()=>{class n{static{this.THROW_IF_NOT_FOUND=Fc}static{this.NULL=new mf}static create(t,r){if(Array.isArray(t))return JS({name:""},r,t,"");{const i=t.name??"";return JS({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=re({token:n,providedIn:"any",factory:()=>se(qA)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function Wy(n){return n.ngOriginalError}class ni{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Wy(e);for(;t&&Wy(t);)t=Wy(t);return t||null}}const eP=new ee("",{providedIn:"root",factory:()=>G(ni).handleError.bind(void 0)});let xa=(()=>{class n{static{this.__NG_ELEMENT_ID__=xz}static{this.__NG_ENV_ID__=t=>t}}return n})();class Mz extends xa{constructor(e){super(),this._lView=e}onDestroy(e){return Af(this._lView,e),()=>function My(n,e){if(null===n[lo])return;const t=n[lo].indexOf(e);-1!==t&&n[lo].splice(t,1)}(this._lView,e)}}function xz(){return new Mz(U())}function Nz(){return Na(qe(),U())}function Na(n,e){return new cr(kn(n,e))}let cr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Nz}}return n})();function nP(n){return n instanceof cr?n.nativeElement:n}function Ky(n){return e=>{setTimeout(n,void 0,e)}}const Tt=class Oz extends vr{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,sS()&&(this.destroyRef=G(xa,{optional:!0})??void 0)}emit(e){const t=Ie(null);try{super.next(e)}finally{Ie(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=Ky(o),i&&(i=Ky(i)),s&&(s=Ky(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof On&&e.add(a),a}};function kz(){return this._results[Symbol.iterator]()}class Qy{get changes(){return this._changes??=new Tt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=Qy.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=kz)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const r=function qn(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Z4(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Ff(n){return!(128&~n.flags)}const Yy=new Map;let Fz=0;const Zy="__ngContext__";function En(n,e){yn(e)?(n[Zy]=e[zc],function Uz(n){Yy.set(n[zc],n)}(e)):n[Zy]=e}function hP(n){return pP(n[jc])}function fP(n){return pP(n[Nr])}function pP(n){for(;null!==n&&!vn(n);)n=n[Nr];return n}let Xy;const Bf=new ee("",{providedIn:"root",factory:()=>rH}),rH="ng",bP=new ee(""),fo=new ee("",{providedIn:"platform",factory:()=>"unknown"}),wP=new ee("",{providedIn:"root",factory:()=>function ho(){if(void 0!==Xy)return Xy;if(typeof document<"u")return document;throw new $(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let CP=()=>null;function av(n,e,t=!1){return CP(n,e,t)}const PP=new ee("",{providedIn:"root",factory:()=>!1});let Kf;function NP(n){return function hv(){if(void 0===Kf&&(Kf=null,Be.trustedTypes))try{Kf=Be.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Kf}()?.createScriptURL(n)||n}class OP{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${RA})`}}function po(n){return n instanceof OP?n.changingThisBreaksApplicationSecurity:n}function sl(n,e){const t=function bH(n){return n instanceof OP&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${RA})`)}return t===e}const DH=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Fa=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Fa||{});function zP(n){const e=ul();return e?e.sanitize(Fa.URL,n)||"":sl(n,"URL")?po(n):function fv(n){return(n=String(n)).match(DH)?n:"unsafe:"+n}(ge(n))}function HP(n){const e=ul();if(e)return NP(e.sanitize(Fa.RESOURCE_URL,n)||"");if(sl(n,"ResourceURL"))return NP(po(n));throw new $(904,!1)}function ul(){const n=U();return n&&n[Or].sanitizer}function lr(n){return n instanceof Function?n():n}var go=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(go||{});let Iv;function Ev(n,e){return Iv(n,e)}function Ua(n,e,t,r,i){if(null!=r){let o,s=!1;vn(r)?o=r:yn(r)&&(s=!0,r=r[_t]);const a=Qe(r);0===n&&null!==t?null==i?rR(e,t,a):gs(e,t,a,i||null,!0):1===n&&null!==t?gs(e,t,a,i||null,!0):2===n?function dl(n,e,t){const r=ep(n,e);r&&function cG(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function hG(n,e,t,r,i){const o=t[Yr];o!==Qe(t)&&Ua(e,n,r,o,i);for(let a=Rt;a<t.length;a++){const u=t[a];np(u[W],u,n,e,r,o)}}(e,n,o,t,i)}}function Zf(n,e,t){return n.createElement(e,t)}function eR(n,e){e[Or].changeDetectionScheduler?.notify(1),np(n,e,e[le],2,null,null)}function tR(n,e){const t=n[Da],r=t.indexOf(e);t.splice(r,1)}function cl(n,e){if(n.length<=Rt)return;const t=Rt+e,r=n[t];if(r){const i=r[$c];null!==i&&i!==n&&tR(i,r),e>0&&(n[t-1][Nr]=r[Nr]);const o=pf(n,Rt+e);!function nG(n,e){eR(n,e),e[_t]=null,e[_n]=null}(r[W],r);const s=o[Pi];null!==s&&s.detachView(o[W]),r[Pt]=null,r[Nr]=null,r[ae]&=-129}return r}function Xf(n,e){if(!(256&e[ae])){const t=e[le];t.destroyNode&&np(n,e,t,3,null,null),function iG(n){let e=n[jc];if(!e)return Cv(n[W],n);for(;e;){let t=null;if(yn(e))t=e[jc];else{const r=e[Rt];r&&(t=r)}if(!t){for(;e&&!e[Nr]&&e!==n;)yn(e)&&Cv(e[W],e),e=e[Pt];null===e&&(e=n),yn(e)&&Cv(e[W],e),t=e&&e[Nr]}e=t}}(e)}}function Cv(n,e){if(256&e[ae])return;const t=Ie(null);try{e[ae]&=-129,e[ae]|=256,e[ls]&&function mA(n){if(da(n),Oc(n))for(let e=0;e<n.producerNode.length;e++)Xh(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}(e[ls]),function uG(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Yc)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];Jr(4,a,u);try{u.call(a)}finally{Jr(5,a,u)}}else{Jr(4,i,o);try{o.call(i)}finally{Jr(5,i,o)}}}}}(n,e),function aG(n,e){const t=n.cleanup,r=e[wa];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else t[o].call(r[t[o+1]]);null!==r&&(e[wa]=null);const i=e[lo];if(null!==i){e[lo]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(n,e),1===e[W].type&&e[le].destroy();const r=e[$c];if(null!==r&&vn(e[Pt])){r!==e[Pt]&&tR(r,e);const i=e[Pi];null!==i&&i.detachView(n)}!function Bz(n){Yy.delete(n[zc])}(e)}finally{Ie(t)}}function Tv(n,e,t){return function nR(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[_t];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=n.data[r.directiveStart+i];if(o===Mr.None||o===Mr.Emulated)return null}return kn(r,t)}}(n,e.parent,t)}function gs(n,e,t,r,i){n.insertBefore(e,t,r,i)}function rR(n,e,t){n.appendChild(e,t)}function iR(n,e,t,r,i){null!==r?gs(n,e,t,r,i):rR(n,e,t)}function ep(n,e){return n.parentNode(e)}let Dv,aR=function sR(n,e,t){return 40&n.type?kn(n,t):null};function tp(n,e,t,r){const i=Tv(n,r,e),o=e[le],a=function oR(n,e,t){return aR(n,e,t)}(r.parent||e[_n],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)iR(o,i,t[u],a,!1);else iR(o,i,t,a,!1);void 0!==Dv&&Dv(o,r,e,t,i)}function ll(n,e){if(null!==e){const t=e.type;if(3&t)return kn(e,n);if(4&t)return Av(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return ll(n,r);{const i=n[e.index];return vn(i)?Av(-1,i):Qe(i)}}if(32&t)return Ev(e,n)()||Qe(n[e.index]);{const r=cR(n,e);return null!==r?Array.isArray(r)?r[0]:ll(hs(n[bt]),r):ll(n,e.next)}}return null}function cR(n,e){return null!==e?n[bt][_n].projection[e.projection]:null}function Av(n,e){const t=Rt+n+1;if(t<e.length){const r=e[t],i=r[W].firstChild;if(null!==i)return ll(r,i)}return e[Yr]}function Sv(n,e,t,r,i,o,s){for(;null!=t;){const a=r[t.index],u=t.type;if(s&&0===e&&(a&&En(Qe(a),r),t.flags|=2),32&~t.flags)if(8&u)Sv(n,e,t.child,r,i,o,!1),Ua(e,n,i,a,o);else if(32&u){const c=Ev(t,r);let d;for(;d=c();)Ua(e,n,i,d,o);Ua(e,n,i,a,o)}else 16&u?dR(n,e,r,t,i,o):Ua(e,n,i,a,o);t=s?t.projectionNext:t.next}}function np(n,e,t,r,i,o){Sv(t,r,n.firstChild,e,i,o,!1)}function dR(n,e,t,r,i,o){const s=t[bt],u=s[_n].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)Ua(e,n,i,u[c],o);else{let c=u;const d=s[Pt];Ff(r)&&(c.flags|=128),Sv(n,e,c,d,i,o,!0)}}function hR(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function fR(n,e,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&ly(n,e,r),null!==i&&hR(n,e,i),null!==o&&function pG(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}const _e={};function L(n=1){pR(Ce(),U(),In()+n,!1)}function pR(n,e,t,r){if(!r)if(3&~e[ae]){const o=n.preOrderHooks;null!==o&&Mf(e,o,0,t)}else{const o=n.preOrderCheckHooks;null!==o&&Rf(e,o,t)}fs(t)}function j(n,e=we.Default){const t=U();return null===t?se(n,e):$S(qe(),t,ce(n),e)}function mR(n,e,t,r,i,o){const s=Ie(null);try{let a=null;i&dt.SignalBased&&(a=e[r][ns]),null!==a&&void 0!==a.transformFn&&(o=a.transformFn(o)),i&dt.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),null!==n.setInput?n.setInput(e,a,o,t,r):fS(e,a,r,o)}finally{Ie(s)}}function rp(n,e,t,r,i,o,s,a,u,c,d){const h=e.blueprint.slice();return h[_t]=i,h[ae]=204|r,(null!==c||n&&2048&n[ae])&&(h[ae]|=2048),IS(h),h[Pt]=h[Ca]=n,h[it]=t,h[Or]=s||n&&n[Or],h[le]=a||n&&n[le],h[Bt]=u||n&&n[Bt]||null,h[_n]=o,h[zc]=function Lz(){return Fz++}(),h[ar]=d,h[cS]=c,h[bt]=2==e.type?n[bt]:h,h}function Ba(n,e,t,r,i){let o=n.data[e];if(null===o)o=function Pv(n,e,t,r,i){const o=CS(),s=xy(),u=n.data[e]=function bG(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function Sa(){return null!==de.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(n,e,t,r,i),function tz(){return de.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function Kc(){const n=de.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Xr(o,!0),o}function hl(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function _R(n,e,t,r,i){const o=In(),s=2&r;try{fs(-1),s&&e.length>me&&pR(n,e,me,!1),Jr(s?2:0,i),t(r,i)}finally{fs(o),Jr(s?3:1,i)}}function Rv(n,e,t){if(by(e)){const r=Ie(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{Ie(r)}}}function Mv(n,e,t){wS()&&(function PG(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;ds(t)&&function VG(n,e,t){const r=kn(e,n),i=yR(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=ip(n,rp(n,i,null,s,r,e,null,n[Or].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Nf(t,e),En(r,e);const s=t.initialInputs;for(let a=i;a<o;a++){const u=n.data[a],c=ps(e,n,a,t);En(c,e),null!==s&&FG(0,a-i,c,u,0,s),kr(u)&&(ur(t.index,e)[it]=ps(e,n,a,t))}}(n,e,t,kn(t,e)),!(64&~t.flags)&&wR(n,e,t))}function xv(n,e,t=kn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(e,n):n[s];n[i++]=a}}}function yR(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Nv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Nv(n,e,t,r,i,o,s,a,u,c,d){const h=me+r,p=h+i,m=function mG(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:_e);return t}(h,p),_="function"==typeof c?c():c;return m[W]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:_,incompleteFirstPass:!1,ssrId:d}}let vR=()=>null;function IR(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;const s=e[o];if(void 0===s)continue;r??={};let a,u=dt.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let c=o;if(null!==i){if(!i.hasOwnProperty(o))continue;c=i[o]}0===n?ER(r,t,c,a,u):ER(r,t,c,a)}return r}function ER(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],void 0!==i&&o.push(i)}function Yn(n,e,t,r,i,o,s,a){const u=kn(e,t);let d,c=e.inputs;!a&&null!=c&&(d=c[r])?(Lv(n,t,d,r,i),ds(e)&&function TG(n,e){const t=ur(e,n);16&t[ae]||(t[ae]|=64)}(t,e.index)):3&e.type&&(r=function CG(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(u,r,i))}function Ov(n,e,t,r){if(wS()){const i=null===r?null:{"":-1},o=function MG(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(JA(e,s.selectors,!1))if(r||(r=[]),kr(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),kv(n,e,a.length)}else r.unshift(s),kv(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&bR(n,e,t,s,i,a),i&&function xG(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new $(-301,!1);r.push(e[i],o)}}}(t,r,i)}t.mergedAttrs=Uc(t.mergedAttrs,t.attrs)}function bR(n,e,t,r,i,o){for(let c=0;c<r.length;c++)Hy(Nf(t,e),n,r[c].type);!function OG(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const d=r[c];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,u=hl(n,e,r.length,null);for(let c=0;c<r.length;c++){const d=r[c];t.mergedAttrs=Uc(t.mergedAttrs,d.hostAttrs),kG(n,t,e,u,d),NG(u,d,i),null!==d.contentQueries&&(t.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=64);const h=d.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function wG(n,e,t){const i=e.directiveEnd,o=n.data,s=e.attrs,a=[];let u=null,c=null;for(let d=e.directiveStart;d<i;d++){const h=o[d],p=t?t.get(h):null,_=p?p.outputs:null;u=IR(0,h.inputs,d,u,p?p.inputs:null),c=IR(1,h.outputs,d,c,_);const v=null===u||null===s||dy(e)?null:LG(u,d,s);a.push(v)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}(n,t,o)}function wR(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function rz(){return de.lFrame.currentDirectiveIndex}();try{fs(o);for(let a=r;a<i;a++){const u=n.data[a],c=e[a];Oy(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&RG(u,c)}}finally{fs(-1),Oy(s)}}function RG(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function kv(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function NG(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;kr(e)&&(t[""]=n)}}function kG(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=ss(i.type)),s=new Yc(o,kr(i),j);n.blueprint[r]=s,t[r]=s,function AG(n,e,t,r,i){const o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function SG(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,o)}}(n,e,r,hl(n,t,i.hostVars,_e),i)}function ri(n,e,t,r,i,o){const s=kn(n,e);!function Vv(n,e,t,r,i,o,s){if(null==o)n.removeAttribute(e,i,t);else{const a=null==s?ge(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}(e[le],s,o,n.value,t,r,i)}function FG(n,e,t,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)mR(r,t,s[a++],s[a++],s[a++],s[a++])}function LG(n,e,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===r&&(r=[]);const s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function CR(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function TR(n,e){const t=n.contentQueries;if(null!==t){const r=Ie(null);try{for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const a=n.data[s];Sf(t[i]),a.contentQueries(2,e[s],s)}}}finally{Ie(r)}}}function ip(n,e){return n[jc]?n[uS][Nr]=e:n[jc]=e,n[uS]=e,e}function Fv(n,e,t){Sf(0);const r=Ie(null);try{e(n,t)}finally{Ie(r)}}function DR(n){return n[wa]||(n[wa]=[])}function AR(n){return n.cleanup||(n.cleanup=[])}function op(n,e){const t=n[Bt],r=t?t.get(ni,null):null;r&&r.handleError(e)}function Lv(n,e,t,r,i){for(let o=0;o<t.length;){const s=t[o++],a=t[o++],u=t[o++];mR(n.data[s],e[s],r,a,u,i)}}function Ni(n,e,t){const r=Gc(e,n);!function XP(n,e,t){n.setValue(e,t)}(n[le],r,t)}function UG(n,e){const t=ur(e,n),r=t[W];!function BG(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[_t];null!==i&&null===t[ar]&&(t[ar]=av(i,t[Bt])),Uv(r,t,t[it])}function Uv(n,e,t){Fy(e);try{const r=n.viewQuery;null!==r&&Fv(1,r,t);const i=n.template;null!==i&&_R(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Pi]?.finishViewCreation(n),n.staticContentQueries&&TR(n,e),n.staticViewQueries&&Fv(2,n.viewQuery,t);const o=n.components;null!==o&&function jG(n,e){for(let t=0;t<e.length;t++)UG(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ae]&=-5,Ly()}}function ja(n,e){return!e||null===e.firstChild||Ff(n)}function pl(n,e,t,r=!0){const i=e[W];if(function oG(n,e,t,r){const i=Rt+r,o=t.length;r>0&&(t[i-1][Nr]=e),r<o-Rt?(e[Nr]=t[i],zA(t,Rt+r,e)):(t.push(e),e[Nr]=null),e[Pt]=t;const s=e[$c];null!==s&&t!==s&&function sG(n,e){const t=n[Da];e[bt]!==e[Pt][Pt][bt]&&(n[ae]|=Ey.HasTransplantedViews),null===t?n[Da]=[e]:t.push(e)}(s,e);const a=e[Pi];null!==a&&a.insertView(n),Ry(e),e[ae]|=128}(i,e,n,t),r){const s=Av(t,n),a=e[le],u=ep(a,n[Yr]);null!==u&&function rG(n,e,t,r,i,o){r[_t]=i,r[_n]=e,np(n,r,t,1,i,o)}(i,n[_n],a,e,u,s)}const o=e[ar];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function gl(n,e,t,r,i=!1){for(;null!==t;){const o=e[t.index];null!==o&&r.push(Qe(o)),vn(o)&&RR(o,r);const s=t.type;if(8&s)gl(n,e,t.child,r);else if(32&s){const a=Ev(t,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=cR(e,t);if(Array.isArray(a))r.push(...a);else{const u=hs(e[bt]);gl(u[W],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function RR(n,e){for(let t=Rt;t<n.length;t++){const r=n[t],i=r[W].firstChild;null!==i&&gl(r[W],r,i,e)}n[Yr]!==n[_t]&&e.push(n[Yr])}let MR=[];const GG={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Wc(n.lView)},consumerOnSignalRead(){this.lView[ls]=this}},xR=100;function sp(n,e=!0,t=0){const r=n[Or],i=r.rendererFactory;i.begin?.();try{!function qG(n,e){jv(n,e);let t=0;for(;Py(n);){if(t===xR)throw new $(103,!1);t++,jv(n,1)}}(n,t)}catch(s){throw e&&op(n,s),s}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function WG(n,e,t,r){const i=e[ae];if(!(256&~i))return;e[Or].inlineEffectRunner?.flush(),Fy(e);let s=null,a=null;(function KG(n){return 2!==n.type})(n)&&(a=function $G(n){return n[ls]??function zG(n){const e=MR.pop()??Object.create(GG);return e.lView=n,e}(n)}(e),s=function pA(n){return n&&(n.nextProducerIndex=0),Ie(n)}(a));try{IS(e),function DS(n){return de.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&_R(n,e,t,2,r);const u=!(3&~i);if(u){const h=n.preOrderCheckHooks;null!==h&&Rf(e,h,null)}else{const h=n.preOrderHooks;null!==h&&Mf(e,h,0,null),Uy(e,0)}if(function QG(n){for(let e=hP(n);null!==e;e=fP(e)){if(!(e[ae]&Ey.HasTransplantedViews))continue;const t=e[Da];for(let r=0;r<t.length;r++){G3(t[r])}}}(e),NR(e,0),null!==n.contentQueries&&TR(n,e),u){const h=n.contentCheckHooks;null!==h&&Rf(e,h)}else{const h=n.contentHooks;null!==h&&Mf(e,h,1),Uy(e,1)}!function gG(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)fs(~i);else{const o=i,s=t[++r],a=t[++r];nz(s,o),a(2,e[o])}}}finally{fs(-1)}}(n,e);const c=n.components;null!==c&&kR(e,c,0);const d=n.viewQuery;if(null!==d&&Fv(2,d,r),u){const h=n.viewCheckHooks;null!==h&&Rf(e,h)}else{const h=n.viewHooks;null!==h&&Mf(e,h,2),Uy(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Cf]){for(const h of e[Cf])h();e[Cf]=null}e[ae]&=-73}catch(u){throw Wc(e),u}finally{null!==a&&(function gA(n,e){if(Ie(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Oc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Xh(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}(a,s),function HG(n){n.lView[ls]!==n&&(n.lView=null,MR.push(n))}(a)),Ly()}}function NR(n,e){for(let t=hP(n);null!==t;t=fP(t))for(let r=Rt;r<t.length;r++)OR(t[r],e)}function YG(n,e,t){OR(ur(e,n),t)}function OR(n,e){Sy(n)&&jv(n,e)}function jv(n,e){const r=n[W],i=n[ae],o=n[ls];let s=!!(0===e&&16&i);if(s||=!!(64&i&&0===e),s||=!!(1024&i),s||=!(!o?.dirty||!V_(o)),o&&(o.dirty=!1),n[ae]&=-9217,s)WG(r,n,r.template,n[it]);else if(8192&i){NR(n,1);const a=r.components;null!==a&&kR(n,a,1)}}function kR(n,e,t){for(let r=0;r<e.length;r++)YG(n,e[r],t)}function ml(n){for(n[Or].changeDetectionScheduler?.notify();n;){n[ae]|=64;const e=hs(n);if(wy(n)&&!e)return n;n=e}return null}class _l{get rootNodes(){const e=this._lView,t=e[W];return gl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[it]}set context(e){this._lView[it]=e}get destroyed(){return!(256&~this._lView[ae])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Pt];if(vn(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(cl(e,r),pf(t,r))}this._attachedToViewContainer=!1}Xf(this._lView[W],this._lView)}onDestroy(e){Af(this._lView,e)}markForCheck(){ml(this._cdRefInjectingView||this._lView)}detach(){this._lView[ae]&=-129}reattach(){Ry(this._lView),this._lView[ae]|=128}detectChanges(){this._lView[ae]|=1024,sp(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,eR(this._lView[W],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e,Ry(this._lView)}}let Oi=(()=>{class n{static{this.__NG_ELEMENT_ID__=XG}}return n})();const JG=Oi,ZG=class extends JG{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function fl(n,e,t,r){const i=Ie(null);try{const o=e.tView,u=rp(n,o,t,4096&n[ae]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);u[$c]=n[e.index];const d=n[Pi];return null!==d&&(u[Pi]=d.createEmbeddedView(o)),Uv(o,u,t),u}finally{Ie(i)}}(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new _l(i)}};function XG(){return ap(qe(),U())}function ap(n,e){return 4&n.type?new ZG(e,n,Na(n,e)):null}class Wv{}class w6{}class $R{}class T6{resolveComponentFactory(e){throw function C6(n){const e=Error(`No component factory found for ${Wt(n)}.`);return e.ngComponent=n,e}(e)}}let hp=(()=>{class n{static{this.NULL=new T6}}return n})();class HR{}let ki=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function D6(){const n=U(),t=ur(qe().index,n);return(yn(t)?t:n)[le]}()}}return n})(),A6=(()=>{class n{static{this.\u0275prov=re({token:n,providedIn:"root",factory:()=>null})}}return n})();const Kv={},GR=new Set;function ii(n){GR.has(n)||(GR.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function qR(...n){}class Ne{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Tt(!1),this.onMicrotaskEmpty=new Tt(!1),this.onStable=new Tt(!1),this.onError=new Tt(!1),typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function S6(){const n="function"==typeof Be.requestAnimationFrame;let e=Be[n?"requestAnimationFrame":"setTimeout"],t=Be[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function M6(n){const e=()=>{!function R6(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Be,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Yv(n),n.isCheckStableRunning=!0,Qv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Yv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(function x6(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,o,s,a);try{return WR(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),KR(n)}},onInvoke:(t,r,i,o,s,a,u)=>{try{return WR(n),t.invoke(i,o,s,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),KR(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,Yv(n),Qv(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ne.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(Ne.isInAngularZone())throw new $(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,P6,qR,qR);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const P6={};function Qv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Yv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function WR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function KR(n){n._nesting--,Qv(n)}class QR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Tt,this.onMicrotaskEmpty=new Tt,this.onStable=new Tt,this.onError=new Tt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}var ms=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ms||{});const YR={destroy(){}};function Zv(n,e){!e&&function bf(n){if(!sS())throw new $(-203,!1)}();const t=e?.injector??G(tn);if(!function Fr(n){return"browser"===(n??G(tn)).get(fo)}(t))return YR;ii("NgAfterNextRender");const r=t.get(bl),i=r.handler??=new ZR,o=e?.phase??ms.MixedReadWrite,s=()=>{i.unregister(u),a()},a=t.get(xa).onDestroy(s),u=Si(t,()=>new JR(o,()=>{s(),n()}));return i.register(u),{destroy:s}}class JR{constructor(e,t){this.phase=e,this.callbackFn=t,this.zone=G(Ne),this.errorHandler=G(ni,{optional:!0}),G(Wv,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}}class ZR{constructor(){this.executingCallbacks=!1,this.buckets={[ms.EarlyRead]:new Set,[ms.Write]:new Set,[ms.MixedReadWrite]:new Set,[ms.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const t of e)t.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let bl=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}}return n})();function pp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=K_(i,a):2==o&&(r=K_(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}class tM extends hp{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ee(e);return new Tl(t,this.ngModule)}}function nM(n){const e=[];for(const t in n){if(!n.hasOwnProperty(t))continue;const r=n[t];void 0!==r&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}class gp{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=hf(r);const i=this.injector.get(e,Kv,r);return i!==Kv||t===Kv?i:this.parentInjector.get(e,t,r)}}class Tl extends $R{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=nM(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return nM(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function c3(n){return n.map(u3).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){const o=Ie(null);try{let s=(i=i||this.ngModule)instanceof Kn?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new gp(e,s):e,u=a.get(HR,null);if(null===u)throw new $(407,!1);const c=a.get(A6,null),p={rendererFactory:u,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:a.get(bl,null),changeDetectionScheduler:a.get(Wv,null)},m=u.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",v=r?function _G(n,e,t,r){const o=r.get(PP,!1)||t===Mr.ShadowDom,s=n.selectRootElement(e,o);return function yG(n){vR(n)}(s),s}(m,r,this.componentDef.encapsulation,a):Zf(m,_,function F6(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(_));let b=512;this.componentDef.signals?b|=4096:this.componentDef.onPush||(b|=16);let D=null;null!==v&&(D=av(v,a,!0));const S=Nv(0,null,null,1,0,null,null,null,null,null,null),B=rp(null,S,null,b,null,null,p,m,a,null,D);let q,Z;Fy(B);try{const ne=this.componentDef;let T,E=null;ne.findHostDirectiveDefs?(T=[],E=new Map,ne.findHostDirectiveDefs(ne,T,E),T.push(ne)):T=[ne];const w=function U6(n,e){const t=n[W],r=me;return n[r]=e,Ba(t,r,2,"#host",null)}(B,v),A=function B6(n,e,t,r,i,o,s){const a=i[W];!function j6(n,e,t,r){for(const i of n)e.mergedAttrs=Uc(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(pp(e,e.mergedAttrs,!0),null!==t&&fR(r,t,e))}(r,n,e,s);let u=null;null!==e&&(u=av(e,i[Bt]));const c=o.rendererFactory.createRenderer(e,t);let d=16;t.signals?d=4096:t.onPush&&(d=64);const h=rp(i,yR(t),null,d,i[n.index],n,o,c,null,null,u);return a.firstCreatePass&&kv(a,n,r.length-1),ip(i,h),i[n.index]=h}(w,v,ne,T,B,p,m);Z=qc(S,me),v&&function z6(n,e,t,r){if(r)ly(n,t,["ng-version","17.3.12"]);else{const{attrs:i,classes:o}=function l3(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!xr(i))break;i=o}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&ly(n,t,i),o&&o.length>0&&hR(n,t,o.join(" "))}}(m,ne,v,r),void 0!==t&&function H6(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(Z,this.ngContentSelectors,t),q=function $6(n,e,t,r,i,o){const s=qe(),a=i[W],u=kn(s,i);bR(a,i,s,t,null,r);for(let d=0;d<t.length;d++)En(ps(i,a,s.directiveStart+d,s),i);wR(a,i,s),u&&En(u,i);const c=ps(i,a,s.directiveStart+s.componentOffset,s);if(n[it]=i[it]=c,null!==o)for(const d of o)d(c,e);return Rv(a,s,i),c}(A,ne,T,E,B,[G6]),Uv(S,B,null)}finally{Ly()}return new L6(this.componentType,q,Na(Z,B),B,Z)}finally{Ie(o)}}}class L6 extends w6{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new _l(i,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;Lv(o[W],o,i,e,t),this.previousInputValues.set(e,t),ml(ur(this._tNode.index,o))}}get injector(){return new Yt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function G6(){const n=qe();Pf(U()[W],n)}let Lr=(()=>{class n{static{this.__NG_ELEMENT_ID__=q6}}return n})();function q6(){return oM(qe(),U())}const W6=Lr,rM=class extends W6{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Na(this._hostTNode,this._hostLView)}get injector(){return new Yt(this._hostTNode,this._hostLView)}get parentInjector(){const e=Of(this._hostTNode,this._hostLView);if(jy(e)){const t=Zc(e,this._hostLView),r=Jc(e);return new Yt(t[W].data[r+8],t)}return new Yt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=iM(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Rt}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(a,i,ja(this._hostTNode,null)),a}createComponent(e,t,r,i,o){const s=e&&!function Bc(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const _=t||{};a=_.index,r=_.injector,i=_.projectableNodes,o=_.environmentInjector||_.ngModuleRef}const u=s?e:new Tl(Ee(e)),c=r||this.parentInjector;if(!o&&null==u.ngModule){const v=(s?c:this.parentInjector).get(Kn,null);v&&(o=v)}Ee(u.componentType??{});const m=u.create(c,i,null,o);return this.insertImpl(m.hostView,a,ja(this._hostTNode,null)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const i=e._lView;if(function H3(n){return vn(n[Pt])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const u=i[Pt],c=new rM(u,u[_n],u[Pt]);c.detach(c.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;return pl(s,i,o,r),e.attachToViewContainerRef(),zA(tI(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=iM(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=cl(this._lContainer,t);r&&(pf(tI(this._lContainer),t),Xf(r[W],r))}detach(e){const t=this._adjustIndex(e,-1),r=cl(this._lContainer,t);return r&&null!=pf(tI(this._lContainer),t)?new _l(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function iM(n){return n[8]}function tI(n){return n[8]||(n[8]=[])}function oM(n,e){let t;const r=e[n.index];return vn(r)?t=r:(t=CR(r,e,null,n),e[n.index]=t,ip(e,t)),sM(t,e,n,r),new rM(t,n,e)}let sM=function uM(n,e,t,r){if(n[Yr])return;let i;i=8&t.type?Qe(r):function K6(n,e){const t=n[le],r=t.createComment(""),i=kn(e,n);return gs(t,ep(t,i),r,function lG(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Yr]=i},nI=()=>!1;class rI{constructor(e){this.queryList=e,this.matches=null}clone(){return new rI(this.queryList)}setDirty(){this.queryList.setDirty()}}class iI{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const s=t.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new iI(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==cI(e,t).matches&&this.queries[t].setDirty()}}class cM{constructor(e,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof e?function n5(n){return n.split(",").map(e=>e.trim())}(e):e}}class oI{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new oI(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class sI{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new sI(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,t,Z6(t,o)),this.matchTNodeWithReadOption(e,t,kf(t,e,o,!1,!1))}else r===Oi?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,kf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===cr||i===Lr||i===Oi&&4&t.type)this.addMatch(t.index,-2);else{const o=kf(t,e,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Z6(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function e5(n,e,t,r){return-1===t?function X6(n,e){return 11&n.type?Na(n,e):4&n.type?ap(n,e):null}(e,n):-2===t?function t5(n,e,t){return t===cr?Na(e,n):t===Oi?ap(e,n):t===Lr?oM(e,n):void 0}(n,e,r):ps(n,n[W],t,e)}function lM(n,e,t,r){const i=e[Pi].queries[r];if(null===i.matches){const o=n.data,s=t.matches,a=[];for(let u=0;null!==s&&u<s.length;u+=2){const c=s[u];a.push(c<0?null:e5(e,o[c],s[u+1],t.metadata.read))}i.matches=a}return i.matches}function aI(n,e,t,r){const i=n.queries.getByIndex(t),o=i.matches;if(null!==o){const s=lM(n,e,i,t);for(let a=0;a<o.length;a+=2){const u=o[a];if(u>0)r.push(s[a/2]);else{const c=o[a+1],d=e[-u];for(let h=Rt;h<d.length;h++){const p=d[h];p[$c]===p[Pt]&&aI(p[W],p,c,r)}if(null!==d[Da]){const h=d[Da];for(let p=0;p<h.length;p++){const m=h[p];aI(m[W],m,c,r)}}}}}return r}function fM(n,e,t,r){const i=Ce();if(i.firstCreatePass){const o=qe();(function pM(n,e,t){null===n.queries&&(n.queries=new oI),n.queries.track(new sI(e,t))})(i,new cM(e,t,r),o.index),function r5(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),!(2&~t)&&(i.staticContentQueries=!0)}return function dM(n,e,t){const r=new Qy(!(4&~t));return function EG(n,e,t,r){const i=DR(e);i.push(t),n.firstCreatePass&&AR(n).push(r,i.length-1)}(n,e,r,r.destroy),(e[Pi]??=new iI).queries.push(new rI(r))-1}(i,U(),t)}function cI(n,e){return n.queries.getByIndex(e)}function gM(n,e){const t=n[W],r=cI(t,e);return r.crossesNgTemplate?aI(t,n,e,[]):lM(t,n,r,e)}function yM(n){return function mM(n){return"function"==typeof n&&void 0!==n[ns]}(n)&&"function"==typeof n.set}function We(n){let e=function PM(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(kr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const s=n;s.inputs=_p(n.inputs),s.inputTransforms=_p(n.inputTransforms),s.declaredInputs=_p(n.declaredInputs),s.outputs=_p(n.outputs);const a=i.hostBindings;a&&y5(n,a);const u=i.viewQuery,c=i.contentQueries;if(u&&m5(n,u),c&&_5(n,c),p5(n,i),P4(n.outputs,i.outputs),kr(i)&&i.data.animation){const d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===We&&(t=!1)}}e=Object.getPrototypeOf(e)}!function g5(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Uc(i.hostAttrs,t=Uc(t,i.hostAttrs))}}(r)}function p5(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const r=e.inputs[t];if(void 0!==r&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function _p(n){return n===Qr?{}:n===xe?[]:n}function m5(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function _5(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function y5(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function NM(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}class _s{}class OM{}class dI extends _s{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new tM(this);const i=mn(e);this._bootstrapComponents=lr(i.bootstrap),this._r3Injector=ZS(e,t,[{provide:_s,useValue:this},{provide:hp,useValue:this.componentFactoryResolver},...r],Wt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class hI extends OM{constructor(e){super(),this.moduleType=e}create(e){return new dI(this.moduleType,e,[])}}class kM extends _s{constructor(e){super(),this.componentFactoryResolver=new tM(this),this.instance=null;const t=new Ia([...e.providers,{provide:_s,useValue:this},{provide:hp,useValue:this.componentFactoryResolver}],e.parent||Ef(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function yp(n,e,t=null){return new kM({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let Ha=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Hn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ip(n){return!!function fI(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function oi(n,e,t){return n[e]=t}function Mt(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function ys(n,e,t,r){const i=Mt(n,e,t);return Mt(n,e+1,r)||i}function je(n,e,t,r,i,o,s,a){const u=U(),c=Ce(),d=n+me,h=c.firstCreatePass?function M5(n,e,t,r,i,o,s,a,u){const c=e.consts,d=Ba(e,n,4,s||null,Zr(c,a));Ov(e,t,d,Zr(c,u)),Pf(e,d);const h=d.tView=Nv(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}(d,c,u,e,t,r,i,o,s):c.data[d];Xr(h,!1);const p=VM(c,u,h,n);Qc()&&tp(c,u,p,h),En(p,u);const m=CR(p,u,p,h);return u[d]=m,ip(u,m),function aM(n,e,t){return nI(n,e,t)}(m,h,u),Df(h)&&Mv(c,u,h),null!=s&&xv(u,h,a),je}let VM=function FM(n,e,t,r){return ei(!0),e[le].createComment("")};function si(n,e,t,r){const i=U();return Mt(i,Vr(),e)&&(Ce(),ri(ot(),i,n,e,t,r)),si}function Xa(n,e,t,r,i,o){const a=ys(n,function Ri(){return de.lFrame.bindingIndex}(),t,i);return Mi(2),a?e+ge(t)+r+ge(i)+o:_e}function Ap(n,e){return n<<17|e<<2}function vo(n){return n>>17&32767}function wI(n){return 2|n}function Is(n){return(131068&n)>>2}function CI(n,e){return-131069&n|e<<2}function TI(n){return 1|n}function px(n,e,t,r){const i=n[t+1],o=null===e;let s=r?vo(i):Is(i),a=!1;for(;0!==s&&(!1===a||o);){const c=n[s+1];_q(n[s],e)&&(a=!0,n[s+1]=r?TI(c):wI(c)),s=r?vo(c):Is(c)}a&&(n[t+1]=r?wI(i):TI(i))}function _q(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&va(n,e)>=0}function X(n,e,t){const r=U();return Mt(r,Vr(),e)&&Yn(Ce(),ot(),r,n,e,r[le],t,!1),X}function DI(n,e,t,r,i){const s=i?"class":"style";Lv(n,t,e.inputs[s],s,r)}function Io(n,e){return function Ur(n,e,t,r){const i=U(),o=Ce(),s=Mi(2);o.firstUpdatePass&&function wx(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[In()],s=function bx(n,e){return e>=n.expandoStartIndex}(n,t);(function Ax(n,e){return!!(n.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function Dq(n,e,t,r){const i=function ky(n){const e=de.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=xl(t=AI(null,n,e,t,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==i)if(t=AI(i,n,e,t,r),null===o){let u=function Aq(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Is(r))return n[vo(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=AI(null,n,e,u[1],r),u=xl(u,e.attrs,r),function Sq(n,e,t,r){n[vo(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else o=function Pq(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=xl(r,n[o].hostAttrs,t);return xl(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function gq(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=vo(s),u=Is(s);n[r]=t;let d,c=!1;if(Array.isArray(t)?(d=t[1],(null===d||va(t,d)>0)&&(c=!0)):d=t,i)if(0!==u){const p=vo(n[a+1]);n[r+1]=Ap(p,a),0!==p&&(n[p+1]=CI(n[p+1],r)),n[a+1]=function fq(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Ap(a,0),0!==a&&(n[a+1]=CI(n[a+1],r)),a=r;else n[r+1]=Ap(u,0),0===a?a=r:n[u+1]=CI(n[u+1],r),u=r;c&&(n[r+1]=wI(n[r+1])),px(n,d,r,!0),px(n,d,r,!1),function mq(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&va(o,e)>=0&&(t[r+1]=TI(t[r+1]))}(e,d,n,r,o),s=Ap(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,t,s,r)}}(o,n,s,r),e!==_e&&Mt(i,s,e)&&function Tx(n,e,t,r,i,o,s,a){if(!(3&e.type))return;const u=n.data,c=u[a+1],d=function pq(n){return!(1&~n)}(c)?Dx(u,e,t,i,Is(c),s):void 0;Sp(d)||(Sp(o)||function hq(n){return!(2&~n)}(c)&&(o=Dx(u,null,t,i,a,s)),function fG(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:go.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=go.Important),n.setStyle(t,r,i,o))}}(r,s,Gc(In(),t),i,o))}(o,o.data[In()],i,i[le],n,i[s+1]=function Nq(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Wt(po(n)))),n}(e,t),r,s)}(n,e,null,!0),Io}function AI(n,e,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],r=xl(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function xl(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),or(n,s,!!t||e[++o]))}return void 0===n?null:n}function Dx(n,e,t,r,i,o){const s=null===e;let a;for(;i>0;){const u=n[i],c=Array.isArray(u),d=c?u[1]:u,h=null===d;let p=t[i+1];p===_e&&(p=h?xe:void 0);let m=h?uy(p,r):d===r?p:void 0;if(c&&!Sp(m)&&(m=uy(u,r)),Sp(m)&&(a=m,s))return a;const _=n[i+1];i=s?vo(_):Is(_)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=uy(u,r))}return a}function Sp(n){return void 0!==n}function R(n,e,t,r){const i=U(),o=Ce(),s=me+n,a=i[le],u=o.firstCreatePass?function n9(n,e,t,r,i,o){const s=e.consts,u=Ba(e,n,2,r,Zr(s,i));return Ov(e,t,u,Zr(s,o)),null!==u.attrs&&pp(u,u.attrs,!1),null!==u.mergedAttrs&&pp(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,e,t,r):o.data[s],c=Mx(o,i,u,a,e,n);i[s]=c;const d=Df(u);return Xr(u,!0),fR(a,c,u),!function Sl(n){return!(32&~n.flags)}(u)&&Qc()&&tp(o,i,c,u),0===function q3(){return de.lFrame.elementDepthCount}()&&En(c,i),function W3(){de.lFrame.elementDepthCount++}(),d&&(Mv(o,i,u),Rv(o,u,i)),null!==r&&xv(i,u),R}function P(){let n=qe();xy()?function Ny(){de.lFrame.isParent=!1}():(n=n.parent,Xr(n,!1));const e=n;(function Q3(n){return de.skipHydrationRootTNode===n})(e)&&function X3(){de.skipHydrationRootTNode=null}(),function K3(){de.lFrame.elementDepthCount--}();const t=Ce();return t.firstCreatePass&&(Pf(t,n),by(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function pz(n){return!!(8&n.flags)}(e)&&DI(t,e,U(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function gz(n){return!!(16&n.flags)}(e)&&DI(t,e,U(),e.stylesWithoutHost,!1),P}function hr(n,e,t,r){return R(n,e,t,r),P(),hr}let Mx=(n,e,t,r,i,o)=>(ei(!0),Zf(r,i,function NS(){return de.lFrame.currentNamespace}()));function br(){return U()}const Es=void 0;var c9=["en",[["a","p"],["AM","PM"],Es],[["AM","PM"],Es,Es],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Es,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Es,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Es,"{1} 'at' {0}",Es],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function u9(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let au={};function Fn(n){const e=function l9(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=Fx(e);if(t)return t;const r=e.split("-")[0];if(t=Fx(r),t)return t;if("en"===r)return c9;throw new $(701,!1)}function Fx(n){return n in au||(au[n]=Be.ng&&Be.ng.common&&Be.ng.common.locales&&Be.ng.common.locales[n]),au[n]}var st=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(st||{});const uu="en-US";let Lx=uu;function Fe(n,e,t,r){const i=U(),o=Ce(),s=qe();return VI(o,i,i[le],s,n,e,r),Fe}function VI(n,e,t,r,i,o,s){const a=Df(r),c=n.firstCreatePass&&AR(n),d=e[it],h=DR(e);let p=!0;if(3&r.type||s){const v=kn(r,e),b=s?s(v):v,D=h.length,S=s?q=>s(Qe(q[r.index])):r.index;let B=null;if(!s&&a&&(B=function sW(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=e[wa],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(n,e,i,r.index)),null!==B)(B.__ngLastListenerFn__||B).__ngNextListenerFn__=o,B.__ngLastListenerFn__=o,p=!1;else{o=h1(r,e,d,o,!1);const q=t.listen(b,i,o);h.push(o,q),c&&c.push(i,S,D,D+1)}}else o=h1(r,e,d,o,!1);const m=r.outputs;let _;if(p&&null!==m&&(_=m[i])){const v=_.length;if(v)for(let b=0;b<v;b+=2){const Z=e[_[b]][_[b+1]].subscribe(o),ne=h.length;h.push(o,Z),c&&c.push(i,r.index,ne,-(ne+1))}}}function d1(n,e,t,r){const i=Ie(null);try{return Jr(6,e,t),!1!==t(r)}catch(o){return op(n,o),!1}finally{Jr(7,e,t),Ie(i)}}function h1(n,e,t,r,i){return function o(s){if(s===Function)return r;ml(n.componentOffset>-1?ur(n.index,e):e);let u=d1(e,t,r,s),c=o.__ngNextListenerFn__;for(;c;)u=d1(e,t,c,s)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function be(n=1){return function oz(n){return(de.lFrame.contextLView=function ES(n,e){for(;n>0;)e=e[Ca],n--;return e}(n,de.lFrame.contextLView))[it]}(n)}function C1(){return function uI(n,e){return n[Pi].queries[e].queryList}(U(),Vy())}function cu(n){return Aa(function ez(){return de.lFrame.contextLView}(),me+n)}function k(n,e=""){const t=U(),r=Ce(),i=n+me,o=r.firstCreatePass?Ba(r,i,1,e,null):r.data[i],s=O1(r,t,o,e,n);t[i]=s,Qc()&&tp(r,t,s,o),Xr(o,!1)}let O1=(n,e,t,r,i)=>(ei(!0),function bv(n,e){return n.createText(e)}(e[le],r));function $e(n){return Oe("",n,""),$e}function Oe(n,e,t){const r=U(),i=function Za(n,e,t,r){return Mt(n,Vr(),t)?e+ge(t)+r:_e}(r,n,e,t);return i!==_e&&Ni(r,In(),i),Oe}function LI(n,e,t,r,i){const o=U(),s=Xa(o,n,e,t,r,i);return s!==_e&&Ni(o,In(),s),LI}function ln(n,e,t){yM(e)&&(e=e());const r=U();return Mt(r,Vr(),e)&&Yn(Ce(),ot(),r,n,e,r[le],t,!1),ln}function bn(n,e){const t=yM(n);return t&&n.set(e),t}function dn(n,e){const t=U(),r=Ce(),i=qe();return VI(r,t,t[le],i,n,e),dn}function UI(n,e,t,r,i){if(n=ce(n),Array.isArray(n))for(let o=0;o<n.length;o++)UI(n[o],e,t,r,i);else{const o=Ce(),s=U(),a=qe();let u=cs(n)?n:ce(n.provide);const c=oS(n),d=1048575&a.providerIndexes,h=a.directiveStart,p=a.providerIndexes>>20;if(cs(n)||!n.multi){const m=new Yc(c,i,j),_=jI(u,e,i?d:d+p,h);-1===_?(Hy(Nf(a,s),o,u),BI(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),s.push(m)):(t[_]=m,s[_]=m)}else{const m=jI(u,e,d+p,h),_=jI(u,e,d,d+p),b=_>=0&&t[_];if(i&&!b||!i&&!(m>=0&&t[m])){Hy(Nf(a,s),o,u);const D=function PW(n,e,t,r,i){const o=new Yc(n,t,j);return o.multi=[],o.index=e,o.componentProviders=0,$1(o,i,r&&!t),o}(i?SW:AW,t.length,i,r,c);!i&&b&&(t[_].providerFactory=D),BI(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(D),s.push(D)}else BI(o,n,m>-1?m:_,$1(t[i?_:m],c,!i&&r));!i&&r&&b&&t[_].componentProviders++}}}function BI(n,e,t,r){const i=cs(e),o=function _3(n){return!!n.useClass}(e);if(i||o){const u=(o?ce(e.useClass):e).prototype.ngOnDestroy;if(u){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const d=c.indexOf(t);-1===d?c.push(t,[r,u]):c[d+1].push(r,u)}else c.push(t,u)}}}function $1(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function jI(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function AW(n,e,t,r){return $I(this.multi,[])}function SW(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=ps(t,t[W],this.providerFactory.index,r);o=a.slice(0,s),$I(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],$I(i,o);return o}function $I(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function yt(n,e=[]){return t=>{t.providersResolver=(r,i)=>function DW(n,e,t){const r=Ce();if(r.firstCreatePass){const i=kr(n);UI(t,r.data,r.blueprint,i,!0),UI(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}let RW=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=hy(0,t.type),i=r.length>0?yp([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=re({token:n,providedIn:"environment",factory:()=>new n(se(Kn))})}}return n})();function z1(n){ii("NgStandalone"),n.getStandaloneInjector=e=>e.get(RW).getOrCreateStandaloneInjector(n)}function Op(n,e,t,r){return function q1(n,e,t,r,i,o){const s=e+t;return Mt(n,s,i)?oi(n,s+1,o?r.call(o,i):r(i)):Ul(n,s+1)}(U(),Vn(),n,e,t,r)}function Ul(n,e){const t=n[e];return t===_e?void 0:t}function K1(n,e,t,r,i,o,s,a){const u=e+t;return function Ep(n,e,t,r,i){const o=ys(n,e,t,r);return Mt(n,e+2,i)||o}(n,u,i,o,s)?oi(n,u+3,a?r.call(a,i,o,s):r(i,o,s)):Ul(n,u+3)}function lu(n,e){const t=Ce();let r;const i=n+me;t.firstCreatePass?(r=function jW(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const o=r.factory||(r.factory=ss(r.type)),a=Gn(j);try{const u=xf(!1),c=o();return xf(u),function pW(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,U(),i,c),c}finally{Gn(a)}}function Bl(n,e,t,r){const i=n+me,o=U(),s=Aa(o,i);return jl(o,i)?function W1(n,e,t,r,i,o,s){const a=e+t;return ys(n,a,i,o)?oi(n,a+2,s?r.call(s,i,o):r(i,o)):Ul(n,a+2)}(o,Vn(),e,s.transform,t,r,s):s.transform(t,r)}function jl(n,e){return n[W].data[e].pure}function Z1(n,e){return ap(n,e)}class fu{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}const h8=new fu("17.3.12");let pN=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const vN=new ee(""),Fp=new ee("");let YI,KI=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,YI||(function L8(n){YI=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(se(Ne),se(QI),se(Fp))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac})}}return n})(),QI=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return YI?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function Hl(n){return!!n&&"function"==typeof n.then}function IN(n){return!!n&&"function"==typeof n.subscribe}const JI=new ee("");let ZI=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=G(JI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const o=i();if(Hl(o))t.push(o);else if(IN(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const XI=new ee("");function wN(n,e){return Array.isArray(e)?e.reduce(wN,n):{...n,...e}}let Eo=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=G(eP),this.afterRenderEffectManager=G(bl),this.externalTestViews=new Set,this.beforeRender=new vr,this.afterTick=new vr,this.componentTypes=[],this.components=[],this.isStable=G(Ha).hasPendingTasks.pipe(Re(t=>!t)),this._injector=G(Kn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof $R;if(!this._injector.get(ZI).done)throw!i&&function co(n){const e=Ee(n)||Kt(n)||cn(n);return null!==e&&e.standalone}(t),new $(405,!1);let s;s=i?t:this._injector.get(hp).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function U8(n){return n.isBoundToModule}(s)?void 0:this._injector.get(_s),c=s.create(tn.NULL,[],r||s.selector,a),d=c.location.nativeElement,h=c.injector.get(vN,null);return h?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),Lp(this.components,c),h?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new $(101,!1);const r=Ie(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,Ie(r)}}detectChangesInAttachedViews(t){let r=0;const i=this.afterRenderEffectManager;for(;;){if(r===xR)throw new $(103,!1);if(t){const o=0===r;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)j8(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>eE(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>eE(o))))break}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Lp(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(XI,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Lp(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new $(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Lp(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function j8(n,e,t){!e&&!eE(n)||function $8(n,e,t){let r;t?(r=0,n[ae]|=1024):r=64&n[ae]?0:1,sp(n,e,r)}(n,t,e)}function eE(n){return Py(n)}class z8{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let CN=(()=>{class n{compileModuleSync(t){return new hI(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=lr(mn(t).declarations).reduce((s,a)=>{const u=Ee(a);return u&&s.push(new Tl(u)),s},[]);return new z8(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),q8=(()=>{class n{constructor(){this.zone=G(Ne),this.applicationRef=G(Eo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function W8(){const n=G(Ne),e=G(ni);return t=>n.runOutsideAngular(()=>e.handleError(t))}let Q8=(()=>{class n{constructor(){this.subscription=new On,this.initialized=!1,this.zone=G(Ne),this.pendingTasks=G(Ha)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ne.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Vi=new ee("",{providedIn:"root",factory:()=>G(Vi,we.Optional|we.SkipSelf)||function Y8(){return typeof $localize<"u"&&$localize.locale||uu}()}),tE=new ee("");let SN=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function N6(n="zone.js",e){return"noop"===n?new QR:"zone.js"===n?new Ne(e):n}(r?.ngZone,function AN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function T5(n,e,t){return new dI(n,e,t)}(t.moduleType,this.injector,function DN(n){return[{provide:Ne,useFactory:n},{provide:as,multi:!0,useFactory:()=>{const e=G(q8,{optional:!0});return()=>e.initialize()}},{provide:as,multi:!0,useFactory:()=>{const e=G(Q8);return()=>{e.initialize()}}},{provide:eP,useFactory:W8}]}(()=>i)),s=o.injector.get(ni,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{Lp(this._modules,o),a.unsubscribe()})}),function bN(n,e,t){try{const r=t();return Hl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(ZI);return a.runInitializers(),a.donePromise.then(()=>(function Ux(n){"string"==typeof n&&(Lx=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(Vi,uu)||uu),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,r=[]){const i=wN({},r);return function G8(n,e,t){const r=new hI(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(Eo);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new $(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(tE,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(se(tn))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),bo=null;const PN=new ee("");function RN(n,e,t=[]){const r=`Platform: ${e}`,i=new ee(r);return(o=[])=>{let s=nE();if(!s||s.injector.get(PN,!1)){const a=[...t,...o,{provide:i,useValue:!0}];n?n(a):function X8(n){if(bo&&!bo.get(PN,!1))throw new $(400,!1);(function EN(){!function d4(n){vA=n}(()=>{throw new $(600,!1)})})(),bo=n;const e=n.get(SN);(function xN(n){n.get(bP,null)?.forEach(t=>t())})(n)}(function MN(n=[],e){return tn.create({name:e,providers:[{provide:gy,useValue:"platform"},{provide:tE,useValue:new Set([()=>bo=null])},...n]})}(a,r))}return function e7(n){const e=nE();if(!e)throw new $(401,!1);return e}()}}function nE(){return bo?.get(SN)??null}let Gl=(()=>{class n{static{this.__NG_ELEMENT_ID__=n7}}return n})();function n7(n){return function r7(n,e,t){if(ds(n)&&!t){const r=ur(n.index,e);return new _l(r,r)}return 47&n.type?new _l(e[bt],e):null}(qe(),U(),!(16&~n))}class FN{constructor(){}supports(e){return Ip(e)}create(e){return new u7(e)}}const a7=(n,e)=>e;class u7{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||a7}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<UN(r,i,o)?t:r,a=UN(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const c=a-i,d=u-i;if(c!=d){for(let p=0;p<c;p++){const m=p<o.length?o[p]:o[p]=0,_=m+p;d<=_&&_<c&&(o[p]=m+1)}o[s.previousIndex]=d-c}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ip(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),r=!0),t=t._next}else i=0,function P5(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new c7(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new LN),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new LN),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class c7{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class l7{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class LN{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new l7,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function UN(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function jN(){return new aE([new FN])}let aE=(()=>{class n{static{this.\u0275prov=re({token:n,providedIn:"root",factory:jN})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||jN()),deps:[[n,new ff,new ir]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new $(901,!1)}}return n})();const g7=RN(null,"core",[]);let m7=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(se(Eo))}}static{this.\u0275mod=Ai({type:n})}static{this.\u0275inj=Kr({})}}return n})();function gu(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let dO=null;function wo(){return dO}class X7{}const wr=new ee("");let lE=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:()=>G(tK),providedIn:"platform"})}}return n})();const eK=new ee("");let tK=(()=>{class n extends lE{constructor(){super(),this._doc=G(wr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return wo().getBaseHref(this._doc)}onPopState(t){const r=wo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=wo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function dE(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function hO(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Fi(n){return n&&"?"!==n[0]?"?"+n:n}let ws=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:()=>G(pO),providedIn:"root"})}}return n})();const fO=new ee("");let pO=(()=>{class n extends ws{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??G(wr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return dE(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Fi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+Fi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+Fi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(se(lE),se(fO,8))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),nK=(()=>{class n extends ws{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=dE(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Fi(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Fi(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(se(lE),se(fO,8))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac})}}return n})(),Kl=(()=>{class n{constructor(t){this._subject=new Tt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function oK(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(hO(gO(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Fi(r))}normalize(t){return n.stripTrailingSlash(function iK(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,gO(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Fi}static{this.joinWithSlash=dE}static{this.stripTrailingSlash=hO}static{this.\u0275fac=function(r){return new(r||n)(se(ws))}}static{this.\u0275prov=re({token:n,factory:()=>function rK(){return new Kl(se(ws))}(),providedIn:"root"})}}return n})();function gO(n){return n.replace(/\/index.html$/,"")}var Un=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Un||{}),et=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(et||{}),fr=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(fr||{});const jt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Qp(n,e){return Tr(Fn(n)[st.DateFormat],e)}function Yp(n,e){return Tr(Fn(n)[st.TimeFormat],e)}function Jp(n,e){return Tr(Fn(n)[st.DateTimeFormat],e)}function Cr(n,e){const t=Fn(n),r=t[st.NumberSymbols][e];if(typeof r>"u"){if(e===jt.CurrencyDecimal)return t[st.NumberSymbols][jt.Decimal];if(e===jt.CurrencyGroup)return t[st.NumberSymbols][jt.Group]}return r}function _O(n){if(!n[st.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[st.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Tr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function fE(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const vK=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Zp={},IK=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Li=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Li||{}),Le=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Le||{}),Ue=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Ue||{});function EK(n,e,t,r){let i=function RK(n){if(IO(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,o=1,s=1]=n.split("-").map(a=>+a);return Xp(i,o-1,s)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(vK))return function MK(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,u=Number(n[6]||0),c=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return o.call(e,s,a,u,c),e}(r)}const e=new Date(n);if(!IO(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Ui(t,e)||e;let a,s=[];for(;e;){if(a=IK.exec(e),!a){s.push(e);break}{s=s.concat(a.slice(1));const d=s.pop();if(!d)break;e=d}}let u=i.getTimezoneOffset();r&&(u=vO(r,u),i=function PK(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function SK(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(vO(e,i)-i))}(i,r,!0));let c="";return s.forEach(d=>{const h=function AK(n){if(gE[n])return gE[n];let e;switch(n){case"G":case"GG":case"GGG":e=at(Ue.Eras,et.Abbreviated);break;case"GGGG":e=at(Ue.Eras,et.Wide);break;case"GGGGG":e=at(Ue.Eras,et.Narrow);break;case"y":e=$t(Le.FullYear,1,0,!1,!0);break;case"yy":e=$t(Le.FullYear,2,0,!0,!0);break;case"yyy":e=$t(Le.FullYear,3,0,!1,!0);break;case"yyyy":e=$t(Le.FullYear,4,0,!1,!0);break;case"Y":e=rg(1);break;case"YY":e=rg(2,!0);break;case"YYY":e=rg(3);break;case"YYYY":e=rg(4);break;case"M":case"L":e=$t(Le.Month,1,1);break;case"MM":case"LL":e=$t(Le.Month,2,1);break;case"MMM":e=at(Ue.Months,et.Abbreviated);break;case"MMMM":e=at(Ue.Months,et.Wide);break;case"MMMMM":e=at(Ue.Months,et.Narrow);break;case"LLL":e=at(Ue.Months,et.Abbreviated,Un.Standalone);break;case"LLLL":e=at(Ue.Months,et.Wide,Un.Standalone);break;case"LLLLL":e=at(Ue.Months,et.Narrow,Un.Standalone);break;case"w":e=pE(1);break;case"ww":e=pE(2);break;case"W":e=pE(1,!0);break;case"d":e=$t(Le.Date,1);break;case"dd":e=$t(Le.Date,2);break;case"c":case"cc":e=$t(Le.Day,1);break;case"ccc":e=at(Ue.Days,et.Abbreviated,Un.Standalone);break;case"cccc":e=at(Ue.Days,et.Wide,Un.Standalone);break;case"ccccc":e=at(Ue.Days,et.Narrow,Un.Standalone);break;case"cccccc":e=at(Ue.Days,et.Short,Un.Standalone);break;case"E":case"EE":case"EEE":e=at(Ue.Days,et.Abbreviated);break;case"EEEE":e=at(Ue.Days,et.Wide);break;case"EEEEE":e=at(Ue.Days,et.Narrow);break;case"EEEEEE":e=at(Ue.Days,et.Short);break;case"a":case"aa":case"aaa":e=at(Ue.DayPeriods,et.Abbreviated);break;case"aaaa":e=at(Ue.DayPeriods,et.Wide);break;case"aaaaa":e=at(Ue.DayPeriods,et.Narrow);break;case"b":case"bb":case"bbb":e=at(Ue.DayPeriods,et.Abbreviated,Un.Standalone,!0);break;case"bbbb":e=at(Ue.DayPeriods,et.Wide,Un.Standalone,!0);break;case"bbbbb":e=at(Ue.DayPeriods,et.Narrow,Un.Standalone,!0);break;case"B":case"BB":case"BBB":e=at(Ue.DayPeriods,et.Abbreviated,Un.Format,!0);break;case"BBBB":e=at(Ue.DayPeriods,et.Wide,Un.Format,!0);break;case"BBBBB":e=at(Ue.DayPeriods,et.Narrow,Un.Format,!0);break;case"h":e=$t(Le.Hours,1,-12);break;case"hh":e=$t(Le.Hours,2,-12);break;case"H":e=$t(Le.Hours,1);break;case"HH":e=$t(Le.Hours,2);break;case"m":e=$t(Le.Minutes,1);break;case"mm":e=$t(Le.Minutes,2);break;case"s":e=$t(Le.Seconds,1);break;case"ss":e=$t(Le.Seconds,2);break;case"S":e=$t(Le.FractionalSeconds,1);break;case"SS":e=$t(Le.FractionalSeconds,2);break;case"SSS":e=$t(Le.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=tg(Li.Short);break;case"ZZZZZ":e=tg(Li.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=tg(Li.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=tg(Li.Long);break;default:return null}return gE[n]=e,e}(d);c+=h?h(i,t,u):"''"===d?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function Xp(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Ui(n,e){const t=function aK(n){return Fn(n)[st.LocaleId]}(n);if(Zp[t]??={},Zp[t][e])return Zp[t][e];let r="";switch(e){case"shortDate":r=Qp(n,fr.Short);break;case"mediumDate":r=Qp(n,fr.Medium);break;case"longDate":r=Qp(n,fr.Long);break;case"fullDate":r=Qp(n,fr.Full);break;case"shortTime":r=Yp(n,fr.Short);break;case"mediumTime":r=Yp(n,fr.Medium);break;case"longTime":r=Yp(n,fr.Long);break;case"fullTime":r=Yp(n,fr.Full);break;case"short":const i=Ui(n,"shortTime"),o=Ui(n,"shortDate");r=eg(Jp(n,fr.Short),[i,o]);break;case"medium":const s=Ui(n,"mediumTime"),a=Ui(n,"mediumDate");r=eg(Jp(n,fr.Medium),[s,a]);break;case"long":const u=Ui(n,"longTime"),c=Ui(n,"longDate");r=eg(Jp(n,fr.Long),[u,c]);break;case"full":const d=Ui(n,"fullTime"),h=Ui(n,"fullDate");r=eg(Jp(n,fr.Full),[d,h])}return r&&(Zp[t][e]=r),r}function eg(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function jr(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function $t(n,e,t=0,r=!1,i=!1){return function(o,s){let a=function wK(n,e){switch(n){case Le.FullYear:return e.getFullYear();case Le.Month:return e.getMonth();case Le.Date:return e.getDate();case Le.Hours:return e.getHours();case Le.Minutes:return e.getMinutes();case Le.Seconds:return e.getSeconds();case Le.FractionalSeconds:return e.getMilliseconds();case Le.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,o);if((t>0||a>-t)&&(a+=t),n===Le.Hours)0===a&&-12===t&&(a=12);else if(n===Le.FractionalSeconds)return function bK(n,e){return jr(n,3).substring(0,e)}(a,e);const u=Cr(s,jt.MinusSign);return jr(a,e,u,r,i)}}function at(n,e,t=Un.Format,r=!1){return function(i,o){return function CK(n,e,t,r,i,o){switch(t){case Ue.Months:return function lK(n,e,t){const r=Fn(n),o=Tr([r[st.MonthsFormat],r[st.MonthsStandalone]],e);return Tr(o,t)}(e,i,r)[n.getMonth()];case Ue.Days:return function cK(n,e,t){const r=Fn(n),o=Tr([r[st.DaysFormat],r[st.DaysStandalone]],e);return Tr(o,t)}(e,i,r)[n.getDay()];case Ue.DayPeriods:const s=n.getHours(),a=n.getMinutes();if(o){const c=function pK(n){const e=Fn(n);return _O(e),(e[st.ExtraData][2]||[]).map(r=>"string"==typeof r?fE(r):[fE(r[0]),fE(r[1])])}(e),d=function gK(n,e,t){const r=Fn(n);_O(r);const o=Tr([r[st.ExtraData][0],r[st.ExtraData][1]],e)||[];return Tr(o,t)||[]}(e,i,r),h=c.findIndex(p=>{if(Array.isArray(p)){const[m,_]=p,v=s>=m.hours&&a>=m.minutes,b=s<_.hours||s===_.hours&&a<_.minutes;if(m.hours<_.hours){if(v&&b)return!0}else if(v||b)return!0}else if(p.hours===s&&p.minutes===a)return!0;return!1});if(-1!==h)return d[h]}return function uK(n,e,t){const r=Fn(n),o=Tr([r[st.DayPeriodsFormat],r[st.DayPeriodsStandalone]],e);return Tr(o,t)}(e,i,r)[s<12?0:1];case Ue.Eras:return function dK(n,e){return Tr(Fn(n)[st.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,o,n,e,t,r)}}function tg(n){return function(e,t,r){const i=-1*r,o=Cr(t,jt.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Li.Short:return(i>=0?"+":"")+jr(s,2,o)+jr(Math.abs(i%60),2,o);case Li.ShortGMT:return"GMT"+(i>=0?"+":"")+jr(s,1,o);case Li.Long:return"GMT"+(i>=0?"+":"")+jr(s,2,o)+":"+jr(Math.abs(i%60),2,o);case Li.Extended:return 0===r?"Z":(i>=0?"+":"")+jr(s,2,o)+":"+jr(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}const TK=0,ng=4;function yO(n){const e=n.getDay(),t=0===e?-3:ng-e;return Xp(n.getFullYear(),n.getMonth(),n.getDate()+t)}function pE(n,e=!1){return function(t,r){let i;if(e){const o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{const o=yO(t),s=function DK(n){const e=Xp(n,TK,1).getDay();return Xp(n,0,1+(e<=ng?ng:ng+7)-e)}(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return jr(i,n,Cr(r,jt.MinusSign))}}function rg(n,e=!1){return function(t,r){return jr(yO(t).getFullYear(),n,Cr(r,jt.MinusSign),e)}}const gE={};function vO(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function IO(n){return n instanceof Date&&!isNaN(n.valueOf())}const EE=/\s+/,CO=[];let og=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=CO,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(EE):CO}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(EE):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(EE).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(j(cr),j(ki))}}static{this.\u0275dir=he({type:n,selectors:[["","ngClass",""]],inputs:{klass:[dt.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();class GK{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _u=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new GK(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),DO(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{DO(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(j(Lr),j(Oi),j(aE))}}static{this.\u0275dir=he({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function DO(n,e){n.context.$implicit=e.item}let ci=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new qK,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){AO("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){AO("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(j(Lr),j(Oi))}}static{this.\u0275dir=he({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class qK{constructor(){this.$implicit=null,this.ngIf=null}}function AO(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Wt(e)}'.`)}function $r(n,e){return new $(2100,!1)}const sQ=new ee(""),aQ=new ee("");let sg=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(null==t||""===t||t!=t)return null;try{return EK(t,r??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(s){throw $r()}}static{this.\u0275fac=function(r){return new(r||n)(j(Vi,16),j(sQ,24),j(aQ,24))}}static{this.\u0275pipe=Wn({name:"date",type:n,pure:!0,standalone:!0})}}return n})(),RO=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw $r();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Wn({name:"slice",type:n,pure:!1,standalone:!0})}}return n})(),_Q=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ai({type:n})}static{this.\u0275inj=Kr({})}}return n})();const MO="browser";function xO(n){return"server"===n}let bQ=(()=>{class n{static{this.\u0275prov=re({token:n,providedIn:"root",factory:()=>function EQ(n){return n===MO}(G(fo))?new wQ(G(wr),window):new TQ})}}return n})();class wQ{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function CQ(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}}class TQ{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class eY extends X7{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class AE extends eY{static makeCurrent(){!function Z7(n){dO??=n}(new AE)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function tY(){return Zl=Zl||document.querySelector("base"),Zl?Zl.getAttribute("href"):null}();return null==t?null:function nY(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){Zl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function zK(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Zl=null,iY=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac})}}return n})();const SE=new ee("");let jO=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(se(SE),se(Ne))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac})}}return n})();class $O{constructor(e){this._doc=e}}const PE="ng-app-id";let zO=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xO(o),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${PE}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(PE),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(PE,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){const i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(se(wr),se(Bf),se(wP,8),se(fo))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac})}}return n})();const RE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ME=/%COMP%/g,uY=new ee("",{providedIn:"root",factory:()=>!0});function GO(n,e){return e.map(t=>t.replace(ME,n))}let qO=(()=>{class n{constructor(t,r,i,o,s,a,u,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=xO(a),this.defaultRenderer=new xE(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Mr.ShadowDom&&(r={...r,encapsulation:Mr.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof KO?i.applyToHost(t):i instanceof NE&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Mr.Emulated:o=new KO(u,c,r,this.appId,d,s,a,h);break;case Mr.ShadowDom:return new hY(u,c,t,r,s,a,this.nonce,h);default:o=new NE(u,c,r,d,s,a,h)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(se(jO),se(zO),se(Bf),se(uY),se(wr),se(fo),se(Ne),se(wP))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac})}}return n})();class xE{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(RE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(WO(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(WO(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=RE[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=RE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(go.DashCase|go.Important)?e.style.setProperty(t,r,i&go.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&go.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=wo().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function WO(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class hY extends xE{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=GO(i.id,i.styles);for(const d of c){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class NE extends xE{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?GO(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class KO extends NE{constructor(e,t,r,i,o,s,a,u){const c=i+"-"+r.id;super(e,t,r,o,s,a,u,c),this.contentAttr=function cY(n){return"_ngcontent-%COMP%".replace(ME,n)}(c),this.hostAttr=function lY(n){return"_nghost-%COMP%".replace(ME,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let fY=(()=>{class n extends $O{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(se(wr))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac})}}return n})();const QO=["alt","control","meta","shift"],pY={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gY={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let mY=(()=>{class n extends $O{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wo().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),QO.forEach(c=>{const d=r.indexOf(c);d>-1&&(r.splice(d,1),s+=c+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=pY[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),QO.forEach(s=>{s!==i&&(0,gY[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(se(wr))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac})}}return n})();const IY=RN(g7,"browser",[{provide:fo,useValue:MO},{provide:bP,useValue:function _Y(){AE.makeCurrent()},multi:!0},{provide:wr,useFactory:function vY(){return function nH(n){Xy=n}(document),document},deps:[]}]),EY=new ee(""),ZO=[{provide:Fp,useClass:class rY{addToWindow(e){Be.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new $(5103,!1);return o},Be.getAllAngularTestabilities=()=>e.getAllTestabilities(),Be.getAllAngularRootElements=()=>e.getAllRootElements(),Be.frameworkStabilizers||(Be.frameworkStabilizers=[]),Be.frameworkStabilizers.push(r=>{const i=Be.getAllAngularTestabilities();let o=i.length;const s=function(){o--,0==o&&r()};i.forEach(a=>{a.whenStable(s)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?wo().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:vN,useClass:KI,deps:[Ne,QI,Fp]},{provide:KI,useClass:KI,deps:[Ne,QI,Fp]}],XO=[{provide:gy,useValue:"root"},{provide:ni,useFactory:function yY(){return new ni},deps:[]},{provide:SE,useClass:fY,multi:!0,deps:[wr,Ne,fo]},{provide:SE,useClass:mY,multi:!0,deps:[wr]},qO,zO,jO,{provide:HR,useExisting:qO},{provide:class DQ{},useClass:iY,deps:[]},[]];let bY=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Bf,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(se(EY,12))}}static{this.\u0275mod=Ai({type:n})}static{this.\u0275inj=Kr({providers:[...XO,...ZO],imports:[_Q,m7]})}}return n})(),wY=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(se(wr))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function lg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}function Co(n){return this instanceof Co?(this.v=n,this):new Co(n)}function sk(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function FE(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){!function i(o,s,a,u){Promise.resolve(u).then(function(c){o({value:c,done:a})},s)}(a,u,(s=n[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const ak=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function uk(n){return lt(n?.then)}function ck(n){return lt(n[q_])}function lk(n){return Symbol.asyncIterator&&lt(n?.[Symbol.asyncIterator])}function dk(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const hk=function ZY(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function fk(n){return lt(n?.[hk])}function pk(n){return function ok(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(m){return function(_){return Promise.resolve(_).then(m,h)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(m,_){r[m]&&(i[m]=function(v){return new Promise(function(b,D){o.push([m,v,b,D])>1||u(m,v)})},_&&(i[m]=_(i[m])))}function u(m,_){try{!function c(m){m.value instanceof Co?Promise.resolve(m.value.v).then(d,h):p(o[0][2],m)}(r[m](_))}catch(v){p(o[0][3],v)}}function d(m){u("next",m)}function h(m){u("throw",m)}function p(m,_){m(_),o.shift(),o.length&&u(o[0][0],o[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield Co(t.read());if(i)return yield Co(void 0);yield yield Co(r)}}finally{t.releaseLock()}})}function gk(n){return lt(n?.getReader)}function li(n){if(n instanceof Ct)return n;if(null!=n){if(ck(n))return function XY(n){return new Ct(e=>{const t=n[q_]();if(lt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(ak(n))return function eJ(n){return new Ct(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(uk(n))return function tJ(n){return new Ct(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,TA)})}(n);if(lk(n))return mk(n);if(fk(n))return function nJ(n){return new Ct(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(gk(n))return function rJ(n){return mk(pk(n))}(n)}throw dk(n)}function mk(n){return new Ct(e=>{(function iJ(n,e){var t,r,i,o;return function rk(n,e,t,r){return new(t||(t=Promise))(function(o,s){function a(d){try{c(r.next(d))}catch(h){s(h)}}function u(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(d.value).then(a,u)}c((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=sk(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Bi(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function dg(n,e=0){return un((t,r)=>{t.subscribe(qt(r,i=>Bi(r,n,()=>r.next(i),e),()=>Bi(r,n,()=>r.complete(),e),i=>Bi(r,n,()=>r.error(i),e)))})}function hg(n,e=0){return un((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function _k(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ct(t=>{Bi(t,e,()=>{const r=n[Symbol.asyncIterator]();Bi(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function ht(n,e){return e?function lJ(n,e){if(null!=n){if(ck(n))return function oJ(n,e){return li(n).pipe(hg(e),dg(e))}(n,e);if(ak(n))return function aJ(n,e){return new Ct(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(uk(n))return function sJ(n,e){return li(n).pipe(hg(e),dg(e))}(n,e);if(lk(n))return _k(n,e);if(fk(n))return function uJ(n,e){return new Ct(t=>{let r;return Bi(t,e,()=>{r=n[hk](),Bi(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>lt(r?.return)&&r.return()})}(n,e);if(gk(n))return function cJ(n,e){return _k(pk(n),e)}(n,e)}throw dk(n)}(n,e):li(n)}const{isArray:dJ}=Array,{getPrototypeOf:hJ,prototype:fJ,keys:pJ}=Object;function yk(n){if(1===n.length){const e=n[0];if(dJ(e))return{args:e,keys:null};if(function gJ(n){return n&&"object"==typeof n&&hJ(n)===fJ}(e)){const t=pJ(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function UE(n){return n[n.length-1]}function vk(n){return lt(UE(n))?n.pop():void 0}function fg(n){return function mJ(n){return n&&lt(n.schedule)}(UE(n))?n.pop():void 0}const{isArray:_J}=Array;function Ik(n){return Re(e=>function yJ(n,e){return _J(e)?n(...e):n(e)}(n,e))}function Ek(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let bk=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(j(ki),j(cr))}}static{this.\u0275dir=he({type:n})}}return n})(),Cs=(()=>{class n extends bk{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=en(n)))(i||n)}})()}static{this.\u0275dir=he({type:n,features:[We]})}}return n})();const di=new ee(""),EJ={provide:di,useExisting:rt(()=>To),multi:!0},wJ=new ee("");let To=(()=>{class n extends bk{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function bJ(){const n=wo()?wo().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(j(ki),j(cr),j(wJ,8))}}static{this.\u0275dir=he({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Fe("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[yt([EJ]),We]})}}return n})();function Do(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Ck(n){return null!=n&&"number"==typeof n.length}const wn=new ee(""),Ao=new ee(""),CJ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function Ak(n){return Do(n.value)?{required:!0}:null}function Pk(n){return Do(n.value)||CJ.test(n.value)?null:{email:!0}}function pg(n){return null}function Nk(n){return null!=n}function Ok(n){return Hl(n)?ht(n):n}function kk(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Vk(n,e){return e.map(t=>t(n))}function Fk(n){return n.map(e=>function TJ(n){return!n.validate}(e)?e:t=>e.validate(t))}function BE(n){return null!=n?function Lk(n){if(!n)return null;const e=n.filter(Nk);return 0==e.length?null:function(t){return kk(Vk(t,e))}}(Fk(n)):null}function jE(n){return null!=n?function Uk(n){if(!n)return null;const e=n.filter(Nk);return 0==e.length?null:function(t){return function vJ(...n){const e=vk(n),{args:t,keys:r}=yk(n),i=new Ct(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let u=s,c=s;for(let d=0;d<s;d++){let h=!1;li(t[d]).subscribe(qt(o,p=>{h||(h=!0,c--),a[d]=p},()=>u--,void 0,()=>{(!u||!h)&&(c||o.next(r?Ek(r,a):a),o.complete())}))}});return e?i.pipe(Ik(e)):i}(Vk(t,e).map(Ok)).pipe(Re(kk))}}(Fk(n)):null}function Bk(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function $E(n){return n?Array.isArray(n)?n:[n]:[]}function gg(n,e){return Array.isArray(n)?n.includes(e):n===e}function zk(n,e){const t=$E(e);return $E(n).forEach(i=>{gg(t,i)||t.push(i)}),t}function Hk(n,e){return $E(e).filter(t=>!gg(n,t))}class Gk{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=BE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Bn extends Gk{get formDirective(){return null}get path(){return null}}class So extends Gk{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class qk{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ts=(()=>{class n extends qk{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(j(So,2))}}static{this.\u0275dir=he({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Io("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[We]})}}return n})(),ed=(()=>{class n extends qk{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(j(Bn,10))}}static{this.\u0275dir=he({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Io("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[We]})}}return n})();const td="VALID",_g="INVALID",yu="PENDING",nd="DISABLED";function GE(n){return(yg(n)?n.validators:n)||null}function qE(n,e){return(yg(e)?e.asyncValidators:n)||null}function yg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class WE{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===td}get invalid(){return this.status===_g}get pending(){return this.status==yu}get disabled(){return this.status===nd}get enabled(){return this.status!==nd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(zk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(zk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Hk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Hk(e,this._rawAsyncValidators))}hasValidator(e){return gg(this._rawValidators,e)}hasAsyncValidator(e){return gg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=yu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=nd,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=td,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===td||this.status===yu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nd:td}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=yu,this._hasOwnPendingAsyncValidator=!0;const t=Ok(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Tt,this.statusChanges=new Tt}_calculateStatus(){return this._allControlsDisabled()?nd:this.errors?_g:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yu)?yu:this._anyControlsHaveStatus(_g)?_g:td}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){yg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function PJ(n){return Array.isArray(n)?BE(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function RJ(n){return Array.isArray(n)?jE(n):n||null}(this._rawAsyncValidators)}}class KE extends WE{constructor(e,t,r){super(GE(t),qE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Qk(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new $(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function Kk(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new $(1e3,"");if(!r[t])throw new $(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const vu=new ee("CallSetDisabledState",{providedIn:"root",factory:()=>vg}),vg="always";function rd(n,e,t=vg){QE(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function NJ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Yk(n,e)})}(n,e),function kJ(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function OJ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Yk(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function xJ(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function bg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function QE(n,e){const t=function jk(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Bk(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function $k(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Bk(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();bg(e._rawValidators,i),bg(e._rawAsyncValidators,i)}function Yk(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const BJ={provide:Bn,useExisting:rt(()=>Ds)},id=Promise.resolve();let Ds=(()=>{class n extends Bn{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Tt,this.form=new KE({},BE(t),jE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){id.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),rd(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){id.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){id.then(()=>{const r=this._findContainer(t.path),i=new KE({});(function Jk(n,e){QE(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){id.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){id.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Zk(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(j(wn,10),j(Ao,10),j(vu,8))}}static{this.\u0275dir=he({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Fe("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[dt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[yt([BJ]),We]})}}return n})();function Xk(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function eV(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const tV=class extends WE{constructor(e=null,t,r){super(GE(t),qE(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=eV(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Xk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Xk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){eV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},zJ={provide:So,useExisting:rt(()=>Po)},iV=Promise.resolve();let Po=(()=>{class n extends So{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new tV,this._registered=!1,this.name="",this.update=new Tt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function ZE(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===To?t=o:function LJ(n){return Object.getPrototypeOf(n.constructor)===Cs}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function JE(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){rd(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){iV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&gu(r);iV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Ig(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(j(Bn,9),j(wn,10),j(Ao,10),j(di,10),j(Gl,8),j(vu,8))}}static{this.\u0275dir=he({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[dt.None,"disabled","isDisabled"],model:[dt.None,"ngModel","model"],options:[dt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[yt([zJ]),We,Ir]})}}return n})(),od=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=he({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();const XJ={provide:di,useExisting:rt(()=>Iu),multi:!0};function hV(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Iu=(()=>{class n extends Cs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=hV(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function eZ(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=en(n)))(i||n)}})()}static{this.\u0275dir=he({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&Fe("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[yt([XJ]),We]})}}return n})(),Cg=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(hV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(j(cr),j(ki),j(Iu,9))}}static{this.\u0275dir=he({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();const tZ={provide:di,useExisting:rt(()=>nb),multi:!0};function fV(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let nb=(()=>{class n extends Cs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],o=r.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const c=this._getOptionValue(s[a].value);i.push(c)}}else{const s=r.options;for(let a=0;a<s.length;a++){const u=s[a];if(u.selected){const c=this._getOptionValue(u.value);i.push(c)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function nZ(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=en(n)))(i||n)}})()}static{this.\u0275dir=he({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&Fe("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[yt([tZ]),We]})}}return n})(),Tg=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(fV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(fV(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(j(cr),j(ki),j(nb,9))}}static{this.\u0275dir=he({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function pV(n){return"number"==typeof n?n:parseInt(n,10)}let As=(()=>{class n{constructor(){this._validator=pg}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):pg,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=he({type:n,features:[Ir]})}}return n})();const oZ={provide:wn,useExisting:rt(()=>Ss),multi:!0};let Ss=(()=>{class n extends As{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=gu,this.createValidator=t=>Ak}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=en(n)))(i||n)}})()}static{this.\u0275dir=he({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&si("required",i._enabled?"":null)},inputs:{required:"required"},features:[yt([oZ]),We]})}}return n})();const aZ={provide:wn,useExisting:rt(()=>Dg),multi:!0};let Dg=(()=>{class n extends As{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=gu,this.createValidator=t=>Pk}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=en(n)))(i||n)}})()}static{this.\u0275dir=he({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[yt([aZ]),We]})}}return n})();const uZ={provide:wn,useExisting:rt(()=>Ag),multi:!0};let Ag=(()=>{class n extends As{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>pV(t),this.createValidator=t=>function Rk(n){return e=>Do(e.value)||!Ck(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=en(n)))(i||n)}})()}static{this.\u0275dir=he({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&si("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[yt([uZ]),We]})}}return n})();const cZ={provide:wn,useExisting:rt(()=>rb),multi:!0};let rb=(()=>{class n extends As{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>pV(t),this.createValidator=t=>function Mk(n){return e=>Ck(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=en(n)))(i||n)}})()}static{this.\u0275dir=he({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&si("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[yt([cZ]),We]})}}return n})(),dZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ai({type:n})}static{this.\u0275inj=Kr({})}}return n})(),fZ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:vu,useValue:t.callSetDisabledState??vg}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ai({type:n})}static{this.\u0275inj=Kr({imports:[dZ]})}}return n})();function fe(...n){return ht(n,fg(n))}function ib(...n){const e=fg(n),t=vk(n),{args:r,keys:i}=yk(n);if(0===r.length)return ht([],e);const o=new Ct(function gZ(n,e,t=os){return r=>{IV(e,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)IV(e,()=>{const c=ht(n[u],e);let d=!1;c.subscribe(qt(r,h=>{o[u]=h,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>Ek(i,s):os));return t?o.pipe(Ik(t)):o}function IV(n,e,t){n?Bi(t,n,e):e()}const Sg=L_(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Cn(n,e,t=1/0){return lt(e)?Cn((r,i)=>Re((o,s)=>e(r,o,i,s))(li(n(r,i))),t):("number"==typeof e&&(t=e),un((r,i)=>function mZ(n,e,t,r,i,o,s,a){const u=[];let c=0,d=0,h=!1;const p=()=>{h&&!u.length&&!c&&e.complete()},m=v=>c<r?_(v):u.push(v),_=v=>{o&&e.next(v),c++;let b=!1;li(t(v,d++)).subscribe(qt(e,D=>{i?.(D),o?m(D):e.next(D)},()=>{b=!0},void 0,()=>{if(b)try{for(c--;u.length&&c<r;){const D=u.shift();s?Bi(e,s,()=>_(D)):_(D)}p()}catch(D){e.error(D)}}))};return n.subscribe(qt(e,m,()=>{h=!0,p()})),()=>{a?.()}}(r,i,n,t)))}function sd(n=1/0){return Cn(os,n)}function ob(...n){return function _Z(){return sd(1)}()(ht(n,fg(n)))}function EV(n){return new Ct(e=>{li(n()).subscribe(e)})}function Pg(n,e){const t=lt(n)?n:()=>n,r=i=>i.error(t());return new Ct(e?i=>e.schedule(r,0,i):r)}const hi=new Ct(n=>n.complete());function sb(){return un((n,e)=>{let t=null;n._refCount++;const r=qt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class bV extends Ct{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,PA(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new On;const t=this.getSubject();e.add(this.source.subscribe(qt(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=On.EMPTY)}return e}refCount(){return sb()(this)}}function zr(n,e){return un((t,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();t.subscribe(qt(r,u=>{i?.unsubscribe();let c=0;const d=o++;li(n(u,d)).subscribe(i=qt(r,h=>r.next(e?e(u,h,d,c++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ps(n){return n<=0?()=>hi:un((e,t)=>{let r=0;e.subscribe(qt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ro(n,e){return un((t,r)=>{let i=0;t.subscribe(qt(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Rg(n){return un((e,t)=>{let r=!1;e.subscribe(qt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function wV(n=IZ){return un((e,t)=>{let r=!1;e.subscribe(qt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function IZ(){return new Sg}function Rs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ro((i,o)=>n(i,o,r)):os,Ps(1),t?Rg(e):wV(()=>new Sg))}function ad(n,e){return lt(e)?Cn(n,e,1):Cn(n,1)}function Tn(n,e,t){const r=lt(n)||e||t?{next:n,error:e,complete:t}:n;return r?un((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(qt(o,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),o.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),o.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):os}function Eu(n){return un((e,t)=>{let o,r=null,i=!1;r=e.subscribe(qt(t,void 0,void 0,s=>{o=li(n(s,Eu(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function ab(n){return n<=0?()=>hi:un((e,t)=>{let r=[];e.subscribe(qt(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ub(n){return un((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const ve="primary",ud=Symbol("RouteTitle");class DZ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function bu(n){return new DZ(n)}function AZ(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function fi(n,e){const t=n?cb(n):void 0,r=e?cb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!CV(n[i],e[i]))return!1;return!0}function cb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function CV(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function TV(n){return n.length>0?n[n.length-1]:null}function Mo(n){return function pZ(n){return!!n&&(n instanceof Ct||lt(n.lift)&&lt(n.subscribe))}(n)?n:Hl(n)?ht(Promise.resolve(n)):fe(n)}const PZ={exact:function SV(n,e,t){if(!Ms(n.segments,e.segments)||!Mg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!SV(n.children[r],e.children[r],t))return!1;return!0},subset:PV},DV={exact:function RZ(n,e){return fi(n,e)},subset:function MZ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>CV(n[t],e[t]))},ignored:()=>!0};function AV(n,e,t){return PZ[t.paths](n.root,e.root,t.matrixParams)&&DV[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function PV(n,e,t){return RV(n,e,e.segments,t)}function RV(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ms(i,t)||e.hasChildren()||!Mg(i,t,r))}if(n.segments.length===t.length){if(!Ms(n.segments,t)||!Mg(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!PV(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Ms(n.segments,i)&&Mg(n.segments,i,r)&&n.children[ve])&&RV(n.children[ve],e,o,r)}}function Mg(n,e,t){return e.every((r,i)=>DV[t](n[i].parameters,r.parameters))}class wu{constructor(e=new Ye([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=bu(this.queryParams),this._queryParamMap}toString(){return OZ.serialize(this)}}class Ye{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xg(this)}}class cd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=bu(this.parameters),this._parameterMap}toString(){return NV(this)}}function Ms(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Cu=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:()=>new lb,providedIn:"root"})}}return n})();class lb{parse(e){const t=new GZ(e);return new wu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ld(e.root,!0)}`,r=function FZ(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Ng(t)}=${Ng(i)}`).join("&"):`${Ng(t)}=${Ng(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function kZ(n){return encodeURI(n)}(e.fragment)}`:""}`}}const OZ=new lb;function xg(n){return n.segments.map(e=>NV(e)).join("/")}function ld(n,e){if(!n.hasChildren())return xg(n);if(e){const t=n.children[ve]?ld(n.children[ve],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ve&&r.push(`${i}:${ld(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function NZ(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ve&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ve&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===ve?[ld(n.children[ve],!1)]:[`${i}:${ld(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ve]?`${xg(n)}/${t[0]}`:`${xg(n)}/(${t.join("//")})`}}function MV(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ng(n){return MV(n).replace(/%3B/gi,";")}function db(n){return MV(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Og(n){return decodeURIComponent(n)}function xV(n){return Og(n.replace(/\+/g,"%20"))}function NV(n){return`${db(n.path)}${function VZ(n){return Object.entries(n).map(([e,t])=>`;${db(e)}=${db(t)}`).join("")}(n.parameters)}`}const LZ=/^[^\/()?;#]+/;function hb(n){const e=n.match(LZ);return e?e[0]:""}const UZ=/^[^\/()?;=#]+/,jZ=/^[^=?&#]+/,zZ=/^[^&#]+/;class GZ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ye([],{}):new Ye([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ve]=new Ye(e,t)),r}parseSegment(){const e=hb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new cd(Og(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function BZ(n){const e=n.match(UZ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=hb(this.remaining);i&&(r=i,this.capture(r))}e[Og(t)]=Og(r)}parseQueryParam(e){const t=function $Z(n){const e=n.match(jZ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function HZ(n){const e=n.match(zZ);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=xV(t),o=xV(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=hb(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new $(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ve);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[ve]:new Ye([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}}function OV(n){return n.segments.length>0?new Ye([],{[ve]:n}):n}function kV(n){const e={};for(const[r,i]of Object.entries(n.children)){const o=kV(i);if(r===ve&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function qZ(n){if(1===n.numberOfChildren&&n.children[ve]){const e=n.children[ve];return new Ye(n.segments.concat(e.segments),e.children)}return n}(new Ye(n.segments,e))}function Tu(n){return n instanceof wu}function VV(n){let e;const i=OV(function t(o){const s={};for(const u of o.children){const c=t(u);s[u.outlet]=c}const a=new Ye(o.url,s);return o===n&&(e=a),a}(n.root));return e??i}function FV(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return fb(i,i,i,t,r);const o=function KZ(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new UV(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([u,c])=>{a[u]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new UV(t,e,r)}(e);if(o.toRoot())return fb(i,i,new Ye([],{}),t,r);const s=function QZ(n,e,t){if(n.isAbsolute)return new Vg(e,!0,0);if(!t)return new Vg(e,!1,NaN);if(null===t.parent)return new Vg(t,!0,0);const r=kg(n.commands[0])?0:1;return function YZ(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new Vg(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),a=s.processChildren?hd(s.segmentGroup,s.index,o.commands):BV(s.segmentGroup,s.index,o.commands);return fb(i,s.segmentGroup,a,t,r)}function kg(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function dd(n){return"object"==typeof n&&null!=n&&n.outlets}function fb(n,e,t,r,i){let s,o={};r&&Object.entries(r).forEach(([u,c])=>{o[u]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`}),s=n===e?t:LV(n,e,t);const a=OV(kV(s));return new wu(a,o,i)}function LV(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:LV(o,e,t)}),new Ye(n.segments,r)}class UV{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&kg(r[0]))throw new $(4003,!1);const i=r.find(dd);if(i&&i!==TV(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Vg{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function BV(n,e,t){if(n??=new Ye([],{}),0===n.segments.length&&n.hasChildren())return hd(n,e,t);const r=function ZZ(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const s=n.segments[i],a=t[r];if(dd(a))break;const u=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!$V(u,c,s))return o;r+=2}else{if(!$V(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Ye(n.segments.slice(0,r.pathIndex),{});return o.children[ve]=new Ye(n.segments.slice(r.pathIndex),n.children),hd(o,0,i)}return r.match&&0===i.length?new Ye(n.segments,{}):r.match&&!n.hasChildren()?pb(n,e,t):r.match?hd(n,0,i):pb(n,e,t)}function hd(n,e,t){if(0===t.length)return new Ye(n.segments,{});{const r=function JZ(n){return dd(n[0])?n[0].outlets:{[ve]:n}}(t),i={};if(Object.keys(r).some(o=>o!==ve)&&n.children[ve]&&1===n.numberOfChildren&&0===n.children[ve].segments.length){const o=hd(n.children[ve],e,t);return new Ye(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=BV(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new Ye(n.segments,i)}}function pb(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(dd(o)){const u=XZ(o.outlets);return new Ye(r,u)}if(0===i&&kg(t[0])){r.push(new cd(n.segments[e].path,jV(t[0]))),i++;continue}const s=dd(o)?o.outlets[ve]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&kg(a)?(r.push(new cd(s,jV(a))),i+=2):(r.push(new cd(s,{})),i++)}return new Ye(r,{})}function XZ(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=pb(new Ye([],{}),0,r))}),e}function jV(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function $V(n,e,t){return n==t.path&&fi(e,t.parameters)}const fd="imperative";var Pe=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Pe||{});class pi{constructor(e,t){this.id=e,this.url=t}}class Fg extends pi{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Pe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ji extends pi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Pe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var pr=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(pr||{}),Lg=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Lg||{});class Du extends pi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Pe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Au extends pi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Pe.NavigationSkipped}}class Ug extends pi{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Pe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zV extends pi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Pe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eX extends pi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Pe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tX extends pi{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Pe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class nX extends pi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Pe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rX extends pi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Pe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iX{constructor(e){this.route=e,this.type=Pe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class oX{constructor(e){this.route=e,this.type=Pe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class sX{constructor(e){this.snapshot=e,this.type=Pe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aX{constructor(e){this.snapshot=e,this.type=Pe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uX{constructor(e){this.snapshot=e,this.type=Pe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cX{constructor(e){this.snapshot=e,this.type=Pe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class HV{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Pe.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class gb{}class mb{constructor(e){this.url=e}}class lX{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new pd,this.attachRef=null}}let pd=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new lX,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class GV{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=_b(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=_b(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=yb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return yb(e,this._root).map(t=>t.value)}}function _b(n,e){if(n===e.value)return e;for(const t of e.children){const r=_b(n,t);if(r)return r}return null}function yb(n,e){if(n===e.value)return[e];for(const t of e.children){const r=yb(n,t);if(r.length)return r.unshift(e),r}return[]}class Hr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Su(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class qV extends GV{constructor(e,t){super(e),this.snapshot=t,Eb(this,e)}toString(){return this.snapshot.toString()}}function WV(n){const e=function dX(n){const o=new Ib([],{},{},"",{},ve,n,null,{});return new KV("",new Hr(o,[]))}(n),t=new Hn([new cd("",{})]),r=new Hn({}),i=new Hn({}),o=new Hn({}),s=new Hn(""),a=new xo(t,r,o,s,i,ve,n,e.root);return a.snapshot=e.root,new qV(new Hr(a,[]),e)}class xo{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Re(c=>c[ud]))??fe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Re(e=>bu(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Re(e=>bu(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vb(n,e,t="emptyOnly"){let r;const{routeConfig:i}=n;return r=null===e||"always"!==t&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...i?.data,...n._resolvedData}},i&&YV(i)&&(r.resolve[ud]=i.title),r}class Ib{get title(){return this.data?.[ud]}constructor(e,t,r,i,o,s,a,u,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=bu(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=bu(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class KV extends GV{constructor(e,t){super(t),this.url=e,Eb(this,t)}toString(){return QV(this._root)}}function Eb(n,e){e.value._routerState=n,e.children.forEach(t=>Eb(n,t))}function QV(n){const e=n.children.length>0?` { ${n.children.map(QV).join(", ")} } `:"";return`${n.value}${e}`}function bb(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,fi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),fi(e.params,t.params)||n.paramsSubject.next(t.params),function SZ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!fi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),fi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function wb(n,e){const t=fi(n.params,e.params)&&function xZ(n,e){return Ms(n,e)&&n.every((t,r)=>fi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||wb(n.parent,e.parent))}function YV(n){return"string"==typeof n.title||null===n.title}let Cb=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ve,this.activateEvents=new Tt,this.deactivateEvents=new Tt,this.attachEvents=new Tt,this.detachEvents=new Tt,this.parentContexts=G(pd),this.location=G(Lr),this.changeDetector=G(Gl),this.environmentInjector=G(Kn),this.inputBinder=G(Bg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=t;const i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Tb(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=he({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ir]})}}return n})();class Tb{__ngOutletInjector(e){return new Tb(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===xo?this.route:e===pd?this.childContexts:this.parent.get(e,t)}}const Bg=new ee("");let JV=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=ib([r.queryParams,r.params,r.data]).pipe(zr(([o,s,a],u)=>(a={...o,...s,...a},0===u?fe(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const s=function J7(n){const e=Ee(n);if(!e)return null;const t=new Tl(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac})}}return n})();function gd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function fX(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return gd(n,r,i);return gd(n,r)})}(n,e,t);return new Hr(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>gd(n,a)),s}}const r=function pX(n){return new xo(new Hn(n.url),new Hn(n.params),new Hn(n.queryParams),new Hn(n.fragment),new Hn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>gd(n,o));return new Hr(r,i)}}const ZV="ngNavigationCancelingError";function XV(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Tu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=eF(!1,pr.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function eF(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[ZV]=!0,t.cancellationCode=e,t}function tF(n){return!!n&&n[ZV]}let nF=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=sr({type:n,selectors:[["ng-component"]],standalone:!0,features:[z1],decls:1,vars:0,template:function(r,i){1&r&&hr(0,"router-outlet")},dependencies:[Cb],encapsulation:2})}}return n})();function Db(n){const e=n.children&&n.children.map(Db),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ve&&(t.component=nF),t}function gi(n){return n.outlet||ve}function md(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class bX{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),bb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Su(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Su(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Su(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Su(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new cX(o.value.snapshot))}),e.children.length&&this.forwardEvent(new aX(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(bb(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),bb(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=md(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class rF{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class jg{constructor(e,t){this.component=e,this.route=t}}function wX(n,e,t){const r=n._root;return _d(r,e?e._root:null,t,[r.value])}function Pu(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function O4(n){return null!==uf(n)}(n)?e.get(n):n:r}function _d(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Su(e);return n.children.forEach(s=>{(function TX(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function DX(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ms(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ms(n.url,e.url)||!fi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wb(n,e)||!fi(n.queryParams,e.queryParams);default:return!wb(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new rF(r)):(o.data=s.data,o._resolvedData=s._resolvedData),_d(n,e,o.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new jg(a.outlet.component,s))}else s&&yd(e,a,i),i.canActivateChecks.push(new rF(r)),_d(n,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>yd(a,t.getContext(s),i)),i}function yd(n,e,t){const r=Su(n),i=n.value;Object.entries(r).forEach(([o,s])=>{yd(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new jg(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function vd(n){return"function"==typeof n}function iF(n){return n instanceof Sg||"EmptyError"===n?.name}const $g=Symbol("INITIAL_VALUE");function Ru(){return zr(n=>ib(n.map(e=>e.pipe(Ps(1),function vZ(...n){const e=fg(n);return un((t,r)=>{(e?ob(n,t,e):ob(n,t)).subscribe(r)})}($g)))).pipe(Re(e=>{for(const t of e)if(!0!==t){if(t===$g)return $g;if(!1===t||t instanceof wu)return t}return!0}),Ro(e=>e!==$g),Ps(1)))}function oF(n){return function C4(...n){return DA(n)}(Tn(e=>{if(Tu(e))throw XV(0,e)}),Re(e=>!0===e))}class Ab{constructor(e){this.segmentGroup=e||null}}class Sb extends Error{constructor(e){super(),this.urlTree=e}}function Mu(n){return Pg(new Ab(n))}class GX{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return fe(r);if(i.numberOfChildren>1||!i.children[ve])return Pg(new $(4e3,!1));i=i.children[ve]}}applyRedirectCommands(e,t,r){const i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new Sb(i);return i}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new wu(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ye(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const Pb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function qX(n,e,t,r,i){const o=Rb(n,e,t);return o.matched?(r=function mX(n,e){return n.providers&&!n._injector&&(n._injector=yp(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function $X(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?fe(i.map(s=>{const a=Pu(s,n);return Mo(function xX(n){return n&&vd(n.canMatch)}(a)?a.canMatch(e,t):Si(n,()=>a(e,t)))})).pipe(Ru(),oF()):fe(!0)}(r,e,t).pipe(Re(s=>!0===s?o:{...Pb}))):fe(o)}function Rb(n,e,t){if("**"===e.path)return function WX(n){return{matched:!0,parameters:n.length>0?TV(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Pb}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||AZ)(t,n,e);if(!i)return{...Pb};const o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function sF(n,e,t,r){return t.length>0&&function YX(n,e,t){return t.some(r=>zg(n,e,r)&&gi(r)!==ve)}(n,t,r)?{segmentGroup:new Ye(e,QX(r,new Ye(t,n.children))),slicedSegments:[]}:0===t.length&&function JX(n,e,t){return t.some(r=>zg(n,e,r))}(n,t,r)?{segmentGroup:new Ye(n.segments,KX(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ye(n.segments,n.children),slicedSegments:t}}function KX(n,e,t,r){const i={};for(const o of t)if(zg(n,e,o)&&!r[gi(o)]){const s=new Ye([],{});i[gi(o)]=s}return{...r,...i}}function QX(n,e){const t={};t[ve]=e;for(const r of n)if(""===r.path&&gi(r)!==ve){const i=new Ye([],{});t[gi(r)]=i}return t}function zg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class eee{}class ree{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new GX(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){const e=sF(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Re(t=>{const r=new Ib([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ve,this.rootComponentType,null,{}),i=new Hr(r,t),o=new KV("",i),s=function WZ(n,e,t=null,r=null){return FV(VV(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ve).pipe(Eu(r=>{if(r instanceof Sb)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ab?this.noMatchError(r):r}))}inheritParamsAndData(e,t){const r=e.value,i=vb(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(Re(o=>o instanceof Hr?[o]:[]))}processChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return ht(i).pipe(ad(o=>{const s=r.children[o],a=function IX(n,e){const t=n.filter(r=>gi(r)===e);return t.push(...n.filter(r=>gi(r)!==e)),t}(t,o);return this.processSegmentGroup(e,a,s,o)}),function bZ(n,e){return un(function EZ(n,e,t,r,i){return(o,s)=>{let a=t,u=e,c=0;o.subscribe(qt(s,d=>{const h=c++;u=a?n(u,d,h):(a=!0,d),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}(n,e,arguments.length>=2,!0))}((o,s)=>(o.push(...s),o)),Rg(null),function wZ(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ro((i,o)=>n(i,o,r)):os,ab(1),t?Rg(e):wV(()=>new Sg))}(),Cn(o=>{if(null===o)return Mu(r);const s=aF(o);return function iee(n){n.sort((e,t)=>e.value.outlet===ve?-1:t.value.outlet===ve?1:e.value.outlet.localeCompare(t.value.outlet))}(s),fe(s)}))}processSegment(e,t,r,i,o,s){return ht(t).pipe(ad(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,o,s).pipe(Eu(u=>{if(u instanceof Ab)return fe(null);throw u}))),Rs(a=>!!a),Eu(a=>{if(iF(a))return function XX(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?fe(new eee):Mu(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,o,s,a){return function ZX(n,e,t,r){return!!(gi(n)===r||r!==ve&&zg(e,t,n))&&Rb(e,n,t).matched}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s):Mu(i):Mu(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){const{matched:a,consumedSegments:u,positionalParamSegments:c,remainingSegments:d}=Rb(t,i,o);if(!a)return Mu(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const h=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,h).pipe(Cn(p=>this.processSegment(e,r,t,p.concat(d),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){const s=qX(t,r,i,e);return"**"===r.path&&(t.children={}),s.pipe(zr(a=>a.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(zr(({routes:u})=>{const c=r._loadedInjector??e,{consumedSegments:d,remainingSegments:h,parameters:p}=a,m=new Ib(d,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function see(n){return n.data||{}}(r),gi(r),r.component??r._loadedComponent??null,r,function aee(n){return n.resolve||{}}(r)),{segmentGroup:_,slicedSegments:v}=sF(t,d,h,u);if(0===v.length&&_.hasChildren())return this.processChildren(c,u,_).pipe(Re(D=>null===D?null:new Hr(m,D)));if(0===u.length&&0===v.length)return fe(new Hr(m,[]));const b=gi(r)===o;return this.processSegment(c,u,_,v,b?ve:o,!0).pipe(Re(D=>new Hr(m,D instanceof Hr?[D]:[])))})):Mu(t)))}getChildConfig(e,t,r){return t.children?fe({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?fe({routes:t._loadedRoutes,injector:t._loadedInjector}):function jX(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?fe(!0):fe(i.map(s=>{const a=Pu(s,n);return Mo(function SX(n){return n&&vd(n.canLoad)}(a)?a.canLoad(e,t):Si(n,()=>a(e,t)))})).pipe(Ru(),oF())}(e,t,r).pipe(Cn(i=>i?this.configLoader.loadChildren(e,t).pipe(Tn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function HX(n){return Pg(eF(!1,pr.GuardRejected))}())):fe({routes:[],injector:e})}}function oee(n){const e=n.value.routeConfig;return e&&""===e.path}function aF(n){const e=[],t=new Set;for(const r of n){if(!oee(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=aF(r.children);e.push(new Hr(r.value,i))}return e.filter(r=>!t.has(r))}function uF(n){const e=n.children.map(t=>uF(t)).flat();return[n,...e]}function Mb(n){return zr(e=>{const t=n(e);return t?ht(t).pipe(Re(()=>e)):fe(e)})}let cF=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ve);return r}getResolvedTitleForRoute(t){return t.data[ud]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:()=>G(fee),providedIn:"root"})}}return n})(),fee=(()=>{class n extends cF{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(se(wY))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const xu=new ee("",{providedIn:"root",factory:()=>({})}),Nu=new ee("");let xb=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=G(CN)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return fe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Mo(t.loadComponent()).pipe(Re(lF),Tn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ub(()=>{this.componentLoaders.delete(t)})),i=new bV(r,()=>new vr).pipe(sb());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return fe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function pee(n,e,t,r){return Mo(n.loadChildren()).pipe(Re(lF),Cn(i=>i instanceof OM||Array.isArray(i)?fe(i):ht(e.compileModuleAsync(i))),Re(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(t).injector,s=o.get(Nu,[],{optional:!0,self:!0}).flat()),{routes:s.map(Db),injector:o}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(ub(()=>{this.childrenLoaders.delete(r)})),s=new bV(o,()=>new vr).pipe(sb());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function lF(n){return function gee(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Nb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:()=>G(mee),providedIn:"root"})}}return n})(),mee=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const dF=new ee(""),hF=new ee("");function _ee(n,e,t){const r=n.get(hF),i=n.get(wr);return n.get(Ne).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let o;const s=new Promise(c=>{o=c}),a=i.startViewTransition(()=>(o(),function yee(n){return new Promise(e=>{Zv(e,{injector:n})})}(n))),{onViewTransitionCreated:u}=r;return u&&Si(n,()=>u({transition:a,from:e,to:t})),s})}let Hg=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new vr,this.transitionAbortSubject=new vr,this.configLoader=G(xb),this.environmentInjector=G(Kn),this.urlSerializer=G(Cu),this.rootContexts=G(pd),this.location=G(Kl),this.inputBindingEnabled=null!==G(Bg,{optional:!0}),this.titleStrategy=G(cF),this.options=G(xu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=G(Nb),this.createViewTransition=G(dF,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>fe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new oX(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new iX(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new Hn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:fd,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ro(o=>0!==o.id),Re(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),zr(o=>{let s=!1,a=!1;return fe(o).pipe(zr(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",pr.SupersededByNewNavigation),hi;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!c&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const h="";return this.events.next(new Au(u.id,this.urlSerializer.serialize(u.rawUrl),h,Lg.IgnoredSameUrlNavigation)),u.resolve(null),hi}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return fe(u).pipe(zr(h=>{const p=this.transitions?.getValue();return this.events.next(new Fg(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),p!==this.transitions?.getValue()?hi:Promise.resolve(h)}),function uee(n,e,t,r,i,o){return Cn(s=>function tee(n,e,t,r,i,o,s="emptyOnly"){return new ree(n,e,t,r,i,s,o).recognize()}(n,e,t,r,s.extractedUrl,i,o).pipe(Re(({state:a,tree:u})=>({...s,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Tn(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const p=new zV(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:h,extractedUrl:p,source:m,restoredState:_,extras:v}=u,b=new Fg(h,this.urlSerializer.serialize(p),m,_);this.events.next(b);const D=WV(this.rootComponentType).snapshot;return this.currentTransition=o={...u,targetSnapshot:D,urlAfterRedirects:p,extras:{...v,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=p,fe(o)}{const h="";return this.events.next(new Au(u.id,this.urlSerializer.serialize(u.extractedUrl),h,Lg.IgnoredByUrlHandlingStrategy)),u.resolve(null),hi}}),Tn(u=>{const c=new eX(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}),Re(u=>(this.currentTransition=o={...u,guards:wX(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},o)),function NX(n,e){return Cn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?fe({...t,guardsResult:!0}):function OX(n,e,t,r){return ht(n).pipe(Cn(i=>function BX(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?fe(o.map(a=>{const u=md(e)??i,c=Pu(a,u);return Mo(function MX(n){return n&&vd(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):Si(u,()=>c(n,e,t,r))).pipe(Rs())})).pipe(Ru()):fe(!0)}(i.component,i.route,t,e,r)),Rs(i=>!0!==i,!0))}(s,r,i,n).pipe(Cn(a=>a&&function AX(n){return"boolean"==typeof n}(a)?function kX(n,e,t,r){return ht(e).pipe(ad(i=>ob(function FX(n,e){return null!==n&&e&&e(new sX(n)),fe(!0)}(i.route.parent,r),function VX(n,e){return null!==n&&e&&e(new uX(n)),fe(!0)}(i.route,r),function UX(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function CX(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>EV(()=>fe(s.guards.map(u=>{const c=md(s.node)??t,d=Pu(u,c);return Mo(function RX(n){return n&&vd(n.canActivateChild)}(d)?d.canActivateChild(r,n):Si(c,()=>d(r,n))).pipe(Rs())})).pipe(Ru())));return fe(o).pipe(Ru())}(n,i.path,t),function LX(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return fe(!0);const i=r.map(o=>EV(()=>{const s=md(e)??t,a=Pu(o,s);return Mo(function PX(n){return n&&vd(n.canActivate)}(a)?a.canActivate(e,n):Si(s,()=>a(e,n))).pipe(Rs())}));return fe(i).pipe(Ru())}(n,i.route,t))),Rs(i=>!0!==i,!0))}(r,o,n,e):fe(a)),Re(a=>({...t,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Tn(u=>{if(o.guardsResult=u.guardsResult,Tu(u.guardsResult))throw XV(0,u.guardsResult);const c=new tX(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(c)}),Ro(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",pr.GuardRejected),!1)),Mb(u=>{if(u.guards.canActivateChecks.length)return fe(u).pipe(Tn(c=>{const d=new nX(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),zr(c=>{let d=!1;return fe(c).pipe(function cee(n,e){return Cn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return fe(t);const o=new Set(i.map(u=>u.route)),s=new Set;for(const u of o)if(!s.has(u))for(const c of uF(u))s.add(c);let a=0;return ht(s).pipe(ad(u=>o.has(u)?function lee(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!YV(i)&&(o[ud]=i.title),function dee(n,e,t,r){const i=cb(n);if(0===i.length)return fe({});const o={};return ht(i).pipe(Cn(s=>function hee(n,e,t,r){const i=md(e)??r,o=Pu(n,i);return Mo(o.resolve?o.resolve(e,t):Si(i,()=>o(e,t)))}(n[s],e,t,r).pipe(Rs(),Tn(a=>{o[s]=a}))),ab(1),function CZ(n){return Re(()=>n)}(o),Eu(s=>iF(s)?hi:Pg(s)))}(o,n,e,r).pipe(Re(s=>(n._resolvedData=s,n.data=vb(n,n.parent,t).resolve,null)))}(u,r,n,e):(u.data=vb(u,u.parent,n).resolve,fe(void 0))),Tn(()=>a++),ab(1),Cn(u=>a===s.size?fe(t):hi))})}(this.paramsInheritanceStrategy,this.environmentInjector),Tn({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(c,"",pr.NoDataFromResolver)}}))}),Tn(c=>{const d=new rX(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}))}),Mb(u=>{const c=d=>{const h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Tn(p=>{d.component=p}),Re(()=>{})));for(const p of d.children)h.push(...c(p));return h};return ib(c(u.targetSnapshot.root)).pipe(Rg(null),Ps(1))}),Mb(()=>this.afterPreactivation()),zr(()=>{const{currentSnapshot:u,targetSnapshot:c}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,c.root);return d?ht(d).pipe(Re(()=>o)):fe(o)}),Re(u=>{const c=function hX(n,e,t){const r=gd(n,e._root,t?t._root:void 0);return new qV(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o={...u,targetRouterState:c},this.currentNavigation.targetRouterState=c,o}),Tn(()=>{this.events.next(new gb)}),((n,e,t,r)=>Re(i=>(new bX(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Ps(1),Tn({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ji(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),function TZ(n){return un((e,t)=>{li(n).subscribe(qt(t,()=>t.complete(),B_)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Tn(u=>{throw u}))),ub(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",pr.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Eu(u=>{if(a=!0,tF(u))this.events.next(new Du(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),function gX(n){return tF(n)&&Tu(n.url)}(u)?this.events.next(new mb(u.url)):o.resolve(!1);else{this.events.next(new Ug(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(u))}catch(c){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(c)}}return hi}))}))}cancelNavigationTransition(t,r,i){const o=new Du(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function vee(n){return n!==fd}let Iee=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:()=>G(bee),providedIn:"root"})}}return n})();class Eee{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let bee=(()=>{class n extends Eee{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=en(n)))(i||n)}})()}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fF=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:()=>G(wee),providedIn:"root"})}}return n})(),wee=(()=>{class n extends fF{constructor(){super(...arguments),this.location=G(Kl),this.urlSerializer=G(Cu),this.options=G(xu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=G(Nb),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new wu,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=WV(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Fg)this.stateMemento=this.createStateMemento();else if(t instanceof Au)this.rawUrlTree=r.initialUrl;else if(t instanceof zV){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else t instanceof gb?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof Du&&(t.code===pr.GuardRejected||t.code===pr.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ug?this.restoreHistory(r,!0):t instanceof ji&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&0===o&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=en(n)))(i||n)}})()}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Id=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Id||{});function pF(n,e){n.events.pipe(Ro(t=>t instanceof ji||t instanceof Du||t instanceof Ug||t instanceof Au),Re(t=>t instanceof ji||t instanceof Au?Id.COMPLETE:t instanceof Du&&(t.code===pr.Redirect||t.code===pr.SupersededByNewNavigation)?Id.REDIRECTING:Id.FAILED),Ro(t=>t!==Id.REDIRECTING),Ps(1)).subscribe(()=>{e()})}function Cee(n){throw n}const Tee={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Dee={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let nn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=G(pN),this.stateManager=G(fF),this.options=G(xu,{optional:!0})||{},this.pendingTasks=G(Ha),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=G(Hg),this.urlSerializer=G(Cu),this.location=G(Kl),this.urlHandlingStrategy=G(Nb),this._events=new vr,this.errorHandler=this.options.errorHandler||Cee,this.navigated=!1,this.routeReuseStrategy=G(Iee),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=G(Nu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!G(Bg,{optional:!0}),this.eventsSubscription=new On,this.isNgZoneEnabled=G(Ne)instanceof Ne&&Ne.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof Du&&r.code!==pr.Redirect&&r.code!==pr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ji)this.navigated=!0;else if(r instanceof mb){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||vee(i.source)};this.scheduleNavigation(s,fd,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function See(n){return!(n instanceof gb||n instanceof mb)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(o.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Db),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:s;let h,d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}null!==d&&(d=this.removeEmptyProps(d));try{h=VV(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),h=this.currentUrlTree.root}return FV(h,t,d,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Tu(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,fd,null,r)}navigate(t,r={skipLocationChange:!1}){return function Aee(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new $(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...Tee}:!1===r?{...Dee}:r,Tu(t))return AV(this.currentUrlTree,t,i);const o=this.parseUrl(t);return AV(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(null!=o&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,c;s?(a=s.resolve,u=s.reject,c=s.promise):c=new Promise((h,p)=>{a=h,u=p});const d=this.pendingTasks.add();return pF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Gr=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new vr,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(c=>{c instanceof ji&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,s){const a=this.urlTree;return!!(null===a||this.isAnchorElement&&(0!==t||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(a,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.href=null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;const r=null===this.href?null:function GP(n,e,t){return function jH(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?HP:zP}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(j(nn),j(xo),function Xc(n){return function vz(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(WA(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===e)return t[i+1];i+=2}}}return null}(qe(),n)}("tabindex"),j(ki),j(cr),j(ws))}}static{this.\u0275dir=he({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Fe("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&si("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[dt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",gu],skipLocationChange:[dt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",gu],replaceUrl:[dt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",gu],routerLink:"routerLink"},standalone:!0,features:[NM,Ir]})}}return n})(),gF=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Tt,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof ji&&this.update()})}ngAfterContentInit(){fe(this.links.changes,fe(null)).pipe(sd()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=ht(t).pipe(sd()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Pee(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{const o=i.urlTree;return!!o&&t.isActive(o,r)}}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static{this.\u0275fac=function(r){return new(r||n)(j(nn),j(cr),j(ki),j(Gl),j(Gr,8))}}static{this.\u0275dir=he({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(1&r&&function b1(n,e,t,r){fM(n,e,t,r)}(o,Gr,5),2&r){let s;(function w1(n){const e=U(),t=Ce(),r=Vy();Sf(r+1);const i=cI(t,r);if(n.dirty&&function z3(n){return!(4&~n[ae])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)n.reset([]);else{const o=gM(e,r);n.reset(o,nP),n.notifyOnChanges()}return!0}return!1})(s=C1())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Ir]})}}return n})();class mF{}let Ree=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ro(t=>t instanceof ji),ad(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=yp(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ht(i).pipe(sd())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):fe(null);const o=i.pipe(Cn(s=>null===s?fe(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?ht([o,this.loader.loadComponent(r)]).pipe(sd()):o})}static{this.\u0275fac=function(r){return new(r||n)(se(nn),se(CN),se(Kn),se(mF),se(xb))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Ob=new ee("");let _F=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=G(Kn),s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Fg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ji?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Au&&t.code===Lg.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof HV&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){var i=this;this.zone.runOutsideAngular(I(function*(){yield new Promise(o=>{setTimeout(()=>{o()}),Zv(()=>{o()},{injector:i.environmentInjector})}),i.zone.run(()=>{i.transitions.events.next(new HV(t,"popstate"===i.lastSource?i.store[i.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function gR(){throw new Error("invalid")}()}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac})}}return n})();function mi(n,e){return{\u0275kind:n,\u0275providers:e}}function vF(){const n=G(tn);return e=>{const t=n.get(Eo);if(e!==t.components[0])return;const r=n.get(nn),i=n.get(IF);1===n.get(kb)&&r.initialNavigation(),n.get(EF,null,we.Optional)?.setUpPreloading(),n.get(Ob,null,we.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const IF=new ee("",{factory:()=>new vr}),kb=new ee("",{providedIn:"root",factory:()=>1}),EF=new ee("");function Oee(n){return mi(0,[{provide:EF,useExisting:Ree},{provide:mF,useExisting:n}])}function Vee(n){return mi(9,[{provide:dF,useValue:_ee},{provide:hF,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const bF=new ee("ROUTER_FORROOT_GUARD"),Fee=[Kl,{provide:Cu,useClass:lb},nn,pd,{provide:xo,useFactory:function yF(n){return n.routerState.root},deps:[nn]},xb,[]];let wF=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Fee,[],{provide:Nu,multi:!0,useValue:t},{provide:bF,useFactory:jee,deps:[[nn,new ir,new ff]]},{provide:xu,useValue:r||{}},r?.useHash?{provide:ws,useClass:nK}:{provide:ws,useClass:pO},{provide:Ob,useFactory:()=>{const n=G(bQ),e=G(Ne),t=G(xu),r=G(Hg),i=G(Cu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new _F(i,r,n,e,t)}},r?.preloadingStrategy?Oee(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?$ee(r):[],r?.bindToComponentInputs?mi(8,[JV,{provide:Bg,useExisting:JV}]).\u0275providers:[],r?.enableViewTransitions?Vee().\u0275providers:[],[{provide:CF,useFactory:vF},{provide:XI,multi:!0,useExisting:CF}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Nu,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(se(bF,8))}}static{this.\u0275mod=Ai({type:n})}static{this.\u0275inj=Kr({})}}return n})();function jee(n){return"guarded"}function $ee(n){return["disabled"===n.initialNavigation?mi(3,[{provide:JI,multi:!0,useFactory:()=>{const e=G(nn);return()=>{e.setUpLocationChangeListener()}}},{provide:kb,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?mi(2,[{provide:kb,useValue:0},{provide:JI,multi:!0,deps:[tn],useFactory:e=>{const t=e.get(eK,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(nn),o=e.get(IF);pF(i,()=>{r(!0)}),e.get(Hg).afterPreactivation=()=>(r(!0),o.closed?fe(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const CF=new ee("");var Je=function(n){return n.QUEJA="queja",n.PROPUESTA="propuesta",n.SUGERENCIA="sugerencia",n.IDEA="idea",n}(Je||{}),jn=function(n){return n.PENDIENTE="pendiente",n.APROBADA="aprobada",n.RECHAZADA="rechazada",n.IMPLEMENTADA="implementada",n}(jn||{});const TF=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},DF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,c=u?n[i+2]:0;let p=(15&a)<<2|c>>6,m=63&c;u||(m=64,s||(p=64)),r.push(t[o>>2],t[(3&o)<<4|a>>4],t[p],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(TF(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const u=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const o=n[t++],s=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,null==o||null==a||null==c||null==h)throw new Wee;r.push(o<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==h&&r.push(c<<6&192|h))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Wee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Gg=function(n){return function(n){const e=TF(n);return DF.encodeByteArray(e,!0)}(n).replace(/\./g,"")},qg=function(n){try{return DF.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},Wg=()=>{try{return function Yee(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&qg(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},SF=n=>{var e,t;return null===(t=null===(e=Wg())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},PF=()=>{var n;return null===(n=Wg())||void 0===n?void 0:n.config},RF=n=>{var e;return null===(e=Wg())||void 0===e?void 0:e[`_${n}`]};class MF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function Ot(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class $i extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,$i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ed.prototype.create)}}class Ed{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function dte(n,e){return n.replace(hte,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new $i(i,`${this.serviceName}: ${s} (${i}).`,r)}}const hte=/\{\$([^}]+)}/g;function Ou(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],s=e[i];if(kF(o)&&kF(s)){if(!Ou(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function kF(n){return null!==n&&"object"==typeof n}function bd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wd(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Cd(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class gte{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function mte(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=Fb),void 0===i.error&&(i.error=Fb),void 0===i.complete&&(i.complete=Fb);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fb(){}function kt(n){return n&&n._delegate?n._delegate:n}class xs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ns="[DEFAULT]";class bte{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new MF;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Cte(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ns})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return I(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Ns){return this.instances.has(e)}getOptions(e=Ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Ns?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=Ns){return this.component?this.component.multipleInstances?e:Ns:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Tte{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bte(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ub=[];var De=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(De||{});const VF={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},Dte=De.INFO,Ate={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},Ste=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=Ate[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class Bb{constructor(e){this.name=e,this._logLevel=Dte,this._logHandler=Ste,this._userLogHandler=null,Ub.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?VF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const Pte=(n,e)=>e.some(t=>n instanceof t);let FF,LF;const UF=new WeakMap,jb=new WeakMap,BF=new WeakMap,$b=new WeakMap,zb=new WeakMap;let Hb={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return jb.get(n);if("objectStoreNames"===e)return n.objectStoreNames||BF.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return No(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Vte(n){return"function"==typeof n?function kte(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Mte(){return LF||(LF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Gb(this),e),No(UF.get(this))}:function(...e){return No(n.apply(Gb(this),e))}:function(e,...t){const r=n.call(Gb(this),e,...t);return BF.set(r,e.sort?e.sort():[e]),No(r)}}(n):(n instanceof IDBTransaction&&function Nte(n){if(jb.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});jb.set(n,e)}(n),Pte(n,function Rte(){return FF||(FF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Hb):n)}function No(n){if(n instanceof IDBRequest)return function xte(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(No(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&UF.set(t,n)}).catch(()=>{}),zb.set(e,n),e}(n);if($b.has(n))return $b.get(n);const e=Vte(n);return e!==n&&($b.set(n,e),zb.set(e,n)),e}const Gb=n=>zb.get(n),Lte=["get","getKey","getAll","getAllKeys","count"],Ute=["put","add","delete","clear"],qb=new Map;function jF(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(qb.get(e))return qb.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Ute.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Lte.includes(t))return;const o=function(){var s=I(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(yield Promise.all([d[t](...u),i&&c.done]))[0]});return function(u){return s.apply(this,arguments)}}();return qb.set(e,o),o}!function Ote(n){Hb=n(Hb)}(n=>({...n,get:(e,t,r)=>jF(e,t)||n.get(e,t,r),has:(e,t)=>!!jF(e,t)||n.has(e,t)}));class Bte{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function jte(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const Qg="@firebase/app",Wb="0.10.13",zi=new Bb("@firebase/app"),Yg="[DEFAULT]",gne={[Qg]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Os=new Map,Td=new Map,Dd=new Map;function $F(n,e){try{n.container.addComponent(e)}catch(t){zi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ku(n){const e=n.name;if(Dd.has(e))return zi.debug(`There were multiple attempts to register component ${e}.`),!1;Dd.set(e,n);for(const t of Os.values())$F(t,n);for(const t of Td.values())$F(t,n);return!0}function Jg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _i(n){return void 0!==n.settings}const Dr=new Ed("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class zF{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}}const Vu="10.14.1";function HF(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Yg,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Dr.create("bad-app-name",{appName:String(i)});if(t||(t=PF()),!t)throw Dr.create("no-options");const o=Os.get(i);if(o){if(Ou(t,o.options)&&Ou(r,o.config))return o;throw Dr.create("duplicate-app",{appName:i})}const s=new Tte(i);for(const u of Dd.values())s.addComponent(u);const a=new zF(t,r,s);return Os.set(i,a),a}function Kb(n=Yg){const e=Os.get(n);if(!e&&n===Yg&&PF())return HF();if(!e)throw Dr.create("no-app",{appName:n});return e}function GF(){return Array.from(Os.values())}function Zn(n,e,t){var r;let i=null!==(r=gne[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void zi.warn(a.join(" "))}ku(new xs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Ine="firebase-heartbeat-database",Ene=1,Ad="firebase-heartbeat-store";let Yb=null;function qF(){return Yb||(Yb=function Fte(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(n,e),a=No(s);return r&&s.addEventListener("upgradeneeded",u=>{r(No(s.result),u.oldVersion,u.newVersion,No(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}(Ine,Ene,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(Ad)}catch(t){console.warn(t)}}}).catch(n=>{throw Dr.create("idb-open",{originalErrorMessage:n.message})})),Yb}function Jb(){return(Jb=I(function*(n){try{const t=(yield qF()).transaction(Ad),r=yield t.objectStore(Ad).get(KF(n));return yield t.done,r}catch(e){if(e instanceof $i)zi.warn(e.message);else{const t=Dr.create("idb-get",{originalErrorMessage:e?.message});zi.warn(t.message)}}})).apply(this,arguments)}function WF(n,e){return Zb.apply(this,arguments)}function Zb(){return(Zb=I(function*(n,e){try{const r=(yield qF()).transaction(Ad,"readwrite");yield r.objectStore(Ad).put(e,KF(n)),yield r.done}catch(t){if(t instanceof $i)zi.warn(t.message);else{const r=Dr.create("idb-set",{originalErrorMessage:t?.message});zi.warn(r.message)}}})).apply(this,arguments)}function KF(n){return`${n.name}!${n.options.appId}`}class Tne{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ane(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return I(function*(){var t,r;try{const o=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=QF();return null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===s||e._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(e._heartbeatsCache.heartbeats.push({date:s,agent:o}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=2592e6}),e._storage.overwrite(e._heartbeatsCache))}catch(i){zi.warn(i)}})()}getHeartbeatsHeader(){var e=this;return I(function*(){var t;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=QF(),{heartbeatsToSend:i,unsentEntries:o}=function Dne(n,e=1024){const t=[];let r=n.slice();for(const i of n){const o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),YF(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),YF(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Gg(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,o.length>0?(e._heartbeatsCache.heartbeats=o,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s}catch(r){return zi.warn(r),""}})()}}function QF(){return(new Date).toISOString().substring(0,10)}class Ane{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return I(function*(){return!!function NF(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function cte(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return I(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function bne(n){return Jb.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return I(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return WF(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return I(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return WF(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function YF(n){return Gg(JSON.stringify({version:2,heartbeats:n})).length}!function Sne(n){ku(new xs("platform-logger",e=>new Bte(e),"PRIVATE")),ku(new xs("heartbeat",e=>new Tne(e),"PRIVATE")),Zn(Qg,Wb,n),Zn(Qg,Wb,"esm2017"),Zn("fire-js","")}(""),Zn("firebase","10.14.1","app");class Mne extends On{constructor(e,t){super()}schedule(e,t=0){return this}}const Zg={setInterval(n,e,...t){const{delegate:r}=Zg;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Zg;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class JF extends Mne{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Zg.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Zg.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ef(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const ZF={now:()=>(ZF.delegate||Date).now(),delegate:void 0};class Sd{constructor(e,t=Sd.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Sd.now=ZF.now;class XF extends Sd{constructor(e,t=Sd.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const One=new class Nne extends XF{}(class xne extends JF{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),kne=new XF(JF),Xg=new fu("ANGULARFIRE2_VERSION");function eL(n,e,t){if(e){if(1===e.length)return e[0];const o=e.filter(s=>s.app===t);if(1===o.length)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const Xb=(n,e)=>{const t=e?[e]:GF(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r};class tL{constructor(){return Xb(Vne)}}const Vne="app-check";function Fu(){}class nL{zone;delegate;constructor(e,t=One){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},t,r)}}class Fne{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fu,{},Fu,Fu)),t.pipe(Tn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ew=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new nL(Zone.current)),this.insideAngular=t.run(()=>new nL(Zone.current,kne)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(se(Ne))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Lu(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function ks(n){return Lu().ngZone.run(()=>n())}function Une(n){return function Bne(n){return function(t){return(t=t.lift(new Fne(n.ngZone))).pipe(hg(n.outsideAngular),dg(n.insideAngular))}}(Lu())(n)}const jne=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),ks(()=>n.apply(void 0,r))},zt=(n,e)=>function(){let t;const r=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof r[o]&&(e&&(t||=ks(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fu,{},Fu,Fu))),r[o]=jne(r[o],t));const i=function Lne(n){return Lu().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof Ct){const o=Lu();return i.pipe(hg(o.outsideAngular),dg(o.insideAngular))}return ks(()=>i)}return i instanceof Ct?i.pipe(Une):i instanceof Promise?ks(()=>new Promise((o,s)=>i.then(a=>ks(()=>o(a)),a=>ks(()=>s(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:ks(()=>i)};class Pd{constructor(e){return e}}class tw{constructor(){return GF()}}const nw=new ee("angularfire2._apps"),zne={provide:Pd,useFactory:function $ne(n){return n&&1===n.length?n[0]:new Pd(Kb())},deps:[[new ir,nw]]},Hne={provide:tw,deps:[[new ir,nw]]};function Gne(n){return(e,t)=>{const r=t.get(fo);Zn("angularfire",Xg.full,"core"),Zn("angularfire",Xg.full,"app"),Zn("angular",h8.full,r.toString());const i=e.runOutsideAngular(()=>n(t));return new Pd(i)}}function qne(n,...e){return us([zne,Hne,{provide:nw,useFactory:Gne(n),multi:!0,deps:[Ne,tn,ew,...e]}])}const Wne=zt(HF,!0);const Kne=function rL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},iL=new Ed("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),em=new Bb("@firebase/auth");function tm(n,...e){em.logLevel<=De.ERROR&&em.error(`Auth (${Vu}): ${n}`,...e)}function Xn(n,...e){throw iw(n,...e)}function Ar(n,...e){return iw(n,...e)}function rw(n,e,t){const r=Object.assign(Object.assign({},Kne()),{[e]:t});return new Ed("auth","Firebase",r).create(e,{appName:n.name})}function rn(n){return rw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iw(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return iL.create(n,...e)}function K(n,e,...t){if(!n)throw iw(e,...t)}function yi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw tm(e),new Error(e)}function Oo(n,e){n||yi(e)}function Rd(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function oL(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}function Yne(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function ow(){return"http:"===oL()||"https:"===oL()}()||function ste(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}()||"connection"in navigator))||navigator.onLine}class Md{constructor(e,t){this.shortDelay=e,this.longDelay=t,Oo(t>e,"Short delay should be less than long delay!"),this.isMobile=function nte(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}()||function ate(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return Yne()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function sw(n,e){Oo(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class sL{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zne={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Xne=new Md(3e4,6e4);function ft(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function pt(n,e,t,r){return aw.apply(this,arguments)}function aw(){return(aw=I(function*(n,e,t,r,i={}){return aL(n,i,I(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=bd(Object.assign({key:n.config.apiKey},s)).slice(1),u=yield n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:u},o);return function ote(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(c.referrerPolicy="no-referrer"),sL.fetch()(uL(n,n.config.apiHost,t,a),c)}))})).apply(this,arguments)}function aL(n,e,t){return uw.apply(this,arguments)}function uw(){return(uw=I(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Zne),e);try{const i=new tre(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw xd(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[u,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw xd(n,"credential-already-in-use",s);if("EMAIL_EXISTS"===u)throw xd(n,"email-already-in-use",s);if("USER_DISABLED"===u)throw xd(n,"user-disabled",s);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw rw(n,d,c);Xn(n,d)}}catch(i){if(i instanceof $i)throw i;Xn(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function Hi(n,e,t,r){return cw.apply(this,arguments)}function cw(){return(cw=I(function*(n,e,t,r,i={}){const o=yield pt(n,e,t,r,i);return"mfaPendingCredential"in o&&Xn(n,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function uL(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?sw(n.config,i):`${n.config.apiScheme}://${i}`}function ere(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tre{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ar(this.auth,"network-request-failed")),Xne.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ar(n,e,r);return i.customData._tokenResponse=t,i}function lL(n){return void 0!==n&&void 0!==n.enterprise}class dL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ere(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}function hL(n,e){return dw.apply(this,arguments)}function dw(){return(dw=I(function*(n,e){return pt(n,"GET","/v2/recaptchaConfig",ft(n,e))})).apply(this,arguments)}function hw(){return(hw=I(function*(n,e){return pt(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function fL(n,e){return pw.apply(this,arguments)}function pw(){return(pw=I(function*(n,e){return pt(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Nd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function gw(){return(gw=I(function*(n,e=!1){const t=kt(n),r=yield t.getIdToken(e),i=nm(r);K(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Nd(mw(i.auth_time)),issuedAtTime:Nd(mw(i.iat)),expirationTime:Nd(mw(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function mw(n){return 1e3*Number(n)}function nm(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return tm("JWT malformed, contained fewer than 3 sections"),null;try{const i=qg(t);return i?JSON.parse(i):(tm("Failed to decode base64 JWT payload"),null)}catch(i){return tm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function pL(n){const e=nm(n);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Gi(n,e){return _w.apply(this,arguments)}function _w(){return(_w=I(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof $i&&function sre({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class are{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(I(function*(){yield t.iteration()}),r)}iteration(){var e=this;return I(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class yw{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nd(this.lastLoginAt),this.creationTime=Nd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Od(n){return vw.apply(this,arguments)}function vw(){return(vw=I(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield Gi(n,fL(t,{idToken:r}));K(i?.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?gL(o.providerUserInfo):[],a=function cre(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,s),d=!!n.isAnonymous&&!(n.email&&o.passwordHash||a?.length),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new yw(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(n,h)})).apply(this,arguments)}function Iw(){return(Iw=I(function*(n){const e=kt(n);yield Od(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function gL(n){return n.map(e=>{var{providerId:t}=e,r=lg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Ew(){return(Ew=I(function*(n,e){const t=yield aL(n,{},I(function*(){const r=bd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=uL(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",sL.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}function bw(){return(bw=I(function*(n,e){return pt(n,"POST","/v2/accounts:revokeToken",ft(n,e))})).apply(this,arguments)}class Bu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){K(0!==e.length,"internal-error");const t=pL(e);this.updateTokensAndExpiration(e,null,t)}getToken(e){var t=this;return I(function*(r,i=!1){return i||!t.accessToken||t.isExpired?(K(t.refreshToken,r,"user-token-expired"),t.refreshToken?(yield t.refresh(r,t.refreshToken),t.accessToken):null):t.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return I(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function lre(n,e){return Ew.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new Bu;return r&&(K("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&(K("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&(K("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bu,this.toJSON())}_performRefresh(){return yi("not implemented")}}function ko(n,e){K("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class qi{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=lg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new are(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new yw(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var t=this;return I(function*(){const r=yield Gi(t,t.stsTokenManager.getToken(t.auth,e));return K(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function ore(n){return gw.apply(this,arguments)}(this,e)}reload(){return function ure(n){return Iw.apply(this,arguments)}(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e){var t=this;return I(function*(r,i=!1){let o=!1;r.idToken&&r.idToken!==t.stsTokenManager.accessToken&&(t.stsTokenManager.updateFromServerResponse(r),o=!0),i&&(yield Od(t)),yield t.auth._persistUserIfCurrent(t),o&&t.auth._notifyListenersIfCurrent(t)}).apply(this,arguments)}delete(){var e=this;return I(function*(){if(_i(e.auth.app))return Promise.reject(rn(e.auth));const t=yield e.getIdToken();return yield Gi(e,function rre(n,e){return hw.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,c,d;const h=null!==(r=t.displayName)&&void 0!==r?r:void 0,p=null!==(i=t.email)&&void 0!==i?i:void 0,m=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,_=null!==(s=t.photoURL)&&void 0!==s?s:void 0,v=null!==(a=t.tenantId)&&void 0!==a?a:void 0,b=null!==(u=t._redirectEventId)&&void 0!==u?u:void 0,D=null!==(c=t.createdAt)&&void 0!==c?c:void 0,S=null!==(d=t.lastLoginAt)&&void 0!==d?d:void 0,{uid:B,emailVerified:q,isAnonymous:Z,providerData:ne,stsTokenManager:T}=t;K(B&&T,e,"internal-error");const E=Bu.fromJSON(this.name,T);K("string"==typeof B,e,"internal-error"),ko(h,e.name),ko(p,e.name),K("boolean"==typeof q,e,"internal-error"),K("boolean"==typeof Z,e,"internal-error"),ko(m,e.name),ko(_,e.name),ko(v,e.name),ko(b,e.name),ko(D,e.name),ko(S,e.name);const w=new qi({uid:B,auth:e,email:p,emailVerified:q,displayName:h,isAnonymous:Z,photoURL:_,phoneNumber:m,tenantId:v,stsTokenManager:E,createdAt:D,lastLoginAt:S});return ne&&Array.isArray(ne)&&(w.providerData=ne.map(A=>Object.assign({},A))),b&&(w._redirectEventId=b),w}static _fromIdTokenResponse(e,t){return I(function*(r,i,o=!1){const s=new Bu;s.updateFromServerResponse(i);const a=new qi({uid:i.localId,auth:r,stsTokenManager:s,isAnonymous:o});return yield Od(a),a}).apply(this,arguments)}static _fromGetAccountInfoResponse(e,t,r){return I(function*(){const i=t.users[0];K(void 0!==i.localId,"internal-error");const o=void 0!==i.providerUserInfo?gL(i.providerUserInfo):[],s=!(i.email&&i.passwordHash||o?.length),a=new Bu;a.updateFromIdToken(r);const u=new qi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new yw(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||o?.length)};return Object.assign(u,c),u})()}}const mL=new Map;function Wi(n){Oo(n instanceof Function,"Expected a class definition");let e=mL.get(n);return e?(Oo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,mL.set(n,e),e)}const _L=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(function*(){return!0})()}_set(t,r){var i=this;return I(function*(){i.storage[t]=r})()}_get(t){var r=this;return I(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return I(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function rm(n,e,t){return`firebase:${n}:${e}:${t}`}class ju{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=rm(this.userKey,i.apiKey,o),this.fullPersistenceKey=rm("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return I(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?qi._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return I(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t){return I(function*(r,i,o="authUser"){if(!i.length)return new ju(Wi(_L),r,o);const s=(yield Promise.all(i.map(function(){var h=I(function*(p){if(yield p._isAvailable())return p});return function(p){return h.apply(this,arguments)}}()))).filter(h=>h);let a=s[0]||Wi(_L);const u=rm(o,r.config.apiKey,r.name);let c=null;for(const h of i)try{const p=yield h._get(u);if(p){const m=qi._fromJSON(r,p);h!==a&&(c=m),a=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return a._shouldAllowMigration&&d.length?(a=d[0],c&&(yield a._set(u,c.toJSON())),yield Promise.all(i.map(function(){var h=I(function*(p){if(p!==a)try{yield p._remove(u)}catch{}});return function(p){return h.apply(this,arguments)}}())),new ju(a,r,o)):new ju(a,r,o)}).apply(this,arguments)}}function yL(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CL(e))return"Blackberry";if(TL(e))return"Webos";if(IL(e))return"Safari";if((e.includes("chrome/")||EL(e))&&!e.includes("edge/"))return"Chrome";if(wL(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function vL(n=Ot()){return/firefox\//i.test(n)}function IL(n=Ot()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function EL(n=Ot()){return/crios\//i.test(n)}function bL(n=Ot()){return/iemobile/i.test(n)}function wL(n=Ot()){return/android/i.test(n)}function CL(n=Ot()){return/blackberry/i.test(n)}function TL(n=Ot()){return/webos/i.test(n)}function ww(n=Ot()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function DL(n=Ot()){return ww(n)||wL(n)||TL(n)||CL(n)||/windows phone/i.test(n)||bL(n)}function AL(n,e=[]){let t;switch(n){case"Browser":t=yL(Ot());break;case"Worker":t=`${yL(Ot())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vu}/${r}`}class pre{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return I(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function Cw(){return(Cw=I(function*(n,e={}){return pt(n,"GET","/v2/passwordPolicy",ft(n,e))})).apply(this,arguments)}class _re{constructor(e){var t,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(t=u.meetsMinPasswordLength)||void 0===t||t),u.isValid&&(u.isValid=null===(r=u.meetsMaxPasswordLength)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsLowercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(o=u.containsUppercaseLetter)||void 0===o||o),u.isValid&&(u.isValid=null===(s=u.containsNumericCharacter)||void 0===s||s),u.isValid&&(u.isValid=null===(a=u.containsNonAlphanumericCharacter)||void 0===a||a),u}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class yre{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SL(this),this.idTokenSubscription=new SL(this),this.beforeStateQueue=new pre(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Wi(t)),this._initializationPromise=this.queue(I(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield ju.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return I(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUserFromIdToken(e){var t=this;return I(function*(){try{const r=yield fL(t,{idToken:e}),i=yield qi._fromGetAccountInfoResponse(t,r,e);yield t.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield t.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var t=this;return I(function*(){var r;if(_i(t.app)){const a=t.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>t.initializeCurrentUserFromIdToken(a).then(u,u))}):t.directlySetCurrentUser(null)}const i=yield t.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,u=o?._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===u)&&c?.user&&(o=c.user,s=!0)}if(!o)return t.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield t.beforeStateQueue.runMiddleware(o)}catch(a){o=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return o?t.reloadAndSetCurrentUserOrClear(o):t.directlySetCurrentUser(null)}return K(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===o._redirectEventId?t.directlySetCurrentUser(o):t.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var t=this;return I(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return I(function*(){try{yield Od(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Jne(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return I(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return I(function*(){if(_i(t.app))return Promise.reject(rn(t));const r=e?kt(e):null;return r&&K(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e){var t=this;return I(function*(r,i=!1){if(!t._deleted)return r&&K(t.tenantId===r.tenantId,t,"tenant-id-mismatch"),i||(yield t.beforeStateQueue.runMiddleware(r)),t.queue(I(function*(){yield t.directlySetCurrentUser(r),t.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var e=this;return I(function*(){return _i(e.app)?Promise.reject(rn(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var t=this;return _i(this.app)?Promise.reject(rn(this)):this.queue(I(function*(){yield t.assertedPersistence.setPersistence(Wi(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return I(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return I(function*(){const t=yield function gre(n){return Cw.apply(this,arguments)}(e),r=new _re(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ed("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){var t=this;return I(function*(){if(t.currentUser){const r=yield t.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=t.tenantId&&(i.tenantId=t.tenantId),yield function dre(n,e){return bw.apply(this,arguments)}(t,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return I(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return I(function*(){if(!t.redirectPersistenceManager){const r=e&&Wi(e)||t._popupRedirectResolver;K(r,t,"argument-error"),t.redirectPersistenceManager=yield ju.create(t,[Wi(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return I(function*(){var r,i;return t._isInitialized&&(yield t.queue(I(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return I(function*(){if(e===t.currentUser)return t.queue(I(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),"function"==typeof t){const u=e.addObserver(t,r,i);return()=>{s=!0,u()}}{const u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){var t=this;return I(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return I(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return I(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function Qne(n,...e){em.logLevel<=De.WARN&&em.warn(`Auth (${Vu}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Vt(n){return kt(n)}class SL{constructor(e){this.auth=e,this.observer=null,this.addObserver=function pte(n,e){const t=new gte(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let kd={loadJS:()=>I(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tw(n){return kd.loadJS(n)}function PL(n){return`__${n}${Math.floor(1e6*Math.random())}`}class RL{constructor(e){this.type="recaptcha-enterprise",this.auth=Vt(e)}verify(){var e=this;return I(function*(t="verify",r=!1){function o(){return o=I(function*(a){if(!r){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var u=I(function*(c,d){hL(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(void 0!==h.recaptchaKey){const p=new dL(h);return null==a.tenantId?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,c(p.siteKey)}d(new Error("recaptcha Enterprise site key undefined"))}).catch(h=>{d(h)})});return function(c,d){return u.apply(this,arguments)}}())}),o.apply(this,arguments)}function s(a,u,c){const d=window.grecaptcha;lL(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:t}).then(h=>{u(h)}).catch(()=>{u("NO_RECAPTCHA")})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,u)=>{(function i(a){return o.apply(this,arguments)})(e.auth).then(c=>{if(!r&&lL(window.grecaptcha))s(c,a,u);else{if(typeof window>"u")return void u(new Error("RecaptchaVerifier is only supported in browser"));let d=function Ere(){return kd.recaptchaEnterpriseScript}();0!==d.length&&(d+=c),Tw(d).then(()=>{s(c,a,u)}).catch(h=>{u(h)})}}).catch(c=>{u(c)})})}).apply(this,arguments)}}function ML(n,e,t){return Dw.apply(this,arguments)}function Dw(){return(Dw=I(function*(n,e,t,r=!1){const i=new RL(n);let o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}const s=Object.assign({},e);return Object.assign(s,r?{captchaResp:o}:{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})).apply(this,arguments)}function Vd(n,e,t,r){return Aw.apply(this,arguments)}function Aw(){return Aw=I(function*(n,e,t,r){var i;if(null!==(i=n._getRecaptchaConfig())&&void 0!==i&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=yield ML(n,e,t,"getOobCode"===t);return r(n,o)}return r(n,e).catch(function(){var o=I(function*(s){if("auth/missing-recaptcha-token"===s.code){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=yield ML(n,e,t,"getOobCode"===t);return r(n,a)}return Promise.reject(s)});return function(s){return o.apply(this,arguments)}}())}),Aw.apply(this,arguments)}function xL(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function NL(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class Fd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yi("not implemented")}_getIdTokenResponse(e){return yi("not implemented")}_linkToIdToken(e,t){return yi("not implemented")}_getReauthenticationResolver(e){return yi("not implemented")}}function xre(n,e){return Mw.apply(this,arguments)}function Mw(){return(Mw=I(function*(n,e){return pt(n,"POST","/v1/accounts:signUp",e)})).apply(this,arguments)}function Ore(n,e){return Nw.apply(this,arguments)}function Nw(){return(Nw=I(function*(n,e){return Hi(n,"POST","/v1/accounts:signInWithPassword",ft(n,e))})).apply(this,arguments)}function Uw(){return(Uw=I(function*(n,e){return Hi(n,"POST","/v1/accounts:signInWithEmailLink",ft(n,e))})).apply(this,arguments)}function Bw(){return(Bw=I(function*(n,e){return Hi(n,"POST","/v1/accounts:signInWithEmailLink",ft(n,e))})).apply(this,arguments)}class Ld extends Fd{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Ld(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Ld(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return I(function*(){switch(t.signInMethod){case"password":return Vd(e,{returnSecureToken:!0,email:t._email,password:t._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ore);case"emailLink":return function Ure(n,e){return Uw.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:Xn(e,"internal-error")}})()}_linkToIdToken(e,t){var r=this;return I(function*(){switch(r.signInMethod){case"password":return Vd(e,{idToken:t,returnSecureToken:!0,email:r._email,password:r._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xre);case"emailLink":return function Bre(n,e){return Bw.apply(this,arguments)}(e,{idToken:t,email:r._email,oobCode:r._password});default:Xn(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Ki(n,e){return jw.apply(this,arguments)}function jw(){return(jw=I(function*(n,e){return Hi(n,"POST","/v1/accounts:signInWithIdp",ft(n,e))})).apply(this,arguments)}class jd{constructor(e){var t,r,i,o,s,a;const u=wd(Cd(e)),c=null!==(t=u.apiKey)&&void 0!==t?t:null,d=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function Wre(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);K(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=null!==(o=u.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(s=u.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=u.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function Kre(n){const e=wd(Cd(n)).link,t=e?wd(Cd(e)).deep_link_id:null,r=wd(Cd(n)).deep_link_id;return(r?wd(Cd(r)).link:null)||r||t||e||n}(e);try{return new jd(t)}catch{return null}}}let kL=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Ld._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const i=jd.parseLink(r);return K(i,"argument-error"),Ld._fromEmailAndCode(t,i.code,i.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class Qi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Qre extends Qi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function VL(n,e){return Ww.apply(this,arguments)}function Ww(){return(Ww=I(function*(n,e){return Hi(n,"POST","/v1/accounts:signUp",ft(n,e))})).apply(this,arguments)}class Sr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r){return I(function*(i,o,s,a=!1){const u=yield qi._fromIdTokenResponse(i,s,a),c=FL(s);return new Sr({user:u,providerId:c,_tokenResponse:s,operationType:o})}).apply(this,arguments)}static _forOperation(e,t,r){return I(function*(){yield e._updateTokensIfNecessary(r,!0);const i=FL(r);return new Sr({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function FL(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class sm extends $i{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,sm.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new sm(e,t,r,i)}}function LL(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?sm._fromErrorAndOperation(n,o,e,r):o})}function Jw(){return(Jw=I(function*(n,e,t=!1){const r=yield Gi(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Sr._forOperation(n,"link",r)})).apply(this,arguments)}function Xw(){return(Xw=I(function*(n,e,t=!1){const{auth:r}=n;if(_i(r.app))return Promise.reject(rn(r));const i="reauthenticate";try{const o=yield Gi(n,LL(r,i,e,n),t);K(o.idToken,r,"internal-error");const s=nm(o.idToken);K(s,r,"internal-error");const{sub:a}=s;return K(n.uid===a,r,"user-mismatch"),Sr._forOperation(n,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&Xn(r,"user-mismatch"),o}})).apply(this,arguments)}function jL(n,e){return eC.apply(this,arguments)}function eC(){return(eC=I(function*(n,e,t=!1){if(_i(n.app))return Promise.reject(rn(n));const r="signIn",i=yield LL(n,r,e),o=yield Sr._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})).apply(this,arguments)}function nC(){return(nC=I(function*(n,e){return jL(Vt(n),e)})).apply(this,arguments)}function cC(n){return lC.apply(this,arguments)}function lC(){return(lC=I(function*(n){const e=Vt(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})).apply(this,arguments)}function nie(n,e,t){return mC.apply(this,arguments)}function mC(){return(mC=I(function*(n,e,t){if(_i(n.app))return Promise.reject(rn(n));const r=Vt(n),s=yield Vd(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VL).catch(u=>{throw"auth/password-does-not-meet-requirements"===u.code&&cC(n),u}),a=yield Sr._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})).apply(this,arguments)}function rie(n,e,t){return _i(n.app)?Promise.reject(rn(n)):function tC(n,e){return nC.apply(this,arguments)}(kt(n),kL.credential(e,t)).catch(function(){var r=I(function*(i){throw"auth/password-does-not-meet-requirements"===i.code&&cC(n),i});return function(i){return r.apply(this,arguments)}}())}function HL(n,e,t,r){return kt(n).onIdTokenChanged(e,t,r)}function hie(n){return kt(n).signOut()}const cm="__sak";class GL{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cm,"1"),this.storage.removeItem(cm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const vie=(()=>{class n extends GL{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DL(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});const i=t.key;r?this.detachListener():this.stopPolling();const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function fre(){return function ute(){const n=Ot();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===t.newValue||t.newValue===t.oldValue?o():setTimeout(o,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,o=this;return I(function*(){yield i().call(o,t,r),o.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return I(function*(){const o=yield r().call(i,t);return i.localCache[t]=JSON.stringify(o),o})()}_remove(t){var r=()=>super._remove,i=this;return I(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),qL=(()=>{class n extends GL{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let Eie=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return I(function*(){const i=t,{eventId:o,eventType:s,data:a}=i.data,u=r.handlersMap[s];if(!u?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const c=Array.from(u).map(function(){var h=I(function*(p){return p(i.origin,a)});return function(p){return h.apply(this,arguments)}}()),d=yield function Iie(n){return Promise.all(n.map(function(){var e=I(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(c);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:d})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function MC(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class bie{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t){var r=this;return I(function*(i,o,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let u,c;return new Promise((d,h)=>{const p=MC("",20);a.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},s);c={messageChannel:a,onMessage(_){const v=_;if(v.data.eventId===p)switch(v.data.status){case"ack":clearTimeout(m),u=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),d(v.data.response);break;default:clearTimeout(m),clearTimeout(u),h(new Error("invalid_response"))}}},r.handlers.add(c),a.port1.addEventListener("message",c.onMessage),r.target.postMessage({eventType:i,eventId:p,data:o},[a.port2])}).finally(()=>{c&&r.removeMessageHandler(c)})}).apply(this,arguments)}}function Ht(){return window}function xC(){return typeof Ht().WorkerGlobalScope<"u"&&"function"==typeof Ht().importScripts}function NC(){return(NC=I(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const WL="firebaseLocalStorageDb",lm="firebaseLocalStorage",KL="fbase_key";class Hd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function dm(n,e){return n.transaction([lm],e?"readwrite":"readonly").objectStore(lm)}function OC(){const n=indexedDB.open(WL,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(lm,{keyPath:KL})}catch(i){t(i)}}),n.addEventListener("success",I(function*(){const r=n.result;r.objectStoreNames.contains(lm)?e(r):(r.close(),yield function Sie(){const n=indexedDB.deleteDatabase(WL);return new Hd(n).toPromise()}(),e(yield OC()))}))})}function QL(n,e,t){return kC.apply(this,arguments)}function kC(){return(kC=I(function*(n,e,t){const r=dm(n,!0).put({[KL]:e,value:t});return new Hd(r).toPromise()})).apply(this,arguments)}function VC(){return(VC=I(function*(n,e){const t=dm(n,!1).get(e),r=yield new Hd(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function YL(n,e){const t=dm(n,!0).delete(e);return new Hd(t).toPromise()}const xie=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return I(function*(){return t.db||(t.db=yield OC()),t.db})()}_withRetries(t){var r=this;return I(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield t(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return I(function*(){return xC()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return I(function*(){t.receiver=Eie._getInstance(function Die(){return xC()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=I(function*(i,o){return{keyProcessed:(yield t._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=I(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return I(function*(){var r,i;if(t.activeServiceWorker=yield function Cie(){return NC.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new bie(t.activeServiceWorker);const o=yield t.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return I(function*(){if(r.sender&&r.activeServiceWorker&&function Tie(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return I(function*(){try{if(!indexedDB)return!1;const t=yield OC();return yield QL(t,cm,"1"),yield YL(t,cm),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return I(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return I(function*(){return i._withPendingWrite(I(function*(){return yield i._withRetries(o=>QL(o,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return I(function*(){const i=yield r._withRetries(o=>function Pie(n,e){return VC.apply(this,arguments)}(o,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return I(function*(){return r._withPendingWrite(I(function*(){return yield r._withRetries(i=>YL(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return I(function*(){const r=yield t._withRetries(s=>{const a=dm(s,!1).getAll();return new Hd(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],o=new Set;if(0!==r.length)for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(t.localCache[s])!==JSON.stringify(a)&&(t.notifyListeners(s,a),i.push(s));for(const s of Object.keys(t.localCache))t.localCache[s]&&!o.has(s)&&(t.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(I(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();PL("rcb"),new Md(3e4,6e4);class GC extends Fd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ki(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ki(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ki(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Wie(n){return jL(n.auth,new GC(n),n.bypassAuthState)}function Kie(n){const{auth:e,user:t}=n;return K(t,e,"internal-error"),function BL(n,e){return Xw.apply(this,arguments)}(t,new GC(n),n.bypassAuthState)}function Qie(n){return qC.apply(this,arguments)}function qC(){return(qC=I(function*(n){const{auth:e,user:t}=n;return K(t,e,"internal-error"),function Yw(n,e){return Jw.apply(this,arguments)}(t,new GC(n),n.bypassAuthState)})).apply(this,arguments)}class Yie{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=I(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return I(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:u}=e;if(a)return void t.reject(a);const c={auth:t.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(u)(c))}catch(d){t.reject(d)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Wie;case"linkViaPopup":case"linkViaRedirect":return Qie;case"reauthViaPopup":case"reauthViaRedirect":return Kie;default:Xn(this.auth,"internal-error")}}resolve(e){Oo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new Md(2e3,1e4);const Jie="pendingRedirect",Gd=new Map;class Zie extends Yie{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return I(function*(){let r=Gd.get(t.auth._key());if(!r){try{const o=(yield function Xie(n,e){return JC.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}Gd.set(t.auth._key(),r)}return t.bypassAuthState||Gd.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return I(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return I(function*(){})()}cleanUp(){}}function JC(){return(JC=I(function*(n,e){const t=function XL(n){return rm(Jie,n.config.apiKey,n.name)}(e),r=function ZL(n){return Wi(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function eoe(n,e){Gd.set(n._key(),e)}function e2(n,e){return iT.apply(this,arguments)}function iT(){return(iT=I(function*(n,e,t=!1){if(_i(n.app))return Promise.reject(rn(n));const r=Vt(n),i=function Fs(n,e){return e?Wi(e):(K(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}(r,e),s=yield new Zie(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class ooe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function soe(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return r2(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!r2(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ar(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(n2(e))}saveEventToCache(e){this.cachedEventUids.add(n2(e)),this.lastProcessedEventTime=Date.now()}}function n2(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function r2({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function sT(){return(sT=I(function*(n,e={}){return pt(n,"GET","/v1/projects",e)})).apply(this,arguments)}const uoe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,coe=/^https?/;function aT(){return aT=I(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function aoe(n){return sT.apply(this,arguments)}(n);for(const t of e)try{if(doe(t))return}catch{}Xn(n,"unauthorized-domain")}),aT.apply(this,arguments)}function doe(n){const e=Rd(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return""===s.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&s.hostname===r}if(!coe.test(t))return!1;if(uoe.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const hoe=new Md(3e4,6e4);function i2(){const n=Ht().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let fm=null;const goe=new Md(5e3,15e3),moe="__/auth/iframe",_oe="emulator/auth/iframe",yoe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},voe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ioe(n){const e=n.config;K(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?sw(e,_oe):`https://${n.config.authDomain}/${moe}`,r={apiKey:e.apiKey,appName:n.name,v:Vu},i=voe.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${bd(r).slice(1)}`}function uT(){return uT=I(function*(n){const e=yield function poe(n){return fm=fm||function foe(n){return new Promise((e,t)=>{var r,i,o;function s(){i2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{i2(),t(Ar(n,"network-request-failed"))},timeout:hoe.get()})}if(null!==(i=null===(r=Ht().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=Ht().gapi)||void 0===o||!o.load){const a=PL("iframefcb");return Ht()[a]=()=>{gapi.load?s():t(Ar(n,"network-request-failed"))},Tw(`${function bre(){return kd.gapiScript}()}?onload=${a}`).catch(u=>t(u))}s()}}).catch(e=>{throw fm=null,e})}(n),fm}(n),t=Ht().gapi;return K(t,n,"internal-error"),e.open({where:document.body,url:Ioe(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yoe,dontclear:!0},r=>new Promise(function(){var i=I(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=Ar(n,"network-request-failed"),u=Ht().setTimeout(()=>{s(a)},goe.get());function c(){Ht().clearTimeout(u),o(r)}r.ping(c).then(c,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),uT.apply(this,arguments)}const boe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class o2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Poe="__/auth/handler",Roe="emulator/auth/handler",Moe=encodeURIComponent("fac");function s2(n,e,t,r,i,o){return cT.apply(this,arguments)}function cT(){return(cT=I(function*(n,e,t,r,i,o){K(n.config.authDomain,n,"auth-domain-config-required"),K(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Vu,eventId:i};if(e instanceof Qi){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",function fte(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(o||{}))s[d]=h}if(e instanceof Qre){const d=e.getScopes().filter(h=>""!==h);d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);const a=s;for(const d of Object.keys(a))void 0===a[d]&&delete a[d];const u=yield n._getAppCheckToken(),c=u?`#${Moe}=${encodeURIComponent(u)}`:"";return`${function xoe({config:n}){return n.emulator?sw(n,Roe):`https://${n.authDomain}/${Poe}`}(n)}?${bd(a).slice(1)}${c}`})).apply(this,arguments)}const lT="webStorageSupport",Ooe=class Noe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qL,this._completeRedirectFn=e2,this._overrideRedirectResult=eoe}_openPopup(e,t,r,i){var o=this;return I(function*(){var s;Oo(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield s2(e,t,r,Rd(),i);return function Aoe(n,e,t,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},boe),{width:r.toString(),height:i.toString(),top:o,left:s}),c=Ot().toLowerCase();t&&(a=EL(c)?"_blank":t),vL(c)&&(e=e||"http://localhost",u.scrollbars="yes");const d=Object.entries(u).reduce((p,[m,_])=>`${p}${m}=${_},`,"");if(function hre(n=Ot()){var e;return ww(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function Soe(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new o2(null);const h=window.open(e||"",a,d);K(h,n,"popup-blocked");try{h.focus()}catch{}return new o2(h)}(e,a,MC())})()}_openRedirect(e,t,r,i){var o=this;return I(function*(){return yield o._originValidation(e),function wie(n){Ht().location.href=n}(yield s2(e,t,r,Rd(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Oo(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return I(function*(){const r=yield function Eoe(n){return uT.apply(this,arguments)}(e),i=new ooe(e);return r.register("authEvent",o=>(K(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(lT,{type:lT},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[lT];void 0!==s&&t(!!s),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function loe(n){return aT.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return DL()||IL()||ww()}};var l2="@firebase/auth";class koe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return I(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Uoe=RF("authIdTokenMaxAge")||300;let h2=null;const Boe=n=>function(){var e=I(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>Uoe)return;const o=r?.token;h2!==o&&(h2=o,yield fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function joe(n=Kb()){const e=Jg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function Dre(n,e){const t=Jg(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(Ou(t.getOptions(),e??{}))return i;Xn(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:Ooe,persistence:[xie,vie,qL]}),r=RF("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=Boe(o.toString());(function die(n,e,t){kt(n).beforeAuthStateChanged(e,t)})(t,s,()=>s(t.currentUser)),HL(t,a=>s(a))}}const i=SF("auth");return i&&function Sre(n,e,t){const r=Vt(n);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,o=xL(e),{host:s,port:a}=function Pre(n){const e=xL(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:NL(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:NL(s)}}}(e);r.config.emulator={url:`${o}//${s}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function Rre(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}function f2(n){return new Ct(function(e){return{unsubscribe:HL(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}(function vre(n){kd=n})({loadJS:n=>new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Ar("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",function $oe(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Foe(n){ku(new xs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;K(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AL(n)},c=new yre(r,i,o,u);return function Are(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Wi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ku(new xs("auth-internal",e=>{const t=Vt(e.getProvider("auth").getImmediate());return new koe(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(l2,"1.7.9",function Voe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(n)),Zn(l2,"1.7.9","esm2017")}("Browser");class gm{constructor(e){return e}}class g2{constructor(){return Xb("auth")}}const hT=new ee("angularfire2.auth-instances");function Hoe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new gm(r)}}const Goe={provide:g2,deps:[[new ir,hT]]},qoe={provide:gm,useFactory:function zoe(n,e){const t=eL("auth",n,e);return t&&new gm(t)},deps:[[new ir,hT],Pd]};function Woe(n,...e){return Zn("angularfire",Xg.full,"auth"),us([qoe,Goe,{provide:hT,useFactory:Hoe(n),multi:!0,deps:[Ne,tn,ew,tw,[new ir,tL],...e]}])}const Koe=zt(f2,!0),Qoe=zt(nie,!0),Yoe=zt(joe,!0),Joe=zt(rie,!0),Zoe=zt(hie,!0);var Ls,y2,m2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_2={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(T,E,w){w||(w=0);var A=Array(16);if("string"==typeof E)for(var M=0;16>M;++M)A[M]=E.charCodeAt(w++)|E.charCodeAt(w++)<<8|E.charCodeAt(w++)<<16|E.charCodeAt(w++)<<24;else for(M=0;16>M;++M)A[M]=E[w++]|E[w++]<<8|E[w++]<<16|E[w++]<<24;var O=T.g[3],C=(E=T.g[0])+(O^(w=T.g[1])&((M=T.g[2])^O))+A[0]+3614090360&4294967295;C=(w=(M=(O=(E=(w=(M=(O=(E=(w=(M=(O=(E=(w=(M=(O=(E=(w=(M=(O=(E=(w=(M=(O=(E=(w=(M=(O=(E=(w=(M=(O=(E=(w=(M=(O=(E=(w=(M=(O=(E=(w=(M=(O=(E=(w=(M=(O=(E=(w=(M=(O=(E=(w=(M=(O=(E=(w=(M=(O=(E=w+(C<<7&4294967295|C>>>25))+((C=O+(M^E&(w^M))+A[1]+3905402710&4294967295)<<12&4294967295|C>>>20))+((C=M+(w^O&(E^w))+A[2]+606105819&4294967295)<<17&4294967295|C>>>15))+((C=w+(E^M&(O^E))+A[3]+3250441966&4294967295)<<22&4294967295|C>>>10))+((C=E+(O^w&(M^O))+A[4]+4118548399&4294967295)<<7&4294967295|C>>>25))+((C=O+(M^E&(w^M))+A[5]+1200080426&4294967295)<<12&4294967295|C>>>20))+((C=M+(w^O&(E^w))+A[6]+2821735955&4294967295)<<17&4294967295|C>>>15))+((C=w+(E^M&(O^E))+A[7]+4249261313&4294967295)<<22&4294967295|C>>>10))+((C=E+(O^w&(M^O))+A[8]+1770035416&4294967295)<<7&4294967295|C>>>25))+((C=O+(M^E&(w^M))+A[9]+2336552879&4294967295)<<12&4294967295|C>>>20))+((C=M+(w^O&(E^w))+A[10]+4294925233&4294967295)<<17&4294967295|C>>>15))+((C=w+(E^M&(O^E))+A[11]+2304563134&4294967295)<<22&4294967295|C>>>10))+((C=E+(O^w&(M^O))+A[12]+1804603682&4294967295)<<7&4294967295|C>>>25))+((C=O+(M^E&(w^M))+A[13]+4254626195&4294967295)<<12&4294967295|C>>>20))+((C=M+(w^O&(E^w))+A[14]+2792965006&4294967295)<<17&4294967295|C>>>15))+((C=w+(E^M&(O^E))+A[15]+1236535329&4294967295)<<22&4294967295|C>>>10))+((C=E+(M^O&(w^M))+A[1]+4129170786&4294967295)<<5&4294967295|C>>>27))+((C=O+(w^M&(E^w))+A[6]+3225465664&4294967295)<<9&4294967295|C>>>23))+((C=M+(E^w&(O^E))+A[11]+643717713&4294967295)<<14&4294967295|C>>>18))+((C=w+(O^E&(M^O))+A[0]+3921069994&4294967295)<<20&4294967295|C>>>12))+((C=E+(M^O&(w^M))+A[5]+3593408605&4294967295)<<5&4294967295|C>>>27))+((C=O+(w^M&(E^w))+A[10]+38016083&4294967295)<<9&4294967295|C>>>23))+((C=M+(E^w&(O^E))+A[15]+3634488961&4294967295)<<14&4294967295|C>>>18))+((C=w+(O^E&(M^O))+A[4]+3889429448&4294967295)<<20&4294967295|C>>>12))+((C=E+(M^O&(w^M))+A[9]+568446438&4294967295)<<5&4294967295|C>>>27))+((C=O+(w^M&(E^w))+A[14]+3275163606&4294967295)<<9&4294967295|C>>>23))+((C=M+(E^w&(O^E))+A[3]+4107603335&4294967295)<<14&4294967295|C>>>18))+((C=w+(O^E&(M^O))+A[8]+1163531501&4294967295)<<20&4294967295|C>>>12))+((C=E+(M^O&(w^M))+A[13]+2850285829&4294967295)<<5&4294967295|C>>>27))+((C=O+(w^M&(E^w))+A[2]+4243563512&4294967295)<<9&4294967295|C>>>23))+((C=M+(E^w&(O^E))+A[7]+1735328473&4294967295)<<14&4294967295|C>>>18))+((C=w+(O^E&(M^O))+A[12]+2368359562&4294967295)<<20&4294967295|C>>>12))+((C=E+(w^M^O)+A[5]+4294588738&4294967295)<<4&4294967295|C>>>28))+((C=O+(E^w^M)+A[8]+2272392833&4294967295)<<11&4294967295|C>>>21))+((C=M+(O^E^w)+A[11]+1839030562&4294967295)<<16&4294967295|C>>>16))+((C=w+(M^O^E)+A[14]+4259657740&4294967295)<<23&4294967295|C>>>9))+((C=E+(w^M^O)+A[1]+2763975236&4294967295)<<4&4294967295|C>>>28))+((C=O+(E^w^M)+A[4]+1272893353&4294967295)<<11&4294967295|C>>>21))+((C=M+(O^E^w)+A[7]+4139469664&4294967295)<<16&4294967295|C>>>16))+((C=w+(M^O^E)+A[10]+3200236656&4294967295)<<23&4294967295|C>>>9))+((C=E+(w^M^O)+A[13]+681279174&4294967295)<<4&4294967295|C>>>28))+((C=O+(E^w^M)+A[0]+3936430074&4294967295)<<11&4294967295|C>>>21))+((C=M+(O^E^w)+A[3]+3572445317&4294967295)<<16&4294967295|C>>>16))+((C=w+(M^O^E)+A[6]+76029189&4294967295)<<23&4294967295|C>>>9))+((C=E+(w^M^O)+A[9]+3654602809&4294967295)<<4&4294967295|C>>>28))+((C=O+(E^w^M)+A[12]+3873151461&4294967295)<<11&4294967295|C>>>21))+((C=M+(O^E^w)+A[15]+530742520&4294967295)<<16&4294967295|C>>>16))+((C=w+(M^O^E)+A[2]+3299628645&4294967295)<<23&4294967295|C>>>9))+((C=E+(M^(w|~O))+A[0]+4096336452&4294967295)<<6&4294967295|C>>>26))+((C=O+(w^(E|~M))+A[7]+1126891415&4294967295)<<10&4294967295|C>>>22))+((C=M+(E^(O|~w))+A[14]+2878612391&4294967295)<<15&4294967295|C>>>17))+((C=w+(O^(M|~E))+A[5]+4237533241&4294967295)<<21&4294967295|C>>>11))+((C=E+(M^(w|~O))+A[12]+1700485571&4294967295)<<6&4294967295|C>>>26))+((C=O+(w^(E|~M))+A[3]+2399980690&4294967295)<<10&4294967295|C>>>22))+((C=M+(E^(O|~w))+A[10]+4293915773&4294967295)<<15&4294967295|C>>>17))+((C=w+(O^(M|~E))+A[1]+2240044497&4294967295)<<21&4294967295|C>>>11))+((C=E+(M^(w|~O))+A[8]+1873313359&4294967295)<<6&4294967295|C>>>26))+((C=O+(w^(E|~M))+A[15]+4264355552&4294967295)<<10&4294967295|C>>>22))+((C=M+(E^(O|~w))+A[6]+2734768916&4294967295)<<15&4294967295|C>>>17))+((C=w+(O^(M|~E))+A[13]+1309151649&4294967295)<<21&4294967295|C>>>11))+((O=(E=w+((C=E+(M^(w|~O))+A[4]+4149444226&4294967295)<<6&4294967295|C>>>26))+((C=O+(w^(E|~M))+A[11]+3174756917&4294967295)<<10&4294967295|C>>>22))^((M=O+((C=M+(E^(O|~w))+A[2]+718787259&4294967295)<<15&4294967295|C>>>17))|~E))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+E&4294967295,T.g[1]=T.g[1]+(M+(C<<21&4294967295|C>>>11))&4294967295,T.g[2]=T.g[2]+M&4294967295,T.g[3]=T.g[3]+O&4294967295}function s(T,E){this.h=E;for(var w=[],A=!0,M=T.length-1;0<=M;M--){var O=0|T[M];A&&O==E||(w[M]=O,A=!1)}this.g=w}(function e(T,E){function w(){}w.prototype=E.prototype,T.D=E.prototype,T.prototype=new w,T.prototype.constructor=T,T.C=function(A,M,O){for(var C=Array(arguments.length-2),io=2;io<arguments.length;io++)C[io-2]=arguments[io];return E.prototype[M].apply(A,C)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(T,E){void 0===E&&(E=T.length);for(var w=E-this.blockSize,A=this.B,M=this.h,O=0;O<E;){if(0==M)for(;O<=w;)i(this,T,O),O+=this.blockSize;if("string"==typeof T){for(;O<E;)if(A[M++]=T.charCodeAt(O++),M==this.blockSize){i(this,A),M=0;break}}else for(;O<E;)if(A[M++]=T[O++],M==this.blockSize){i(this,A),M=0;break}}this.h=M,this.o+=E},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var E=1;E<T.length-8;++E)T[E]=0;var w=8*this.o;for(E=T.length-8;E<T.length;++E)T[E]=255&w,w/=256;for(this.u(T),T=Array(16),E=w=0;4>E;++E)for(var A=0;32>A;A+=8)T[w++]=this.g[E]>>>A&255;return T};var a={};function u(T){return-128<=T&&128>T?function o(T,E){var w=a;return Object.prototype.hasOwnProperty.call(w,T)?w[T]:w[T]=E(T)}(T,function(E){return new s([0|E],0>E?-1:0)}):new s([0|T],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return h;if(0>T)return b(c(-T));for(var E=[],w=1,A=0;T>=w;A++)E[A]=T/w|0,w*=4294967296;return new s(E,0)}var h=u(0),p=u(1),m=u(16777216);function _(T){if(0!=T.h)return!1;for(var E=0;E<T.g.length;E++)if(0!=T.g[E])return!1;return!0}function v(T){return-1==T.h}function b(T){for(var E=T.g.length,w=[],A=0;A<E;A++)w[A]=~T.g[A];return new s(w,~T.h).add(p)}function D(T,E){return T.add(b(E))}function S(T,E){for(;(65535&T[E])!=T[E];)T[E+1]+=T[E]>>>16,T[E]&=65535,E++}function B(T,E){this.g=T,this.h=E}function q(T,E){if(_(E))throw Error("division by zero");if(_(T))return new B(h,h);if(v(T))return E=q(b(T),E),new B(b(E.g),b(E.h));if(v(E))return E=q(T,b(E)),new B(b(E.g),E.h);if(30<T.g.length){if(v(T)||v(E))throw Error("slowDivide_ only works with positive integers.");for(var w=p,A=E;0>=A.l(T);)w=Z(w),A=Z(A);var M=ne(w,1),O=ne(A,1);for(A=ne(A,2),w=ne(w,2);!_(A);){var C=O.add(A);0>=C.l(T)&&(M=M.add(w),O=C),A=ne(A,1),w=ne(w,1)}return E=D(T,M.j(E)),new B(M,E)}for(M=h;0<=T.l(E);){for(w=Math.max(1,Math.floor(T.m()/E.m())),A=48>=(A=Math.ceil(Math.log(w)/Math.LN2))?1:Math.pow(2,A-48),C=(O=c(w)).j(E);v(C)||0<C.l(T);)C=(O=c(w-=A)).j(E);_(O)&&(O=p),M=M.add(O),T=D(T,C)}return new B(M,T)}function Z(T){for(var E=T.g.length+1,w=[],A=0;A<E;A++)w[A]=T.i(A)<<1|T.i(A-1)>>>31;return new s(w,T.h)}function ne(T,E){var w=E>>5;E%=32;for(var A=T.g.length-w,M=[],O=0;O<A;O++)M[O]=0<E?T.i(O+w)>>>E|T.i(O+w+1)<<32-E:T.i(O+w);return new s(M,T.h)}(n=s.prototype).m=function(){if(v(this))return-b(this).m();for(var T=0,E=1,w=0;w<this.g.length;w++){var A=this.i(w);T+=(0<=A?A:4294967296+A)*E,E*=4294967296}return T},n.toString=function(T){if(2>(T=T||10)||36<T)throw Error("radix out of range: "+T);if(_(this))return"0";if(v(this))return"-"+b(this).toString(T);for(var E=c(Math.pow(T,6)),w=this,A="";;){var M=q(w,E).g,O=((0<(w=D(w,M.j(E))).g.length?w.g[0]:w.h)>>>0).toString(T);if(_(w=M))return O+A;for(;6>O.length;)O="0"+O;A=O+A}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h},n.l=function(T){return v(T=D(this,T))?-1:_(T)?0:1},n.abs=function(){return v(this)?b(this):this},n.add=function(T){for(var E=Math.max(this.g.length,T.g.length),w=[],A=0,M=0;M<=E;M++){var O=A+(65535&this.i(M))+(65535&T.i(M)),C=(O>>>16)+(this.i(M)>>>16)+(T.i(M)>>>16);A=C>>>16,w[M]=(C&=65535)<<16|(O&=65535)}return new s(w,-2147483648&w[w.length-1]?-1:0)},n.j=function(T){if(_(this)||_(T))return h;if(v(this))return v(T)?b(this).j(b(T)):b(b(this).j(T));if(v(T))return b(this.j(b(T)));if(0>this.l(m)&&0>T.l(m))return c(this.m()*T.m());for(var E=this.g.length+T.g.length,w=[],A=0;A<2*E;A++)w[A]=0;for(A=0;A<this.g.length;A++)for(var M=0;M<T.g.length;M++){var O=this.i(A)>>>16,C=65535&this.i(A),io=T.i(M)>>>16,Nh=65535&T.i(M);w[2*A+2*M]+=C*Nh,S(w,2*A+2*M),w[2*A+2*M+1]+=O*Nh,S(w,2*A+2*M+1),w[2*A+2*M+1]+=C*io,S(w,2*A+2*M+1),w[2*A+2*M+2]+=O*io,S(w,2*A+2*M+2)}for(A=0;A<E;A++)w[A]=w[2*A+1]<<16|w[2*A];for(A=E;A<2*E;A++)w[A]=0;return new s(w,0)},n.A=function(T){return q(this,T).h},n.and=function(T){for(var E=Math.max(this.g.length,T.g.length),w=[],A=0;A<E;A++)w[A]=this.i(A)&T.i(A);return new s(w,this.h&T.h)},n.or=function(T){for(var E=Math.max(this.g.length,T.g.length),w=[],A=0;A<E;A++)w[A]=this.i(A)|T.i(A);return new s(w,this.h|T.h)},n.xor=function(T){for(var E=Math.max(this.g.length,T.g.length),w=[],A=0;A<E;A++)w[A]=this.i(A)^T.i(A);return new s(w,this.h^T.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,y2=_2.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=function d(T,E){if(0==T.length)throw Error("number format error: empty string");if(2>(E=E||10)||36<E)throw Error("radix out of range: "+E);if("-"==T.charAt(0))return b(d(T.substring(1),E));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=c(Math.pow(E,8)),A=h,M=0;M<T.length;M+=8){var O=Math.min(8,T.length-M),C=parseInt(T.substring(M,M+O),E);8>O?(O=c(Math.pow(E,O)),A=A.j(O).add(c(C))):A=(A=A.j(w)).add(c(C))}return A},Ls=_2.Integer=s}).apply(typeof m2<"u"?m2:typeof self<"u"?self:typeof window<"u"?window:{});var v2,qd,I2,_m,fT,E2,b2,w2,mm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yi={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l},r=function t(l){l=["object"==typeof globalThis&&globalThis,l,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof mm&&mm];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}(this);!function i(l,f){if(f)e:{var g=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var x=l[y];if(!(x in g))break e;g=g[x]}(f=f(y=g[l=l[l.length-1]]))!=y&&null!=f&&e(g,l,{configurable:!0,writable:!0,value:f})}}("Array.prototype.values",function(l){return l||function(){return function o(l,f){l instanceof String&&(l+="");var g=0,y=!1,x={next:function(){if(!y&&g<l.length){var F=g++;return{value:f(F,l[F]),done:!1}}return y=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}(this,function(f,g){return g})}});var s=s||{},a=this||self;function u(l){var f=typeof l;return"array"==(f="object"!=f?f:l?Array.isArray(l)?"array":f:"null")||"object"==f&&"number"==typeof l.length}function c(l){var f=typeof l;return"object"==f&&null!=l||"function"==f}function d(l,f,g){return l.call.apply(l.bind,arguments)}function h(l,f,g){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,y),l.apply(f,x)}}return function(){return l.apply(f,arguments)}}function p(l,f,g){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:h).apply(null,arguments)}function m(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var y=g.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function _(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(y,x,F){for(var Y=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)Y[nt-2]=arguments[nt];return f.prototype[x].apply(y,Y)}}function v(l){const f=l.length;if(0<f){const g=Array(f);for(let y=0;y<f;y++)g[y]=l[y];return g}return[]}function b(l,f){for(let g=1;g<arguments.length;g++){const y=arguments[g];if(u(y)){const x=l.length||0,F=y.length||0;l.length=x+F;for(let Y=0;Y<F;Y++)l[x+Y]=y[Y]}else l.push(y)}}function S(l){return/^[\s\xa0]*$/.test(l)}function B(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function q(l){return q[" "](l),l}q[" "]=function(){};var Z=!(-1==B().indexOf("Gecko")||-1!=B().toLowerCase().indexOf("webkit")&&-1==B().indexOf("Edge")||-1!=B().indexOf("Trident")||-1!=B().indexOf("MSIE")||-1!=B().indexOf("Edge"));function ne(l,f,g){for(const y in l)f.call(g,l[y],y,l)}function E(l){const f={};for(const g in l)f[g]=l[g];return f}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(l,f){let g,y;for(let x=1;x<arguments.length;x++){for(g in y=arguments[x],y)l[g]=y[g];for(let F=0;F<w.length;F++)g=w[F],Object.prototype.hasOwnProperty.call(y,g)&&(l[g]=y[g])}}function M(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function O(l){a.setTimeout(()=>{throw l},0)}function C(){var l=U0;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}var Nh=new class D{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}(()=>new ide,l=>l.reset());class ide{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Oh,kh=!1,U0=new class io{constructor(){this.h=this.g=null}add(f,g){const y=Nh.get();y.set(f,g),this.h?this.h.next=y:this.g=y,this.h=y}},r$=()=>{const l=a.Promise.resolve(void 0);Oh=()=>{l.then(ode)}};var ode=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(g){O(g)}var f=Nh;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}kh=!1};function Zo(){this.s=this.s,this.C=this.C}function Rn(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}Zo.prototype.s=!1,Zo.prototype.ma=function(){this.s||(this.s=!0,this.N())},Zo.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Rn.prototype.h=function(){this.defaultPrevented=!0};var sde=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return l}();function Vh(l,f){if(Rn.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(Z){e:{try{q(f.nodeName);var x=!0;break e}catch{}x=!1}x||(f=null)}}else"mouseover"==g?f=l.fromElement:"mouseout"==g&&(f=l.toElement);this.relatedTarget=f,y?(this.clientX=void 0!==y.clientX?y.clientX:y.pageX,this.clientY=void 0!==y.clientY?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType="string"==typeof l.pointerType?l.pointerType:ade[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Vh.aa.h.call(this)}}_(Vh,Rn);var ade={2:"touch",3:"pen",4:"mouse"};Vh.prototype.h=function(){Vh.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Fh="closure_listenable_"+(1e6*Math.random()|0),ude=0;function cde(l,f,g,y,x){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!y,this.ha=x,this.key=++ude,this.da=this.fa=!1}function y_(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function v_(l){this.src=l,this.g={},this.h=0}function B0(l,f){var g=f.type;if(g in l.g){var F,y=l.g[g],x=Array.prototype.indexOf.call(y,f,void 0);(F=0<=x)&&Array.prototype.splice.call(y,x,1),F&&(y_(f),0==l.g[g].length&&(delete l.g[g],l.h--))}}function j0(l,f,g,y){for(var x=0;x<l.length;++x){var F=l[x];if(!F.da&&F.listener==f&&F.capture==!!g&&F.ha==y)return x}return-1}v_.prototype.add=function(l,f,g,y,x){var F=l.toString();(l=this.g[F])||(l=this.g[F]=[],this.h++);var Y=j0(l,f,y,x);return-1<Y?(f=l[Y],g||(f.fa=!1)):((f=new cde(f,this.src,F,!!y,x)).fa=g,l.push(f)),f};var $0="closure_lm_"+(1e6*Math.random()|0),z0={};function i$(l,f,g,y,x){if(y&&y.once)return s$(l,f,g,y,x);if(Array.isArray(f)){for(var F=0;F<f.length;F++)i$(l,f[F],g,y,x);return null}return g=W0(g),l&&l[Fh]?l.K(f,g,c(y)?!!y.capture:!!y,x):o$(l,f,g,!1,y,x)}function o$(l,f,g,y,x,F){if(!f)throw Error("Invalid event type");var Y=c(x)?!!x.capture:!!x,nt=G0(l);if(nt||(l[$0]=nt=new v_(l)),(g=nt.add(f,g,y,Y,F)).proxy)return g;if(y=function lde(){const f=dde;return function l(g){return f.call(l.src,l.listener,g)}}(),g.proxy=y,y.src=l,y.listener=g,l.addEventListener)sde||(x=Y),void 0===x&&(x=!1),l.addEventListener(f.toString(),y,x);else if(l.attachEvent)l.attachEvent(u$(f.toString()),y);else{if(!l.addListener||!l.removeListener)throw Error("addEventListener and attachEvent are unavailable.");l.addListener(y)}return g}function s$(l,f,g,y,x){if(Array.isArray(f)){for(var F=0;F<f.length;F++)s$(l,f[F],g,y,x);return null}return g=W0(g),l&&l[Fh]?l.L(f,g,c(y)?!!y.capture:!!y,x):o$(l,f,g,!0,y,x)}function a$(l,f,g,y,x){if(Array.isArray(f))for(var F=0;F<f.length;F++)a$(l,f[F],g,y,x);else y=c(y)?!!y.capture:!!y,g=W0(g),l&&l[Fh]?(l=l.i,(f=String(f).toString())in l.g&&-1<(g=j0(F=l.g[f],g,y,x))&&(y_(F[g]),Array.prototype.splice.call(F,g,1),0==F.length&&(delete l.g[f],l.h--))):l&&(l=G0(l))&&(f=l.g[f.toString()],l=-1,f&&(l=j0(f,g,y,x)),(g=-1<l?f[l]:null)&&H0(g))}function H0(l){if("number"!=typeof l&&l&&!l.da){var f=l.src;if(f&&f[Fh])B0(f.i,l);else{var g=l.type,y=l.proxy;f.removeEventListener?f.removeEventListener(g,y,l.capture):f.detachEvent?f.detachEvent(u$(g),y):f.addListener&&f.removeListener&&f.removeListener(y),(g=G0(f))?(B0(g,l),0==g.h&&(g.src=null,f[$0]=null)):y_(l)}}}function u$(l){return l in z0?z0[l]:z0[l]="on"+l}function dde(l,f){if(l.da)l=!0;else{f=new Vh(f,this);var g=l.listener,y=l.ha||l.src;l.fa&&H0(l),l=g.call(y,f)}return l}function G0(l){return(l=l[$0])instanceof v_?l:null}var q0="__closure_events_fn_"+(1e9*Math.random()>>>0);function W0(l){return"function"==typeof l?l:(l[q0]||(l[q0]=function(f){return l.handleEvent(f)}),l[q0])}function Mn(){Zo.call(this),this.i=new v_(this),this.M=this,this.F=null}function $n(l,f){var g,y=l.F;if(y)for(g=[];y;y=y.F)g.push(y);if(l=l.M,y=f.type||f,"string"==typeof f)f=new Rn(f,l);else if(f instanceof Rn)f.target=f.target||l;else{var x=f;A(f=new Rn(y,l),x)}if(x=!0,g)for(var F=g.length-1;0<=F;F--){var Y=f.g=g[F];x=I_(Y,y,!0,f)&&x}if(x=I_(Y=f.g=l,y,!0,f)&&x,x=I_(Y,y,!1,f)&&x,g)for(F=0;F<g.length;F++)x=I_(Y=f.g=g[F],y,!1,f)&&x}function I_(l,f,g,y){if(!(f=l.i.g[String(f)]))return!0;f=f.concat();for(var x=!0,F=0;F<f.length;++F){var Y=f[F];if(Y&&!Y.da&&Y.capture==g){var nt=Y.listener,gn=Y.ha||Y.src;Y.fa&&B0(l.i,Y),x=!1!==nt.call(gn,y)&&x}}return x&&!y.defaultPrevented}function c$(l,f,g){if("function"==typeof l)g&&(l=p(l,g));else{if(!l||"function"!=typeof l.handleEvent)throw Error("Invalid listener argument");l=p(l.handleEvent,l)}return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function l$(l){l.g=c$(()=>{l.g=null,l.i&&(l.i=!1,l$(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}_(Mn,Zo),Mn.prototype[Fh]=!0,Mn.prototype.removeEventListener=function(l,f,g,y){a$(this,l,f,g,y)},Mn.prototype.N=function(){if(Mn.aa.N.call(this),this.i){var f,l=this.i;for(f in l.g){for(var g=l.g[f],y=0;y<g.length;y++)y_(g[y]);delete l.g[f],l.h--}}this.F=null},Mn.prototype.K=function(l,f,g,y){return this.i.add(String(l),f,!1,g,y)},Mn.prototype.L=function(l,f,g,y){return this.i.add(String(l),f,!0,g,y)};class hde extends Zo{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:l$(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lh(l){Zo.call(this),this.h=l,this.g={}}_(Lh,Zo);var d$=[];function h$(l){ne(l.g,function(f,g){this.g.hasOwnProperty(g)&&H0(f)},l),l.g={}}Lh.prototype.N=function(){Lh.aa.N.call(this),h$(this)},Lh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var K0=a.JSON.stringify,fde=a.JSON.parse,pde=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Q0(){}function p$(){}Q0.prototype.h=null;var Uh={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Y0(){Rn.call(this,"d")}function J0(){Rn.call(this,"c")}_(Y0,Rn),_(J0,Rn);var aa={},g$=null;function E_(){return g$=g$||new Mn}function m$(l){Rn.call(this,aa.La,l)}function Bh(l){const f=E_();$n(f,new m$(f))}function _$(l,f){Rn.call(this,aa.STAT_EVENT,l),this.stat=f}function zn(l){const f=E_();$n(f,new _$(f,l))}function y$(l,f){Rn.call(this,aa.Ma,l),this.size=f}function jh(l,f){if("function"!=typeof l)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function $h(){this.g=!0}function Sc(l,f,g,y){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+function yde(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g)for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var y=g[l];if(!(2>y.length)){var x=y[1];if(Array.isArray(x)&&!(1>x.length)){var F=x[0];if("noop"!=F&&"stop"!=F&&"close"!=F)for(var Y=1;Y<x.length;Y++)x[Y]=""}}}return K0(g)}catch{return f}}(l,g)+(y?" "+y:"")})}aa.La="serverreachability",_(m$,Rn),aa.STAT_EVENT="statevent",_(_$,Rn),aa.Ma="timingevent",_(y$,Rn),$h.prototype.xa=function(){this.g=!1},$h.prototype.info=function(){};var Z0,b_={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},v$={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function w_(){}function Xo(l,f,g,y){this.j=l,this.i=f,this.l=g,this.R=y||1,this.U=new Lh(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new I$}function I$(){this.i=null,this.g="",this.h=!1}_(w_,Q0),w_.prototype.g=function(){return new XMLHttpRequest},w_.prototype.i=function(){return{}},Z0=new w_;var E$={},X0={};function eA(l,f,g){l.L=1,l.v=A_(oo(f)),l.m=g,l.P=!0,b$(l,null)}function b$(l,f){l.F=Date.now(),C_(l),l.A=oo(l.v);var g=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),V$(g.i,"t",y),l.C=0,g=l.j.J,l.h=new I$,l.g=e4(l.j,g?f:null,!l.m),0<l.O&&(l.M=new hde(p(l.Y,l,l.g),l.O)),f=l.U,g=l.g,y=l.ca;var x="readystatechange";Array.isArray(x)||(x&&(d$[0]=x.toString()),x=d$);for(var F=0;F<x.length;F++){var Y=i$(g,x[F],y||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Bh(),function gde(l,f,g,y,x,F){l.info(function(){if(l.g)if(F)for(var Y="",nt=F.split("&"),gn=0;gn<nt.length;gn++){var ke=nt[gn].split("=");if(1<ke.length){var xn=ke[0];ke=ke[1];var Nn=xn.split("_");Y=2<=Nn.length&&"type"==Nn[1]?Y+(xn+"=")+ke+"&":Y+(xn+"=redacted&")}}else Y=null;else Y=F;return"XMLHTTP REQ ("+y+") [attempt "+x+"]: "+f+"\n"+g+"\n"+Y})}(l.i,l.u,l.A,l.l,l.R,l.m)}function w$(l){return!!l.g&&"GET"==l.u&&2!=l.L&&l.j.Ca}function vde(l,f){var g=l.C,y=f.indexOf("\n",g);return-1==y?X0:(g=Number(f.substring(g,y)),isNaN(g)?E$:(y+=1)+g>f.length?X0:(f=f.slice(y,y+g),l.C=y+g,f))}function C_(l){l.S=Date.now()+l.I,C$(l,l.I)}function C$(l,f){if(null!=l.B)throw Error("WatchDog timer not null");l.B=jh(p(l.ba,l),f)}function tA(l){l.B&&(a.clearTimeout(l.B),l.B=null)}function zh(l){0==l.j.G||l.J||Y$(l.j,l)}function ua(l){tA(l);var f=l.M;f&&"function"==typeof f.ma&&f.ma(),l.M=null,h$(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function nA(l,f){try{var g=l.j;if(0!=g.G&&(g.g==l||rA(g.h,l)))if(!l.K&&rA(g.h,l)&&3==g.G){try{var y=g.Da.g.parse(f)}catch{y=null}if(Array.isArray(y)&&3==y.length){var x=y;if(0==x[0]){e:if(!g.u){if(g.g){if(!(g.g.F+3e3<l.F))break e;x_(g),R_(g)}aA(g),zn(18)}}else g.za=x[1],0<g.za-g.T&&37500>x[2]&&g.F&&0==g.v&&!g.C&&(g.C=jh(p(g.Za,g),6e3));if(1>=A$(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else la(g,11)}else if((l.K||g.g==l)&&x_(g),!S(f))for(x=g.Da.g.parse(f),f=0;f<x.length;f++){let ke=x[f];if(g.T=ke[0],ke=ke[1],2==g.G)if("c"==ke[0]){g.K=ke[1],g.ia=ke[2];const xn=ke[3];null!=xn&&(g.la=xn,g.j.info("VER="+g.la));const Nn=ke[4];null!=Nn&&(g.Aa=Nn,g.j.info("SVER="+g.Aa));const Mc=ke[5];null!=Mc&&"number"==typeof Mc&&0<Mc&&(g.L=y=1.5*Mc,g.j.info("backChannelRequestTimeoutMs_="+y)),y=g;const Wr=l.g;if(Wr){const O_=Wr.g?Wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(O_){var F=y.h;F.g||-1==O_.indexOf("spdy")&&-1==O_.indexOf("quic")&&-1==O_.indexOf("h2")||(F.j=F.l,F.g=new Set,F.h&&(iA(F,F.h),F.h=null))}if(y.D){const cA=Wr.g?Wr.g.getResponseHeader("X-HTTP-Session-Id"):null;cA&&(y.ya=cA,mt(y.I,y.D,cA))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms"));var Y=l;if((y=g).qa=X$(y,y.J?y.ia:null,y.W),Y.K){S$(y.h,Y);var nt=Y,gn=y.L;gn&&(nt.I=gn),nt.B&&(tA(nt),C_(nt)),y.g=Y}else K$(y);0<g.i.length&&M_(g)}else"stop"!=ke[0]&&"close"!=ke[0]||la(g,7);else 3==g.G&&("stop"==ke[0]||"close"==ke[0]?"stop"==ke[0]?la(g,7):sA(g):"noop"!=ke[0]&&g.l&&g.l.ta(ke),g.v=0)}Bh()}catch{}}Xo.prototype.ca=function(l){l=l.target;const f=this.M;f&&3==so(l)?f.j():this.Y(l)},Xo.prototype.Y=function(l){try{if(l==this.g)e:{const Nn=so(this.g);var f=this.g.Ba();if(this.g.Z(),!(3>Nn)&&(3!=Nn||this.g&&(this.h.h||this.g.oa()||z$(this.g)))){this.J||4!=Nn||7==f||Bh(),tA(this);var g=this.g.Z();this.X=g;t:if(w$(this)){var y=z$(this.g);l="";var x=y.length,F=4==so(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ua(this),zh(this);var Y="";break t}this.h.i=new a.TextDecoder}for(f=0;f<x;f++)this.h.h=!0,l+=this.h.i.decode(y[f],{stream:!(F&&f==x-1)});y.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=200==g,function mde(l,f,g,y,x,F,Y){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+x+"]: "+f+"\n"+g+"\n"+F+" "+Y})}(this.i,this.u,this.A,this.l,this.R,Nn,g),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,gn=this.g;if((nt=gn.g?gn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(nt)){var ke=nt;break t}}ke=null}if(!(g=ke)){this.o=!1,this.s=3,zn(12),ua(this),zh(this);break e}Sc(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nA(this,g)}if(this.P){let Wr;for(g=!0;!this.J&&this.C<Y.length;){if(Wr=vde(this,Y),Wr==X0){4==Nn&&(this.s=4,zn(14),g=!1),Sc(this.i,this.l,null,"[Incomplete Response]");break}if(Wr==E$){this.s=4,zn(15),Sc(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}Sc(this.i,this.l,Wr,null),nA(this,Wr)}if(w$(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Nn||0!=Y.length||this.h.h||(this.s=1,zn(16),g=!1),this.o=this.o&&g,g){if(0<Y.length&&!this.W){this.W=!0;var xn=this.j;xn.g==this&&xn.ba&&!xn.M&&(xn.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),uA(xn),xn.M=!0,zn(11))}}else Sc(this.i,this.l,Y,"[Invalid Chunked Response]"),ua(this),zh(this)}else Sc(this.i,this.l,Y,null),nA(this,Y);4==Nn&&ua(this),this.o&&!this.J&&(4==Nn?Y$(this.j,this):(this.o=!1,C_(this)))}else(function Vde(l){const f={};l=(l.g&&2<=so(l)&&l.g.getAllResponseHeaders()||"").split("\r\n");for(let y=0;y<l.length;y++){if(S(l[y]))continue;var g=M(l[y]);const x=g[0];if("string"!=typeof(g=g[1]))continue;g=g.trim();const F=f[x]||[];f[x]=F,F.push(g)}!function T(l,f){for(const g in l)f.call(void 0,l[g],g,l)}(f,function(y){return y.join(", ")})})(this.g),400==g&&0<Y.indexOf("Unknown SID")?(this.s=3,zn(12)):(this.s=0,zn(13)),ua(this),zh(this)}}}catch{}},Xo.prototype.cancel=function(){this.J=!0,ua(this)},Xo.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(function _de(l,f){l.info(function(){return"TIMEOUT: "+f})}(this.i,this.A),2!=this.L&&(Bh(),zn(17)),ua(this),this.s=2,zh(this)):C$(this,this.S-l)};var Ide=class{constructor(l,f){this.g=l,this.map=f}};function T$(l){this.l=l||10,l=a.PerformanceNavigationTiming?0<(l=a.performance.getEntriesByType("navigation")).length&&("hq"==l[0].nextHopProtocol||"h2"==l[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function D$(l){return!!l.h||!!l.g&&l.g.size>=l.j}function A$(l){return l.h?1:l.g?l.g.size:0}function rA(l,f){return l.h?l.h==f:!!l.g&&l.g.has(f)}function iA(l,f){l.g?l.g.add(f):l.h=f}function S$(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}function P$(l){if(null!=l.h)return l.i.concat(l.h.D);if(null!=l.g&&0!==l.g.size){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return v(l.i)}function R$(l,f){if(l.forEach&&"function"==typeof l.forEach)l.forEach(f,void 0);else if(u(l)||"string"==typeof l)Array.prototype.forEach.call(l,f,void 0);else for(var g=function bde(l){if(l.na&&"function"==typeof l.na)return l.na();if(!l.V||"function"!=typeof l.V){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||"string"==typeof l){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const y in l)f[g++]=y;return f}}}(l),y=function Ede(l){if(l.V&&"function"==typeof l.V)return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if("string"==typeof l)return l.split("");if(u(l)){for(var f=[],g=l.length,y=0;y<g;y++)f.push(l[y]);return f}for(y in f=[],g=0,l)f[g++]=l[y];return f}(l),x=y.length,F=0;F<x;F++)f.call(void 0,y[F],g&&g[F],l)}T$.prototype.cancel=function(){if(this.i=P$(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const l of this.g.values())l.cancel();this.g.clear()}};var M$=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ca(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ca){this.h=l.h,T_(this,l.j),this.o=l.o,this.g=l.g,D_(this,l.s),this.l=l.l;var f=l.i,g=new qh;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),x$(this,g),this.m=l.m}else l&&(f=String(l).match(M$))?(this.h=!1,T_(this,f[1]||"",!0),this.o=Hh(f[2]||""),this.g=Hh(f[3]||"",!0),D_(this,f[4]),this.l=Hh(f[5]||"",!0),x$(this,f[6]||"",!0),this.m=Hh(f[7]||"")):(this.h=!1,this.i=new qh(null,this.h))}function oo(l){return new ca(l)}function T_(l,f,g){l.j=g?Hh(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function D_(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function x$(l,f,g){f instanceof qh?(l.i=f,function Pde(l,f){f&&!l.j&&(es(l),l.i=null,l.g.forEach(function(g,y){var x=y.toLowerCase();y!=x&&(O$(this,y),V$(this,x,g))},l)),l.j=f}(l.i,l.h)):(g||(f=Gh(f,Ade)),l.i=new qh(f,l.h))}function mt(l,f,g){l.i.set(f,g)}function A_(l){return mt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Hh(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Gh(l,f,g){return"string"==typeof l?(l=encodeURI(l).replace(f,Cde),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Cde(l){return"%"+((l=l.charCodeAt(0))>>4&15).toString(16)+(15&l).toString(16)}ca.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Gh(f,N$,!0),":");var g=this.g;return(g||"file"==f)&&(l.push("//"),(f=this.o)&&l.push(Gh(f,N$,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(g=this.s)&&l.push(":",String(g))),(g=this.l)&&(this.g&&"/"!=g.charAt(0)&&l.push("/"),l.push(Gh(g,"/"==g.charAt(0)?Dde:Tde,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Gh(g,Sde)),l.join("")};var N$=/[#\/\?@]/g,Tde=/[#\?:]/g,Dde=/[#\?]/g,Ade=/[#\?@]/g,Sde=/#/g;function qh(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function es(l){l.g||(l.g=new Map,l.h=0,l.i&&function wde(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var y=l[g].indexOf("="),x=null;if(0<=y){var F=l[g].substring(0,y);x=l[g].substring(y+1)}else F=l[g];f(F,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}function O$(l,f){es(l),f=Pc(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function k$(l,f){return es(l),f=Pc(l,f),l.g.has(f)}function V$(l,f,g){O$(l,f),0<g.length&&(l.i=null,l.g.set(Pc(l,f),v(g)),l.h+=g.length)}function Pc(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function ts(l,f,g,y,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),y(g)}catch{}}function xde(){this.g=new pde}function Nde(l,f,g){const y=g||"";try{R$(l,function(x,F){let Y=x;c(x)&&(Y=K0(x)),f.push(y+F+"="+encodeURIComponent(Y))})}catch(x){throw f.push(y+"type="+encodeURIComponent("_badmap")),x}}function Wh(l){this.l=l.Ub||null,this.j=l.eb||!1}function S_(l,f){Mn.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function F$(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}function Kh(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Qh(l)}function Qh(l){l.onreadystatechange&&l.onreadystatechange.call(l)}function L$(l){let f="";return ne(l,function(g,y){f+=y,f+=":",f+=g,f+="\r\n"}),f}function oA(l,f,g){e:{for(y in g){var y=!1;break e}y=!0}y||(g=L$(g),"string"==typeof l?null!=g&&encodeURIComponent(String(g)):mt(l,f,g))}function At(l){Mn.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=qh.prototype).add=function(l,f){es(this),this.i=null,l=Pc(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this},n.forEach=function(l,f){es(this),this.g.forEach(function(g,y){g.forEach(function(x){l.call(f,x,y,this)},this)},this)},n.na=function(){es(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let y=0;y<f.length;y++){const x=l[y];for(let F=0;F<x.length;F++)g.push(f[y])}return g},n.V=function(l){es(this);let f=[];if("string"==typeof l)k$(this,l)&&(f=f.concat(this.g.get(Pc(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},n.set=function(l,f){return es(this),this.i=null,k$(this,l=Pc(this,l))&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},n.get=function(l,f){return l&&0<(l=this.V(l)).length?String(l[0]):f},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var y=f[g];const F=encodeURIComponent(String(y)),Y=this.V(y);for(y=0;y<Y.length;y++){var x=F;""!==Y[y]&&(x+="="+encodeURIComponent(String(Y[y]))),l.push(x)}}return this.i=l.join("&")},_(Wh,Q0),Wh.prototype.g=function(){return new S_(this.l,this.j)},Wh.prototype.i=function(l){return function(){return l}}({}),_(S_,Mn),(n=S_.prototype).open=function(l,f){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Qh(this)},n.send=function(l){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Kh(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Qh(this)),this.g&&(this.readyState=3,Qh(this),this.g)))if("arraybuffer"===this.responseType)l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;F$(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Kh(this):Qh(this),3==this.readyState&&F$(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Kh(this))},n.Qa=function(l){this.g&&(this.response=l,Kh(this))},n.ga=function(){this.g&&Kh(this)},n.setRequestHeader=function(l,f){this.u.append(l,f)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)l.push((g=g.value)[0]+": "+g[1]),g=f.next();return l.join("\r\n")},Object.defineProperty(S_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(l){this.m=l?"include":"same-origin"}}),_(At,Mn);var Ode=/^https?$/i,kde=["POST","PUT"];function U$(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,B$(l),P_(l)}function B$(l){l.A||(l.A=!0,$n(l,"complete"),$n(l,"error"))}function j$(l){if(l.h&&typeof s<"u"&&(!l.v[1]||4!=so(l)||2!=l.Z()))if(l.u&&4==so(l))c$(l.Ea,0,l);else if($n(l,"readystatechange"),4==so(l)){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var y;if(y=0===Y){var x=String(l.D).match(M$)[1]||null;!x&&a.self&&a.self.location&&(x=a.self.location.protocol.slice(0,-1)),y=!Ode.test(x?x.toLowerCase():"")}g=y}if(g)$n(l,"complete"),$n(l,"success");else{l.m=6;try{var F=2<so(l)?l.g.statusText:""}catch{F=""}l.l=F+" ["+l.Z()+"]",B$(l)}}finally{P_(l)}}}function P_(l,f){if(l.g){$$(l);const g=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||$n(l,"ready");try{g.onreadystatechange=y}catch{}}}function $$(l){l.I&&(a.clearTimeout(l.I),l.I=null)}function so(l){return l.g?l.g.readyState:0}function z$(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Yh(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function H$(l){this.Aa=0,this.i=[],this.j=new $h,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yh("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yh("baseRetryDelayMs",5e3,l),this.cb=Yh("retryDelaySeedMs",1e4,l),this.Wa=Yh("forwardChannelMaxRetries",2,l),this.wa=Yh("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new T$(l&&l.concurrentRequestLimit),this.Da=new xde,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function sA(l){if(G$(l),3==l.G){var f=l.U++,g=oo(l.I);if(mt(g,"SID",l.K),mt(g,"RID",f),mt(g,"TYPE","terminate"),Jh(l,g),(f=new Xo(l,l.j,f)).L=2,f.v=A_(oo(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&((new Image).src=f.v,g=!0),g||(f.g=e4(f.j,null),f.g.ea(f.v)),f.F=Date.now(),C_(f)}Z$(l)}function R_(l){l.g&&(uA(l),l.g.cancel(),l.g=null)}function G$(l){R_(l),l.u&&(a.clearTimeout(l.u),l.u=null),x_(l),l.h.cancel(),l.s&&("number"==typeof l.s&&a.clearTimeout(l.s),l.s=null)}function M_(l){if(!D$(l.h)&&!l.s){l.s=!0;var f=l.Ga;Oh||r$(),kh||(Oh(),kh=!0),U0.add(f,l),l.B=0}}function q$(l,f){var g;g=f?f.l:l.U++;const y=oo(l.I);mt(y,"SID",l.K),mt(y,"RID",g),mt(y,"AID",l.T),Jh(l,y),l.m&&l.o&&oA(y,l.m,l.o),g=new Xo(l,l.j,g,l.B+1),null===l.m&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=W$(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),iA(l.h,g),eA(g,y,f)}function Jh(l,f){l.H&&ne(l.H,function(g,y){mt(f,y,g)}),l.l&&R$({},function(g,y){mt(f,y,g)})}function W$(l,f,g){g=Math.min(l.i.length,g);var y=l.l?p(l.l.Na,l.l,l):null;e:{var x=l.i;let F=-1;for(;;){const Y=["count="+g];-1==F?0<g?(F=x[0].g,Y.push("ofs="+F)):F=0:Y.push("ofs="+F);let nt=!0;for(let gn=0;gn<g;gn++){let ke=x[gn].g;const xn=x[gn].map;if(ke-=F,0>ke)F=Math.max(0,x[gn].g-100),nt=!1;else try{Nde(xn,Y,"req"+ke+"_")}catch{y&&y(xn)}}if(nt){y=Y.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,y}function K$(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Oh||r$(),kh||(Oh(),kh=!0),U0.add(f,l),l.v=0}}function aA(l){return!(l.g||l.u||3<=l.v||(l.Y++,l.u=jh(p(l.Fa,l),J$(l,l.v)),l.v++,0))}function uA(l){null!=l.A&&(a.clearTimeout(l.A),l.A=null)}function Q$(l){l.g=new Xo(l,l.j,"rpc",l.Y),null===l.m&&(l.g.H=l.o),l.g.O=0;var f=oo(l.qa);mt(f,"RID","rpc"),mt(f,"SID",l.K),mt(f,"AID",l.T),mt(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&mt(f,"TO",l.ja),mt(f,"TYPE","xmlhttp"),Jh(l,f),l.m&&l.o&&oA(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=A_(oo(f)),g.m=null,g.P=!0,b$(g,l)}function x_(l){null!=l.C&&(a.clearTimeout(l.C),l.C=null)}function Y$(l,f){var g=null;if(l.g==f){x_(l),uA(l),l.g=null;var y=2}else{if(!rA(l.h,f))return;g=f.D,S$(l.h,f),y=1}if(0!=l.G)if(f.o)if(1==y){g=f.m?f.m.length:0,f=Date.now()-f.F;var x=l.B;$n(y=E_(),new y$(y,g)),M_(l)}else K$(l);else if(3==(x=f.s)||0==x&&0<f.X||!(1==y&&function Fde(l,f){return!(A$(l.h)>=l.h.j-(l.s?1:0)||(l.s?(l.i=f.D.concat(l.i),0):1==l.G||2==l.G||l.B>=(l.Va?0:l.Wa)||(l.s=jh(p(l.Ga,l,f),J$(l,l.B)),l.B++,0)))}(l,f)||2==y&&aA(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),x){case 1:la(l,5);break;case 4:la(l,10);break;case 3:la(l,6);break;default:la(l,2)}}function J$(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function la(l,f){if(l.j.info("Error code "+f),2==f){var g=p(l.fb,l),y=l.Xa;const x=!y;y=new ca(y||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||T_(y,"https"),A_(y),x?function Rde(l,f){const g=new $h;if(a.Image){const y=new Image;y.onload=m(ts,g,"TestLoadImage: loaded",!0,f,y),y.onerror=m(ts,g,"TestLoadImage: error",!1,f,y),y.onabort=m(ts,g,"TestLoadImage: abort",!1,f,y),y.ontimeout=m(ts,g,"TestLoadImage: timeout",!1,f,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else f(!1)}(y.toString(),g):function Mde(l,f){new $h;const y=new AbortController,x=setTimeout(()=>{y.abort(),ts(0,0,!1,f)},1e4);fetch(l,{signal:y.signal}).then(F=>{clearTimeout(x),ts(0,0,!!F.ok,f)}).catch(()=>{clearTimeout(x),ts(0,0,!1,f)})}(y.toString(),g)}else zn(2);l.G=0,l.l&&l.l.sa(f),Z$(l),G$(l)}function Z$(l){if(l.G=0,l.ka=[],l.l){const f=P$(l.h);(0!=f.length||0!=l.i.length)&&(b(l.ka,f),b(l.ka,l.i),l.h.i.length=0,v(l.i),l.i.length=0),l.l.ra()}}function X$(l,f,g){var y=g instanceof ca?oo(g):new ca(g);if(""!=y.g)f&&(y.g=f+"."+y.g),D_(y,y.s);else{var x=a.location;y=x.protocol,f=f?f+"."+x.hostname:x.hostname,x=+x.port;var F=new ca(null);y&&T_(F,y),f&&(F.g=f),x&&D_(F,x),g&&(F.l=g),y=F}return f=l.ya,(g=l.D)&&f&&mt(y,g,f),mt(y,"VER",l.la),Jh(l,y),y}function e4(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return(f=new At(l.Ca&&!l.pa?new Wh({eb:g}):l.pa)).Ha(l.J),f}function t4(){}function N_(){}function yr(l,f){Mn.call(this),this.g=new H$(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!S(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!S(f)&&(this.g.D=f,null!==(l=this.h)&&f in l&&f in(l=this.h)&&delete l[f]),this.j=new Rc(this)}function n4(l){Y0.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=null!==f&&l in f?f[l]:void 0),this.data=f}else this.data=l}function r4(){J0.call(this),this.status=1}function Rc(l){this.g=l}(n=At.prototype).Ha=function(l){this.J=l},n.ea=function(l,f,g,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Z0.g(),this.v=function f$(l){return l.h||(l.h=l.i())}(this.o?this.o:Z0),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(F){return void U$(this,F)}if(l=g||"",g=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var x in y)g.set(x,y[x]);else{if("function"!=typeof y.keys||"function"!=typeof y.get)throw Error("Unknown input type for opt_headers: "+String(y));for(const F of y.keys())g.set(F,y.get(F))}y=Array.from(g.keys()).find(F=>"content-type"==F.toLowerCase()),x=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(kde,f,void 0))||y||x||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,Y]of g)this.g.setRequestHeader(F,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$$(this),this.u=!0,this.g.send(l),this.u=!1}catch(F){U$(this,F)}},n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,$n(this,"complete"),$n(this,"abort"),P_(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),P_(this,!0)),At.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?j$(this):this.bb())},n.bb=function(){j$(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<so(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&0==f.indexOf(l)&&(f=f.substring(l.length)),fde(f)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=H$.prototype).la=8,n.G=1,n.connect=function(l,f,g,y){zn(0),this.W=l,this.H=f||{},g&&void 0!==y&&(this.H.OSID=g,this.H.OAID=y),this.F=this.X,this.I=X$(this,null,this.W),M_(this)},n.Ga=function(l){if(this.s)if(this.s=null,1==this.G){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const x=new Xo(this,this.j,l);let F=this.o;if(this.S&&(F?(F=E(F),A(F,this.S)):F=this.S),null!==this.m||this.O||(x.H=F,F=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){var y=this.i[g];if(void 0===(y="__data__"in y.map&&"string"==typeof(y=y.map.__data__)?y.length:void 0))break;if(4096<(f+=y)){f=g;break e}if(4096===f||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=W$(this,x,f),mt(g=oo(this.I),"RID",l),mt(g,"CVER",22),this.D&&mt(g,"X-HTTP-Session-Id",this.D),Jh(this,g),F&&(this.O?f="headers="+encodeURIComponent(String(L$(F)))+"&"+f:this.m&&oA(g,this.m,F)),iA(this.h,x),this.Ua&&mt(g,"TYPE","init"),this.P?(mt(g,"$req",f),mt(g,"SID","null"),x.T=!0,eA(x,g,null)):eA(x,g,f),this.G=2}}else 3==this.G&&(l?q$(this,l):0==this.i.length||D$(this.h)||q$(this))},n.Fa=function(){if(this.u=null,Q$(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=jh(p(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zn(10),R_(this),Q$(this))},n.Za=function(){null!=this.C&&(this.C=null,R_(this),aA(this),zn(19))},n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),zn(2)):(this.j.info("Failed to ping google.com"),zn(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=t4.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},N_.prototype.g=function(l,f){return new yr(l,f)},_(yr,Mn),yr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yr.prototype.close=function(){sA(this.g)},yr.prototype.o=function(l){var f=this.g;if("string"==typeof l){var g={};g.__data__=l,l=g}else this.u&&((g={}).__data__=K0(l),l=g);f.i.push(new Ide(f.Ya++,l)),3==f.G&&M_(f)},yr.prototype.N=function(){this.g.l=null,delete this.j,sA(this.g),delete this.g,yr.aa.N.call(this)},_(n4,Y0),_(r4,J0),_(Rc,t4),Rc.prototype.ua=function(){$n(this.g,"a")},Rc.prototype.ta=function(l){$n(this.g,new n4(l))},Rc.prototype.sa=function(l){$n(this.g,new r4)},Rc.prototype.ra=function(){$n(this.g,"b")},N_.prototype.createWebChannel=N_.prototype.g,yr.prototype.send=yr.prototype.o,yr.prototype.open=yr.prototype.m,yr.prototype.close=yr.prototype.close,w2=Yi.createWebChannelTransport=function(){return new N_},b2=Yi.getStatEventTarget=function(){return E_()},E2=Yi.Event=aa,fT=Yi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},b_.NO_ERROR=0,b_.TIMEOUT=8,b_.HTTP_ERROR=6,_m=Yi.ErrorCode=b_,v$.COMPLETE="complete",I2=Yi.EventType=v$,p$.EventType=Uh,Uh.OPEN="a",Uh.CLOSE="b",Uh.ERROR="c",Uh.MESSAGE="d",Mn.prototype.listen=Mn.prototype.K,qd=Yi.WebChannel=p$,Yi.FetchXmlHttpFactory=Wh,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,v2=Yi.XhrIo=At}).apply(typeof mm<"u"?mm:typeof self<"u"?self:typeof window<"u"?window:{});const C2="@firebase/firestore";class on{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let zu="10.14.0";const Vo=new Bb("@firebase/firestore");function Hu(){return Vo.logLevel}function z(n,...e){if(Vo.logLevel<=De.DEBUG){const t=e.map(pT);Vo.debug(`Firestore (${zu}): ${n}`,...t)}}function Ft(n,...e){if(Vo.logLevel<=De.ERROR){const t=e.map(pT);Vo.error(`Firestore (${zu}): ${n}`,...t)}}function Pr(n,...e){if(Vo.logLevel<=De.WARN){const t=e.map(pT);Vo.warn(`Firestore (${zu}): ${n}`,...t)}}function pT(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function te(n="Unexpected state"){const e=`FIRESTORE (${zu}) INTERNAL ASSERTION FAILED: `+n;throw Ft(e),new Error(e)}function ie(n,e){n||te()}function Q(n,e){return n}const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends $i{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class sn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class T2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ese{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(on.UNAUTHENTICATED))}shutdown(){}}class tse{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nse{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;ie(void 0===this.o);let i=this.i;const o=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let s=new sn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new sn,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(I(function*(){yield c.promise,yield o(r.currentUser)}))},u=c=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sn)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ie("string"==typeof r.accessToken),new T2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ie(null===e||"string"==typeof e),new on(e)}}class rse{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ise{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new rse(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class D2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ose{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ie(void 0===this.o);const r=o=>{null!=o.error&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,z("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ie("string"==typeof t.token),this.R=t.token,new D2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function sse(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class A2{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=sse(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function pe(n,e){return n<e?-1:n>e?1:0}function Gu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class Ze{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new H(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new H(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new H(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ze(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new oe(e)}static min(){return new oe(new Ze(0,0))}static max(){return new oe(new Ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Wd{constructor(e,t,r){void 0===t?t=0:t>e.length&&te(),void 0===r?r=e.length-t:r>e.length-t&&te(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Wd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ae extends Wd{construct(e,t,r){return new Ae(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ae(t)}static emptyPath(){return new Ae([])}}const ase=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vt extends Wd{construct(e,t,r){return new vt(e,t,r)}static isValidIdentifier(e){return ase.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vt(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new H(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new H(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new H(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new H(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vt(t)}static emptyPath(){return new vt([])}}class J{constructor(e){this.path=e}static fromPath(e){return new J(Ae.fromString(e))}static fromName(e){return new J(Ae.fromString(e).popFirst(5))}static empty(){return new J(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ae.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ae.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ae(e.slice()))}}class gr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new gr(oe.min(),J.empty(),-1)}static max(){return new gr(oe.max(),J.empty(),-1)}}function mT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=J.comparator(n.documentKey,e.documentKey),0!==t?t:pe(n.largestBatchId,e.largestBatchId))}const M2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class x2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Fo(n){return _T.apply(this,arguments)}function _T(){return(_T=I(function*(n){if(n.code!==V.FAILED_PRECONDITION||n.message!==M2)throw n;z("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new N((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof N?t:N.resolve(t)}catch(t){return N.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):N.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):N.reject(t)}static resolve(e){return new N((t,r)=>{t(e)})}static reject(e){return new N((t,r)=>{r(e)})}static waitFor(e){return new N((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=N.resolve(!1);for(const r of e)t=t.next(i=>i?N.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new N((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const c=u;t(e[c]).next(d=>{s[c]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new N((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}function Lo(n){return"IndexedDbTransactionError"===n.name}let mr=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Qd(n){return null==n}function Yd(n){return 0===n&&1/n==-1/0}function $2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Uo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function H2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ct{constructor(e,t){this.comparator=e,this.root=t||hn.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Im(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Im(this.root,e,this.comparator,!1)}getReverseIterator(){return new Im(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Im(this.root,e,this.comparator,!0)}}class Im{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??hn.RED,this.left=i??hn.EMPTY,this.right=o??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new hn(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return hn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1,hn.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,t,r,i,o){return this}insert(e,t,r){return new hn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xe{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new G2(this.data.getIterator())}getIteratorFrom(e){return new G2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xe(this.comparator);return t.data=e,t}}class G2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class er{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new er([])}unionWith(e){let t=new Xe(vt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new er(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class q2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Dt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new q2("Invalid base64 string: "+o):o}}(e);return new Dt(t)}static fromUint8Array(e){const t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Dt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dt.EMPTY_BYTE_STRING=new Dt("");const Nse=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ji(n){if(ie(!!n),"string"==typeof n){let e=0;const t=Nse.exec(n);if(ie(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:It(n.seconds),nanos:It(n.nanos)}}function It(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Zi(n){return"string"==typeof n?Dt.fromBase64String(n):Dt.fromUint8Array(n)}function Em(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function bm(n){const e=n.mapValue.fields.__previous_value__;return Em(e)?bm(e):e}function Jd(n){const e=Ji(n.mapValue.fields.__local_write_time__.timestampValue);return new Ze(e.seconds,e.nanos)}class Ose{constructor(e,t,r,i,o,s,a,u,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class $s{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new $s("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $s&&e.projectId===this.projectId&&e.database===this.database}}const Bo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function jo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Em(n)?4:J2(n)?9007199254740991:Dm(n)?10:11:te()}function Ei(n,e){if(n===e)return!0;const t=jo(n);if(t!==jo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jd(n).isEqual(Jd(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Ji(i.timestampValue),a=Ji(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Zi(n.bytesValue).isEqual(Zi(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return It(i.geoPointValue.latitude)===It(o.geoPointValue.latitude)&&It(i.geoPointValue.longitude)===It(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return It(i.integerValue)===It(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=It(i.doubleValue),a=It(o.doubleValue);return s===a?Yd(s)===Yd(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Gu(n.arrayValue.values||[],e.arrayValue.values||[],Ei);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if($2(s)!==$2(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===a[u]||!Ei(s[u],a[u])))return!1;return!0}(n,e);default:return te()}var o}function Zd(n,e){return void 0!==(n.values||[]).find(t=>Ei(t,e))}function $o(n,e){if(n===e)return 0;const t=jo(n),r=jo(e);if(t!==r)return pe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return pe(n.booleanValue,e.booleanValue);case 2:return function(o,s){const a=It(o.integerValue||o.doubleValue),u=It(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return W2(n.timestampValue,e.timestampValue);case 4:return W2(Jd(n),Jd(e));case 5:return pe(n.stringValue,e.stringValue);case 6:return function(o,s){const a=Zi(o),u=Zi(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let c=0;c<a.length&&c<u.length;c++){const d=pe(a[c],u[c]);if(0!==d)return d}return pe(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){const a=pe(It(o.latitude),It(s.latitude));return 0!==a?a:pe(It(o.longitude),It(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return K2(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,c,d;const m=null===(a=(o.fields||{}).value)||void 0===a?void 0:a.arrayValue,_=null===(u=(s.fields||{}).value)||void 0===u?void 0:u.arrayValue,v=pe((null===(c=m?.values)||void 0===c?void 0:c.length)||0,(null===(d=_?.values)||void 0===d?void 0:d.length)||0);return 0!==v?v:K2(m,_)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Bo.mapValue&&s===Bo.mapValue)return 0;if(o===Bo.mapValue)return 1;if(s===Bo.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),c=s.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let h=0;h<u.length&&h<d.length;++h){const p=pe(u[h],d[h]);if(0!==p)return p;const m=$o(a[u[h]],c[d[h]]);if(0!==m)return m}return pe(u.length,d.length)}(n.mapValue,e.mapValue);default:throw te()}}function W2(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return pe(n,e);const t=Ji(n),r=Ji(e),i=pe(t.seconds,r.seconds);return 0!==i?i:pe(t.nanos,r.nanos)}function K2(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=$o(t[i],r[i]);if(o)return o}return pe(t.length,r.length)}function Qu(n){return ET(n)}function ET(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ji(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Zi(n.bytesValue).toBase64():"referenceValue"in n?J.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=ET(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${ET(t.fields[s])}`;return i+"}"}(n.mapValue):te()}function zs(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function bT(n){return!!n&&"integerValue"in n}function Xd(n){return!!n&&"arrayValue"in n}function Q2(n){return!!n&&"nullValue"in n}function Y2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tm(n){return!!n&&"mapValue"in n}function Dm(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function eh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Uo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=eh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=eh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function J2(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Tm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eh(t)}setAll(e){let t=vt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=eh(s):i.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Tm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ei(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Tm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Uo(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new fn(eh(this.value))}}function tU(n){const e=[];return Uo(n.fields,(t,r)=>{const i=new vt([t]);if(Tm(r)){const o=tU(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new er(e)}class gt{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new gt(e,0,oe.min(),oe.min(),oe.min(),fn.empty(),0)}static newFoundDocument(e,t,r,i){return new gt(e,1,t,oe.min(),r,i,0)}static newNoDocument(e,t){return new gt(e,2,t,oe.min(),oe.min(),fn.empty(),0)}static newUnknownDocument(e,t){return new gt(e,3,t,oe.min(),oe.min(),fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(oe.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zo{constructor(e,t){this.position=e,this.inclusive=t}}function nU(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(r=o.field.isKeyField()?J.comparator(J.fromName(s.referenceValue),t.key):$o(s,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function rU(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ei(n.position[t],e.position[t]))return!1;return!0}class th{constructor(e,t="asc"){this.field=e,this.dir=t}}function Fse(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class iU{}class Se extends iU{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Lse(e,t,r):"array-contains"===t?new jse(e,r):"in"===t?new lU(e,r):"not-in"===t?new $se(e,r):"array-contains-any"===t?new zse(e,r):new Se(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Use(e,r):new Bse(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison($o(t,this.value)):null!==t&&jo(this.value)===jo(t)&&this.matchesComparison($o(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ke extends iU{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ke(e,t)}matches(e){return Yu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Yu(n){return"and"===n.op}function CT(n){return function oU(n){for(const e of n.filters)if(e instanceof Ke)return!1;return!0}(n)&&Yu(n)}function TT(n){if(n instanceof Se)return n.field.canonicalString()+n.op.toString()+Qu(n.value);if(CT(n))return n.filters.map(e=>TT(e)).join(",");{const e=n.filters.map(t=>TT(t)).join(",");return`${n.op}(${e})`}}function sU(n,e){return n instanceof Se?(r=n,(i=e)instanceof Se&&r.op===i.op&&r.field.isEqual(i.field)&&Ei(r.value,i.value)):n instanceof Ke?function(r,i){return i instanceof Ke&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&sU(s,i.filters[a]),!0)}(n,e):void te();var r,i}function uU(n){return n instanceof Se?`${(t=n).field.canonicalString()} ${t.op} ${Qu(t.value)}`:n instanceof Ke?function(t){return t.op.toString()+" {"+t.getFilters().map(uU).join(" ,")+"}"}(n):"Filter";var t}class Lse extends Se{constructor(e,t,r){super(e,t,r),this.key=J.fromName(r.referenceValue)}matches(e){const t=J.comparator(e.key,this.key);return this.matchesComparison(t)}}class Use extends Se{constructor(e,t){super(e,"in",t),this.keys=cU(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Bse extends Se{constructor(e,t){super(e,"not-in",t),this.keys=cU(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function cU(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>J.fromName(r.referenceValue))}class jse extends Se{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xd(t)&&Zd(t.arrayValue,this.value)}}class lU extends Se{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zd(this.value.arrayValue,t)}}class $se extends Se{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zd(this.value.arrayValue,t)}}class zse extends Se{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Zd(this.value.arrayValue,r))}}class Hse{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function DT(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Hse(n,e,t,r,i,o,s)}function Hs(n){const e=Q(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>TT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Qd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Qu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Qu(r)).join(",")),e.ue=t}return e.ue}function nh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Fse(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sU(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!rU(n.startAt,e.startAt)&&rU(n.endAt,e.endAt)}function Am(n){return J.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Xi{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function Ju(n){return new Xi(n)}function pU(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function AT(n){return null!==n.collectionGroup}function Zu(n){const e=Q(n);if(null===e.ce){e.ce=[];const t=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Xe(vt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new th(o,r))}),t.has(vt.keyField().canonicalString())||e.ce.push(new th(vt.keyField(),r))}return e.ce}function An(n){const e=Q(n);return e.le||(e.le=function mU(n,e){if("F"===n.limitType)return DT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new th(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new zo(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new zo(n.startAt.position,n.startAt.inclusive):null;return DT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Zu(n))),e.le}function ST(n,e){const t=n.filters.concat([e]);return new Xi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Pm(n,e,t){return new Xi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rh(n,e){return nh(An(n),An(e))&&n.limitType===e.limitType}function _U(n){return`${Hs(An(n))}|lt:${n.limitType}`}function Xu(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>uU(i)).join(", ")}]`),Qd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Qu(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Qu(i)).join(",")),`Target(${r})`}(An(n))}; limitType=${n.limitType})`}function ih(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):J.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of Zu(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(s,a,u){const c=nU(s,a,u);return s.inclusive?c<=0:c<0}(r.startAt,Zu(r),i)||r.endAt&&!function(s,a,u){const c=nU(s,a,u);return s.inclusive?c>=0:c>0}(r.endAt,Zu(r),i)));var r,i}function vU(n){return(e,t)=>{let r=!1;for(const i of Zu(n)){const o=Gse(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Gse(n,e,t){const r=n.field.isKeyField()?J.comparator(e.key,t.key):function(o,s,a){const u=s.data.field(o),c=a.data.field(o);return null!==u&&null!==c?$o(u,c):te()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}class eo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Uo(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return H2(this.inner)}size(){return this.innerSize}}const qse=new ct(J.comparator);function tr(){return qse}const IU=new ct(J.comparator);function oh(...n){let e=IU;for(const t of n)e=e.insert(t.key,t);return e}function EU(n){let e=IU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bi(){return sh()}function bU(){return sh()}function sh(){return new eo(n=>n.toString(),(n,e)=>n.isEqual(e))}const Wse=new ct(J.comparator),Kse=new Xe(J.comparator);function ye(...n){let e=Kse;for(const t of n)e=e.add(t);return e}const Qse=new Xe(pe);function RT(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yd(e)?"-0":e}}function wU(n){return{integerValue:""+n}}function CU(n,e){return function k2(n){return"number"==typeof n&&Number.isInteger(n)&&!Yd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?wU(e):RT(n,e)}class Rm{constructor(){this._=void 0}}function Yse(n,e,t){return n instanceof ec?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Em(o)&&(o=bm(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Gs?DU(n,e):n instanceof qs?AU(n,e):function(i,o){const s=TU(i,o),a=SU(s)+SU(i.Pe);return bT(s)&&bT(i.Pe)?wU(a):RT(i.serializer,a)}(n,e)}function Jse(n,e,t){return n instanceof Gs?DU(n,e):n instanceof qs?AU(n,e):t}function TU(n,e){return n instanceof tc?bT(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class ec extends Rm{}class Gs extends Rm{constructor(e){super(),this.elements=e}}function DU(n,e){const t=PU(e);for(const r of n.elements)t.some(i=>Ei(i,r))||t.push(r);return{arrayValue:{values:t}}}class qs extends Rm{constructor(e){super(),this.elements=e}}function AU(n,e){let t=PU(e);for(const r of n.elements)t=t.filter(i=>!Ei(i,r));return{arrayValue:{values:t}}}class tc extends Rm{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function SU(n){return It(n.integerValue||n.doubleValue)}function PU(n){return Xd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ah{constructor(e,t){this.field=e,this.transform=t}}class Xse{constructor(e,t){this.version=e,this.transformResults=t}}class Et{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Et}static exists(e){return new Et(void 0,e)}static updateTime(e){return new Et(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class xm{}function RU(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new rc(n.key,Et.none()):new nc(n.key,n.data,Et.none());{const t=n.data,r=fn.empty();let i=new Xe(vt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);null===s&&o.length>1&&(o=o.popLast(),s=t.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new to(n.key,r,new er(i.toArray()),Et.none())}}function eae(n,e,t){n instanceof nc?function(i,o,s){const a=i.value.clone(),u=NU(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof to?function(i,o,s){if(!Mm(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=NU(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(xU(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function uh(n,e,t,r){return n instanceof nc?function(o,s,a,u){if(!Mm(o.precondition,s))return a;const c=o.value.clone(),d=OU(o.fieldTransforms,u,s);return c.setAll(d),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof to?function(o,s,a,u){if(!Mm(o.precondition,s))return a;const c=OU(o.fieldTransforms,u,s),d=s.data;return d.setAll(xU(o)),d.setAll(c),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(n,e,t,r):(a=t,Mm(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function tae(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=TU(r.transform,i||null);null!=o&&(null===t&&(t=fn.empty()),t.set(r.field,o))}return t||null}function MU(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Gu(r,i,(o,s)=>function Zse(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Gs&&i instanceof Gs||r instanceof qs&&i instanceof qs?Gu(r.elements,i.elements,Ei):r instanceof tc&&i instanceof tc?Ei(r.Pe,i.Pe):r instanceof ec&&i instanceof ec);var r,i}(o,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class nc extends xm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class to extends xm{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function xU(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function NU(n,e,t){const r=new Map;ie(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Jse(s,a,t[i]))}return r}function OU(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,Yse(o,s,e))}return r}class rc extends xm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MT extends xm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class xT{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&eae(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=uh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=uh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=bU();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;const u=RU(s,a);null!==u&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ye())}isEqual(e){return this.batchId===e.batchId&&Gu(this.mutations,e.mutations,(t,r)=>MU(t,r))&&Gu(this.baseMutations,e.baseMutations,(t,r)=>MU(t,r))}}class NT{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ie(e.mutations.length===r.length);let i=function(){return Wse}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new NT(e,t,r,i)}}class OT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class nae{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gt,Me;function FU(n){if(void 0===n)return Ft("GRPC error has no .code"),V.UNKNOWN;switch(n){case Gt.OK:return V.OK;case Gt.CANCELLED:return V.CANCELLED;case Gt.UNKNOWN:return V.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return V.INTERNAL;case Gt.UNAVAILABLE:return V.UNAVAILABLE;case Gt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Gt.NOT_FOUND:return V.NOT_FOUND;case Gt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Gt.ABORTED:return V.ABORTED;case Gt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Gt.DATA_LOSS:return V.DATA_LOSS;default:return te()}}(Me=Gt||(Gt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";const rae=new Ls([4294967295,4294967295],0);function UU(n){const e=function LU(){return new TextEncoder}().encode(n),t=new y2;return t.update(e),new Uint8Array(t.digest())}function BU(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ls([t,r],0),new Ls([i,o],0)]}class kT{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ch(`Invalid padding: ${t}`);if(r<0)throw new ch(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new ch(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new ch(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ls.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Ls.fromNumber(r)));return 1===i.compare(rae)&&(i=new Ls([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=UU(e),[r,i]=BU(t);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new kT(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Ie)return;const t=UU(e),[r,i]=BU(t);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class ch extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class lh{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,dh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new lh(oe.min(),i,new ct(pe),tr(),ye())}}class dh{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new dh(r,t,ye(),ye(),ye())}}class Om{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class jU{constructor(e,t){this.targetId=e,this.me=t}}class $U{constructor(e,t,r=Dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class zU{constructor(){this.fe=0,this.ge=GU(),this.pe=Dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ye(),t=ye(),r=ye();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:te()}}),new dh(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=GU()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class iae{constructor(e){this.Le=e,this.Be=new Map,this.ke=tr(),this.qe=HU(),this.Qe=new ct(pe)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const o=i.target;if(Am(o))if(0===r){const s=new J(o.path);this.Ue(t,s,gt.newNoDocument(s,oe.min()))}else ie(1===r);else{const s=this.Ye(t);if(s!==r){const a=this.Ze(e),u=a?this.Xe(a,e,s):1;0!==u&&(this.je(t),this.Qe=this.Qe.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,a;try{s=Zi(r).toUint8Array()}catch(u){if(u instanceof q2)return Pr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new kT(s,i,o)}catch(u){return Pr(u instanceof ch?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&Am(a.target)){const u=new J(a.target.path);null!==this.ke.get(u)||this.it(s,u)||this.Ue(s,u,gt.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ye();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const c=this.Je(u);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new lh(e,t,this.Qe,this.ke,r);return this.ke=tr(),this.qe=HU(),this.Qe=new ct(pe),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new zU,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Xe(pe),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||z("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new zU),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function HU(){return new ct(J.comparator)}function GU(){return new ct(J.comparator)}const oae={asc:"ASCENDING",desc:"DESCENDING"},sae={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aae={and:"AND",or:"OR"};class uae{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function VT(n,e){return n.useProto3Json||Qd(e)?e:{value:e}}function ic(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qU(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function cae(n,e){return ic(n,e.toTimestamp())}function Lt(n){return ie(!!n),oe.fromTimestamp(function(t){const r=Ji(t);return new Ze(r.seconds,r.nanos)}(n))}function FT(n,e){return LT(n,e).canonicalString()}function LT(n,e){const t=(i=n,new Ae(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function WU(n){const e=Ae.fromString(n);return ie(iB(e)),e}function hh(n,e){return FT(n.databaseId,e.path)}function wi(n,e){const t=WU(e);if(t.get(1)!==n.databaseId.projectId)throw new H(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new H(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new J(YU(t))}function KU(n,e){return FT(n.databaseId,e)}function UT(n){return new Ae(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function YU(n){return ie(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function JU(n,e,t){return{name:hh(n,e),fields:t.value.mapValue.fields}}function XU(n,e){return{documents:[KU(n,e.path)]}}function km(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=KU(n,i);const o=function(c){if(0!==c.length)return rB(Ke.create(c,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const s=function(c){if(0!==c.length)return c.map(d=>{return{field:Ho((p=d).field),direction:pae(p.dir)};var p})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=VT(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i};var c}function tB(n){let e=function QU(n){const e=WU(n);return 4===e.length?Ae.emptyPath():YU(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ie(1===r);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(h){const p=nB(h);return p instanceof Ke&&CT(p)?p.getFilters():[p]}(t.where));let s=[];t.orderBy&&(s=t.orderBy.map(p=>{return new th(oc((_=p).field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction));var _}));let a=null;t.limit&&(a=function(h){let p;return p="object"==typeof h?h.value:h,Qd(p)?null:p}(t.limit));let u=null;var h;t.startAt&&(u=new zo((h=t.startAt).values||[],!!h.before));let c=null;return t.endAt&&(c=function(h){return new zo(h.values||[],!h.before)}(t.endAt)),function fU(n,e,t,r,i,o,s,a){return new Xi(n,e,t,r,i,o,s,a)}(e,i,s,o,a,"F",u,c)}function nB(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=oc(t.unaryFilter.field);return Se.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=oc(t.unaryFilter.field);return Se.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=oc(t.unaryFilter.field);return Se.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=oc(t.unaryFilter.field);return Se.create(s,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(n):void 0!==n.fieldFilter?Se.create(oc((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Ke.create(t.compositeFilter.filters.map(r=>nB(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te()}}(t.compositeFilter.op))}(n):te();var t}function pae(n){return oae[n]}function gae(n){return sae[n]}function mae(n){return aae[n]}function Ho(n){return{fieldPath:n.canonicalString()}}function oc(n){return vt.fromServerFormat(n.fieldPath)}function rB(n){return n instanceof Se?function(t){if("=="===t.op){if(Y2(t.value))return{unaryFilter:{field:Ho(t.field),op:"IS_NAN"}};if(Q2(t.value))return{unaryFilter:{field:Ho(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Y2(t.value))return{unaryFilter:{field:Ho(t.field),op:"IS_NOT_NAN"}};if(Q2(t.value))return{unaryFilter:{field:Ho(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ho(t.field),op:gae(t.op),value:t.value}}}(n):n instanceof Ke?function(t){const r=t.getFilters().map(i=>rB(i));return 1===r.length?r[0]:{compositeFilter:{op:mae(t.op),filters:r}}}(n):te()}function _ae(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iB(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class no{constructor(e,t,r,i,o=oe.min(),s=oe.min(),a=Dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new no(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class oB{constructor(e){this.ct=e}}function jT(n){const e=tB({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Pm(e,e.limit,"L"):e}class Ys{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(It(e.integerValue));else if("doubleValue"in e){const r=It(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Yd(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=Ji(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Zi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?J2(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Dm(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):te()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const o=e.fields||{};this.dt(t,53);const s="value",a=(null===(i=null===(r=o[s].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(It(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),J.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Ys.vt=new Ys;class Dae{constructor(){this.un=new WT}addToCollectionParentIndex(e,t){return this.un.add(t),N.resolve()}getCollectionParents(e,t){return N.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return N.resolve()}deleteFieldIndex(e,t){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,t){return N.resolve()}getDocumentsMatchingTarget(e,t){return N.resolve(null)}getIndexType(e,t){return N.resolve(0)}getFieldIndexes(e,t){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,t){return N.resolve(gr.min())}getMinOffsetFromCollectionGroup(e,t){return N.resolve(gr.min())}updateCollectionGroup(e,t,r){return N.resolve()}updateIndexEntries(e,t){return N.resolve()}}class WT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Xe(Ae.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xe(Ae.comparator)).toArray()}}new Uint8Array(0);class Sn{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(41943040,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);class Zs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Zs(0)}static kn(){return new Zs(-1)}}class SB{constructor(){this.changes=new eo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?N.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Oae{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class NB{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&uh(r.mutation,i,er.empty(),Ze.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ye()){const i=bi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=oh();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=bi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ye()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=tr();const s=sh(),a=sh();return t.forEach((u,c)=>{const d=r.get(c.key);i.has(c.key)&&(void 0===d||d.mutation instanceof to)?o=o.insert(c.key,c):void 0!==d?(s.set(c.key,d.mutation.getFieldMask()),uh(d.mutation,c,d.mutation.getFieldMask(),Ze.now())):s.set(c.key,er.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,d)=>s.set(c,d)),t.forEach((c,d)=>{var h;return a.set(c,new Oae(d,null!==(h=s.get(c))&&void 0!==h?h:null))}),a))}recalculateAndSaveOverlays(e,t){const r=sh();let i=new ct((s,a)=>s-a),o=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const a of s)a.keys().forEach(u=>{const c=t.get(u);if(null===c)return;let d=r.get(u)||er.empty();d=a.applyToLocalView(c,d),r.set(u,d);const h=(i.get(a.batchId)||ye()).add(u);i=i.insert(a.batchId,h)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,d=u.value,h=bU();d.forEach(p=>{if(!o.has(p)){const m=RU(t.get(p),r.get(p));null!==m&&h.set(p,m),o=o.add(p)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,h))}return N.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return J.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):AT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var s}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):N.resolve(bi());let a=-1,u=o;return s.next(c=>N.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?N.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{u=u.insert(d,p)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,ye())).next(d=>({batchId:a,changes:EU(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new J(t)).next(r=>{let i=oh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=oh();return this.indexManager.getCollectionParents(e,o).next(a=>N.forEach(a,u=>{const c=(h=t,p=u.child(o),new Xi(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,p;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,p)=>{s=s.insert(h,p)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,c)=>{const d=c.getKey();null===s.get(d)&&(s=s.insert(d,gt.newInvalidDocument(d)))});let a=oh();return s.forEach((u,c)=>{const d=o.get(u);void 0!==d&&uh(d.mutation,c,er.empty(),Ze.now()),ih(t,c)&&(a=a.insert(u,c))}),a})}}class kae{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return N.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:Lt(i.createTime)}),N.resolve();var i}getNamedQuery(e,t){return N.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:jT(i.bundledQuery),readTime:Lt(i.readTime)}),N.resolve();var i}}class Vae{constructor(){this.overlays=new ct(J.comparator),this.Ir=new Map}getOverlay(e,t){return N.resolve(this.overlays.get(t))}getOverlays(e,t){const r=bi();return N.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),N.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),N.resolve()}getOverlaysForCollection(e,t,r){const i=bi(),o=t.length+1,s=new J(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return N.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ct((c,d)=>c-d);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let d=o.get(c.largestBatchId);null===d&&(d=bi(),o=o.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=bi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return N.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new OT(t,r));let o=this.Ir.get(t);void 0===o&&(o=ye(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}}class Fae{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,N.resolve()}}class KT{constructor(){this.Tr=new Xe(an.Er),this.dr=new Xe(an.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new an(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new an(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new J(new Ae([])),r=new an(t,e),i=new an(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new J(new Ae([])),r=new an(t,e),i=new an(t,e+1);let o=ye();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new an(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class an{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return J.comparator(e.key,t.key)||pe(e.wr,t.wr)}static Ar(e,t){return pe(e.wr,t.wr)||J.comparator(e.key,t.key)}}class Lae{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Xe(an.Er)}checkEmpty(e){return N.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.Sr;this.Sr++;const s=new xT(o,t,r,i);this.mutationQueue.push(s);for(const a of i)this.br=this.br.add(new an(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(s)}lookupMutationBatch(e,t){return N.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),o=i<0?0:i;return N.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new an(t,0),i=new an(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const a=this.Dr(s.wr);o.push(a)}),N.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(pe);return t.forEach(i=>{const o=new an(i,0),s=new an(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),N.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;J.isDocumentKey(o)||(o=o.child(""));const s=new an(new J(o),0);let a=new Xe(pe);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.wr)),!0)},s),N.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ie(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return N.forEach(t.mutations,i=>{const o=new an(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new an(t,0),i=this.br.firstAfterOrEqual(r);return N.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return N.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Uae{constructor(e){this.Mr=e,this.docs=new ct(J.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return N.resolve(r?r.document.mutableCopy():gt.newInvalidDocument(t))}getEntries(e,t){let r=tr();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():gt.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=tr();const s=t.path,a=new J(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||mT(new gr((n=d).readTime,n.key,-1),r)<=0||(i.has(d.key)||ih(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}var n;return N.resolve(o)}getAllFromCollectionGroup(e,t,r,i){te()}Or(e,t){return N.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Bae(this)}getSize(e){return N.resolve(this.size)}}class Bae extends SB{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),N.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class jae{constructor(e){this.persistence=e,this.Nr=new eo(t=>Hs(t),nh),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new KT,this.targetCount=0,this.kr=Zs.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),N.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Zs(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,N.resolve()}updateTargetData(e,t){return this.Kn(t),N.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(o).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return N.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),N.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),N.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),N.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return N.resolve(r)}containsKey(e,t){return N.resolve(this.Br.containsKey(t))}}class QT{constructor(e,t){this.qr={},this.overlays={},this.Qr=new mr(0),this.Kr=!1,this.Kr=!0,this.$r=new Fae,this.referenceDelegate=e(this),this.Ur=new jae(this),this.indexManager=new Dae,this.remoteDocumentCache=new Uae(r=>this.referenceDelegate.Wr(r)),this.serializer=new oB(t),this.Gr=new kae(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Vae,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Lae(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){z("MemoryPersistence","Starting transaction:",e);const i=new $ae(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return N.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class $ae extends x2{constructor(e){super(),this.currentSequenceNumber=e}}class zm{constructor(e){this.persistence=e,this.Jr=new KT,this.Yr=null}static Zr(e){return new zm(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),N.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),N.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Xr,r=>{const i=J.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,oe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return N.or([()=>N.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class XT{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ye(),i=ye();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new XT(e,t.fromCache,r,i)}}class Hae{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class kB{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function xF(){return!function rte(){var n;const e=null===(n=Wg())||void 0===n?void 0:n.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()?8:function N2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}(Ot())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new Hae;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Hu()<=De.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",Xu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),N.resolve()):(Hu()<=De.DEBUG&&z("QueryEngine","Query:",Xu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Hu()<=De.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",Xu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(t))):N.resolve())}Yi(e,t){if(pU(t))return N.resolve(null);let r=An(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Pm(t,null,"F"),r=An(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=ye(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(t,a);return this.ns(t,c,s,u.readTime)?this.Yi(e,Pm(t,null,"F")):this.rs(e,c,t,u)}))})))}Zi(e,t,r,i){return pU(t)||i.isEqual(oe.min())?N.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(t,o);return this.ns(t,s,r,i)?N.resolve(null):(Hu()<=De.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xu(t)),this.rs(e,s,t,function P2(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=oe.fromTimestamp(1e9===r?new Ze(t+1,0):new Ze(t,r));return new gr(i,J.empty(),e)}(i,-1)).next(a=>a))})}ts(e,t){let r=new Xe(vU(e));return t.forEach((i,o)=>{ih(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Hu()<=De.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",Xu(t)),this.Ji.getDocumentsMatchingQuery(e,t,gr.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}class Gae{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ct(pe),this._s=new eo(o=>Hs(o),nh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NB(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function FB(n,e){return eD.apply(this,arguments)}function eD(){return(eD=I(function*(n,e){const t=Q(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=ye();for(const c of i){s.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of o){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return t.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function LB(n){const e=Q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function Kae(n,e){const t=Q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dc(n,e,t){return tD.apply(this,arguments)}function tD(){return(tD=I(function*(n,e,t){const r=Q(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Lo(s))throw s;z("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function qm(n,e,t){const r=Q(n);let i=oe.min(),o=ye();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,d){const h=Q(u),p=h._s.get(d);return void 0!==p?N.resolve(h.os.get(p)):h.Ur.getTargetData(c,d)}(r,s,An(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:oe.min(),t?o:ye())).next(a=>(function $B(n,e,t){let r=n.us.get(e)||oe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}(r,function yU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),a),{documents:a,Ts:o})))}class sD{constructor(){this.activeTargetIds=function PT(){return Qse}()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GB{constructor(){this.so=new sD,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new sD,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Jae{_o(e){}shutdown(){}}class qB{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Qm=null;function uD(){return null===Qm?Qm=268435456+Math.round(2147483648*Math.random()):Qm++,"0x"+Qm.toString(16)}const Zae={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Xae{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Pn="WebChannelConnection";class eue extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){const a=uD(),u=this.xo(t,r.toUriEncodedString());z("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,o,s),this.No(t,u,c,i).then(d=>(z("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Pr("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+zu,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){return`${this.Do}/v1/${r}:${Zae[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const o=uD();return new Promise((s,a)=>{const u=new v2;u.setWithCredentials(!0),u.listenOnce(I2.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case _m.NO_ERROR:const d=u.getResponseJson();z(Pn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case _m.TIMEOUT:z(Pn,`RPC '${e}' ${o} timed out`),a(new H(V.DEADLINE_EXCEEDED,"Request time out"));break;case _m.HTTP_ERROR:const h=u.getStatus();if(z(Pn,`RPC '${e}' ${o} failed with status:`,h,"response text:",u.getResponseText()),h>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p?.error;if(m&&m.status&&m.message){const _=function(b){const D=b.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(D)>=0?D:V.UNKNOWN}(m.status);a(new H(_,m.message))}else a(new H(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new H(V.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{z(Pn,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);z(Pn,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",c,r,15)})}Bo(e,t,r){const i=uD(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=w2(),a=b2(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const d=o.join("");z(Pn,`Creating RPC '${e}' stream ${i}: ${d}`,u);const h=s.createWebChannel(d,u);let p=!1,m=!1;const _=new Xae({Io:b=>{m?z(Pn,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(p||(z(Pn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),z(Pn,`RPC '${e}' stream ${i} sending:`,b),h.send(b))},To:()=>h.close()}),v=(b,D,S)=>{b.listen(D,B=>{try{S(B)}catch(q){setTimeout(()=>{throw q},0)}})};return v(h,qd.EventType.OPEN,()=>{m||(z(Pn,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),v(h,qd.EventType.CLOSE,()=>{m||(m=!0,z(Pn,`RPC '${e}' stream ${i} transport closed`),_.So())}),v(h,qd.EventType.ERROR,b=>{m||(m=!0,Pr(Pn,`RPC '${e}' stream ${i} transport errored:`,b),_.So(new H(V.UNAVAILABLE,"The operation could not be completed")))}),v(h,qd.EventType.MESSAGE,b=>{var D;if(!m){const S=b.data[0];ie(!!S);const q=S.error||(null===(D=S[0])||void 0===D?void 0:D.error);if(q){z(Pn,`RPC '${e}' stream ${i} received error:`,q);const Z=q.status;let ne=function(w){const A=Gt[w];if(void 0!==A)return FU(A)}(Z),T=q.message;void 0===ne&&(ne=V.INTERNAL,T="Unknown error status: "+Z+" with message "+q.message),m=!0,_.So(new H(ne,T)),h.close()}else z(Pn,`RPC '${e}' stream ${i} received:`,S),_.bo(S)}}),v(a,E2.STAT_EVENT,b=>{b.stat===fT.PROXY?z(Pn,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===fT.NOPROXY&&z(Pn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function Ym(){return typeof document<"u"?document:null}function Eh(n){return new uae(n,!0)}class cD{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class KB{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new cD(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return I(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return I(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return I(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===V.RESOURCE_EXHAUSTED?(Ft(t.toString()),Ft("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===V.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new H(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go(I(function*(){e.state=0,e.start()}))}I_(e){return z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tue extends KB{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function dae(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:te(),i=e.targetChange.targetIds||[],o=function(c,d){return c.useProto3Json?(ie(void 0===d||"string"==typeof d),Dt.fromBase64String(d||"")):(ie(void 0===d||d instanceof Buffer||d instanceof Uint8Array),Dt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const d=void 0===c.code?V.UNKNOWN:FU(c.code);return new H(d,c.message||"")}(s);t=new $U(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=wi(n,r.document.name),o=Lt(r.document.updateTime),s=r.document.createTime?Lt(r.document.createTime):oe.min(),a=new fn({mapValue:{fields:r.document.fields}}),u=gt.newFoundDocument(i,o,s,a);t=new Om(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=wi(n,r.document),o=r.readTime?Lt(r.readTime):oe.min(),s=gt.newNoDocument(i,o);t=new Om([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=wi(n,r.document);t=new Om([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return te();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new nae(i,o);t=new jU(r.targetId,s)}}var c;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return oe.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?oe.min():s.readTime?Lt(s.readTime):oe.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=UT(this.serializer),t.addTarget=function(o,s){let a;const u=s.target;if(a=Am(u)?{documents:XU(o,u)}:{query:km(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=qU(o,s.resumeToken);const c=VT(o,s.expectedCount);null!==c&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(oe.min())>0){a.readTime=ic(o,s.snapshotVersion.toTimestamp());const c=VT(o,s.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function fae(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=UT(this.serializer),t.removeTarget=e,this.a_(t)}}class nue extends KB{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ie(!!e.streamToken),this.lastStreamToken=e.streamToken,ie(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function hae(n,e){return n&&n.length>0?(ie(void 0!==e),n.map(t=>function(i,o){let s=Lt(i.updateTime?i.updateTime:o);return s.isEqual(oe.min())&&(s=Lt(o)),new Xse(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Lt(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=UT(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function fh(n,e){let t;if(e instanceof nc)t={update:JU(n,e.key,e.value)};else if(e instanceof rc)t={delete:hh(n,e.key)};else if(e instanceof to)t={update:JU(n,e.key,e.data),updateMask:_ae(e.fieldMask)};else{if(!(e instanceof MT))return te();t={verify:hh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof ec)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Gs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof tc)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw te()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:cae(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:te()),t;var o}(this.serializer,r))};this.a_(t)}}class rue extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new H(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,LT(t,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(V.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,LT(t,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(V.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class iue{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ft(t),this.D_=!1):z("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class oue{constructor(e,t,r,i,o){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{r.enqueueAndForget(I(function*(){var u;Ko(s)&&(z("RemoteStore","Restarting streams for network reachability change."),yield(u=I(function*(d){const h=Q(d);h.L_.add(4),yield hc(h),h.q_.set("Unknown"),h.L_.delete(4),yield bh(h)}),function c(d){return u.apply(this,arguments)})(s))}))}),this.q_=new iue(r,i)}}function bh(n){return lD.apply(this,arguments)}function lD(){return(lD=I(function*(n){if(Ko(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function hc(n){return dD.apply(this,arguments)}function dD(){return(dD=I(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function Jm(n,e){const t=Q(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),pD(t)?fD(t):gc(t).r_()&&hD(t,e))}function fc(n,e){const t=Q(n),r=gc(t);t.N_.delete(e),r.r_()&&QB(t,e),0===t.N_.size&&(r.r_()?r.o_():Ko(t)&&t.q_.set("Unknown"))}function hD(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gc(n).A_(e)}function QB(n,e){n.Q_.xe(e),gc(n).R_(e)}function fD(n){n.Q_=new iae({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),gc(n).start(),n.q_.v_()}function pD(n){return Ko(n)&&!gc(n).n_()&&n.N_.size>0}function Ko(n){return 0===Q(n).L_.size}function YB(n){n.Q_=void 0}function sue(n){return gD.apply(this,arguments)}function gD(){return(gD=I(function*(n){n.q_.set("Online")})).apply(this,arguments)}function aue(n){return mD.apply(this,arguments)}function mD(){return(mD=I(function*(n){n.N_.forEach((e,t)=>{hD(n,e)})})).apply(this,arguments)}function uue(n,e){return _D.apply(this,arguments)}function _D(){return(_D=I(function*(n,e){YB(n),pD(n)?(n.q_.M_(e),fD(n)):n.q_.set("Unknown")})).apply(this,arguments)}function cue(n,e,t){return yD.apply(this,arguments)}function yD(){return yD=I(function*(n,e,t){if(n.q_.set("Online"),e instanceof $U&&2===e.state&&e.cause)try{yield(r=I(function*(o,s){const a=s.cause;for(const u of s.targetIds)o.N_.has(u)&&(yield o.remoteSyncer.rejectListen(u,a),o.N_.delete(u),o.Q_.removeTarget(u))}),function i(o,s){return r.apply(this,arguments)})(n,e)}catch(r){z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Zm(n,r)}else if(e instanceof Om?n.Q_.Ke(e):e instanceof jU?n.Q_.He(e):n.Q_.We(e),!t.isEqual(oe.min()))try{const r=yield LB(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){const a=o.Q_.rt(s);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=o.N_.get(c);d&&o.N_.set(c,d.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,c)=>{const d=o.N_.get(u);if(!d)return;o.N_.set(u,d.withResumeToken(Dt.EMPTY_BYTE_STRING,d.snapshotVersion)),QB(o,u);const h=new no(d.target,u,c,d.sequenceNumber);hD(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){z("RemoteStore","Failed to raise snapshot:",r),yield Zm(n,r)}var r}),yD.apply(this,arguments)}function Zm(n,e,t){return vD.apply(this,arguments)}function vD(){return(vD=I(function*(n,e,t){if(!Lo(e))throw e;n.L_.add(1),yield hc(n),n.q_.set("Offline"),t||(t=()=>LB(n.localStore)),n.asyncQueue.enqueueRetryable(I(function*(){z("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield bh(n)}))})).apply(this,arguments)}function JB(n,e){return e().catch(t=>Zm(n,t,e))}function pc(n){return ID.apply(this,arguments)}function ID(){return(ID=I(function*(n){const e=Q(n),t=Qo(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;lue(e);)try{const i=yield Kae(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,due(e,i)}catch(i){yield Zm(e,i)}ZB(e)&&XB(e)})).apply(this,arguments)}function lue(n){return Ko(n)&&n.O_.length<10}function due(n,e){n.O_.push(e);const t=Qo(n);t.r_()&&t.V_&&t.m_(e.mutations)}function ZB(n){return Ko(n)&&!Qo(n).n_()&&n.O_.length>0}function XB(n){Qo(n).start()}function hue(n){return ED.apply(this,arguments)}function ED(){return(ED=I(function*(n){Qo(n).p_()})).apply(this,arguments)}function fue(n){return bD.apply(this,arguments)}function bD(){return(bD=I(function*(n){const e=Qo(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function pue(n,e,t){return wD.apply(this,arguments)}function wD(){return(wD=I(function*(n,e,t){const r=n.O_.shift(),i=NT.from(r,e,t);yield JB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield pc(n)})).apply(this,arguments)}function gue(n,e){return CD.apply(this,arguments)}function CD(){return CD=I(function*(n,e){var t;e&&Qo(n).V_&&(yield(t=I(function*(i,o){if(function VU(n){switch(n){default:return te();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}(a=o.code)&&a!==V.ABORTED){const s=i.O_.shift();Qo(i).s_(),yield JB(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield pc(i)}var a}),function r(i,o){return t.apply(this,arguments)})(n,e)),ZB(n)&&XB(n)}),CD.apply(this,arguments)}function ej(n,e){return TD.apply(this,arguments)}function TD(){return(TD=I(function*(n,e){const t=Q(n);t.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");const r=Ko(t);t.L_.add(3),yield hc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield bh(t)})).apply(this,arguments)}function DD(n,e){return AD.apply(this,arguments)}function AD(){return(AD=I(function*(n,e){const t=Q(n);e?(t.L_.delete(2),yield bh(t)):e||(t.L_.add(2),yield hc(t),t.q_.set("Unknown"))})).apply(this,arguments)}function gc(n){return n.K_||(n.K_=function(t,r,i){const o=Q(t);return o.w_(),new tue(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:sue.bind(null,n),Ro:aue.bind(null,n),mo:uue.bind(null,n),d_:cue.bind(null,n)}),n.B_.push(function(){var e=I(function*(t){t?(n.K_.s_(),pD(n)?fD(n):n.q_.set("Unknown")):(yield n.K_.stop(),YB(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function Qo(n){return n.U_||(n.U_=function(t,r,i){const o=Q(t);return o.w_(),new nue(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:hue.bind(null,n),mo:gue.bind(null,n),f_:fue.bind(null,n),g_:pue.bind(null,n)}),n.B_.push(function(){var e=I(function*(t){t?(n.U_.s_(),yield pc(n)):(yield n.U_.stop(),n.O_.length>0&&(z("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class SD{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new SD(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new H(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mc(n,e){if(Ft("AsyncQueue",`${e}: ${n}`),Lo(n))return new H(V.UNAVAILABLE,`${e}: ${n}`);throw n}class _c{constructor(e){this.comparator=e?(t,r)=>e(t,r)||J.comparator(t.key,r.key):(t,r)=>J.comparator(t.key,r.key),this.keyedMap=oh(),this.sortedSet=new ct(this.comparator)}static emptySet(e){return new _c(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _c)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new _c;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class tj{constructor(){this.W_=new ct(J.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class yc{constructor(e,t,r,i,o,s,a,u,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new yc(e,t,_c.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class mue{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class _ue{constructor(){this.queries=nj(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=Q(t),o=i.queries;i.queries=nj(),o.forEach((s,a)=>{for(const u of a.j_)u.onError(r)})}(this,new H(V.ABORTED,"Firestore shutting down"))}}function nj(){return new eo(n=>_U(n),rh)}function PD(n,e){return RD.apply(this,arguments)}function RD(){return(RD=I(function*(n,e){const t=Q(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new mue,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){const a=mc(s,`Initialization of query '${Xu(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&ND(t)})).apply(this,arguments)}function MD(n,e){return xD.apply(this,arguments)}function xD(){return(xD=I(function*(n,e){const t=Q(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),0===o.j_.length?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function yue(n,e){const t=Q(n);let r=!1;for(const i of e){const s=t.queries.get(i.query);if(s){for(const a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&ND(t)}function vue(n,e,t){const r=Q(n),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(t);r.queries.delete(e)}function ND(n){n.Y_.forEach(e=>{e.next()})}var OD,rj;(rj=OD||(OD={})).ea="default",rj.Cache="cache";class kD{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new yc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=yc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==OD.Cache}}class sj{constructor(e){this.key=e}}class aj{constructor(e){this.key=e}}class uj{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ye(),this.mutatedKeys=ye(),this.Aa=vU(e),this.Ra=new _c(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new tj,i=t?t.Ra:this.Ra;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const p=i.get(d),m=ih(this.query,h)?h:null,_=!!p&&this.mutatedKeys.has(p.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let b=!1;p&&m?p.data.isEqual(m.data)?_!==v&&(r.track({type:3,doc:m}),b=!0):this.ga(p,m)||(r.track({type:2,doc:m}),b=!0,(u&&this.Aa(m,u)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),b=!0):p&&!m&&(r.track({type:1,doc:p}),b=!0,(u||c)&&(a=!0)),b&&(m?(s=s.add(m),o=v?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const d="F"===this.query.limitType?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((d,h)=>function(m,_){const v=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return v(m)-v(_)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],u=0===this.da.size&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,0!==s.length||c?{snapshot:new yc(this.query,e.Ra,o,s,e.mutatedKeys,0===u,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new tj,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ye(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new aj(r))}),this.da.forEach(r=>{e.has(r)||t.push(new sj(r))}),t}ba(e){this.Ta=e.Ts,this.da=ye();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return yc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class bue{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class wue{constructor(e){this.key=e,this.va=!1}}class Cue{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new eo(a=>_U(a),rh),this.Ma=new Map,this.xa=new Set,this.Oa=new ct(J.comparator),this.Na=new Map,this.La=new KT,this.Ba={},this.ka=new Map,this.qa=Zs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function Tue(n,e){return VD.apply(this,arguments)}function VD(){return(VD=I(function*(n,e,t=!0){const r=Xm(n);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield cj(r,e,t,!0),i})).apply(this,arguments)}function Due(n,e){return FD.apply(this,arguments)}function FD(){return(FD=I(function*(n,e){const t=Xm(n);yield cj(t,e,!0,!1)})).apply(this,arguments)}function cj(n,e,t,r){return LD.apply(this,arguments)}function LD(){return(LD=I(function*(n,e,t,r){const i=yield function lc(n,e){const t=Q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,N.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new no(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}(n.localStore,An(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t);let a;return r&&(a=yield function UD(n,e,t,r,i){return BD.apply(this,arguments)}(n,e,o,"current"===s,i.resumeToken)),n.isPrimaryClient&&t&&Jm(n.remoteStore,i),a})).apply(this,arguments)}function BD(){return BD=I(function*(n,e,t,r,i){n.Ka=(h,p,m)=>{return(_=I(function*(b,D,S,B){let q=D.view.ma(S);q.ns&&(q=yield qm(b.localStore,D.query,!1).then(({documents:E})=>D.view.ma(E,q)));const Z=B&&B.targetChanges.get(D.targetId),ne=B&&null!=B.targetMismatches.get(D.targetId),T=D.view.applyChanges(q,b.isPrimaryClient,Z,ne);return JD(b,D.targetId,T.wa),T.snapshot}),function v(b,D,S,B){return _.apply(this,arguments)})(n,h,p,m);var _};const o=yield qm(n.localStore,e,!0),s=new uj(e,o.Ts),a=s.ma(o.documents),u=dh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),c=s.applyChanges(a,n.isPrimaryClient,u);JD(n,t,c.wa);const d=new bue(e,t,s);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}),BD.apply(this,arguments)}function Aue(n,e,t){return jD.apply(this,arguments)}function jD(){return(jD=I(function*(n,e,t){const r=Q(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!rh(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield dc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&fc(r.remoteStore,i.targetId),vc(r,i.targetId)}).catch(Fo))):(vc(r,i.targetId),yield dc(r.localStore,i.targetId,!0))})).apply(this,arguments)}function Sue(n,e){return $D.apply(this,arguments)}function $D(){return($D=I(function*(n,e){const t=Q(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),fc(t.remoteStore,r.targetId))})).apply(this,arguments)}function zD(){return(zD=I(function*(n,e,t){const r=function c0(n){const e=Q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Mue.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xue.bind(null,e),e}(n);try{const i=yield function(s,a){const u=Q(s),c=Ze.now(),d=a.reduce((m,_)=>m.add(_.key),ye());let h,p;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=tr(),v=ye();return u.cs.getEntries(m,d).next(b=>{_=b,_.forEach((D,S)=>{S.isValidDocument()||(v=v.add(D))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,_)).next(b=>{h=b;const D=[];for(const S of a){const B=tae(S,h.get(S.key).overlayedDocument);null!=B&&D.push(new to(S.key,B,tU(B.value.mapValue),Et.exists(!0)))}return u.mutationQueue.addMutationBatch(m,c,D,a)}).next(b=>{p=b;const D=b.applyToLocalDocumentSet(h,v);return u.documentOverlayCache.saveOverlays(m,b.batchId,D)})}).then(()=>({batchId:p.batchId,changes:EU(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let c=s.Ba[s.currentUser.toKey()];c||(c=new ct(pe)),c=c.insert(a,u),s.Ba[s.currentUser.toKey()]=c}(r,i.batchId,t),yield ro(r,i.changes),yield pc(r.remoteStore)}catch(i){const o=mc(i,"Failed to persist write");t.reject(o)}})).apply(this,arguments)}function lj(n,e){return HD.apply(this,arguments)}function HD(){return(HD=I(function*(n,e){const t=Q(n);try{const r=yield function Wae(n,e){const t=Q(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((d,h)=>{const p=i.get(h);if(!p)return;a.push(t.Ur.removeMatchingKeys(o,d.removedDocuments,h).next(()=>t.Ur.addMatchingKeys(o,d.addedDocuments,h)));let m=p.withSequenceNumber(o.currentSequenceNumber);var v,b,D;null!==e.targetMismatches.get(h)?m=m.withResumeToken(Dt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(h,m),b=m,D=d,(0===(v=p).resumeToken.approximateByteSize()||b.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8||D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(o,m))});let u=tr(),c=ye();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(function UB(n,e,t){let r=ye(),i=ye();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=tr();return t.forEach((a,u)=>{const c=o.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(oe.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:s,Is:i}})}(o,s,e.documentUpdates).next(d=>{u=d.Ps,c=d.Is})),!r.isEqual(oe.min())){const d=t.Ur.getLastRemoteSnapshotVersion(o).next(h=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return N.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(t.os=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const s=t.Na.get(o);s&&(ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?ie(s.va):i.removedDocuments.size>0&&(ie(s.va),s.va=!1))}),yield ro(t,r,e)}catch(r){yield Fo(r)}})).apply(this,arguments)}function dj(n,e,t){const r=Q(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((o,s)=>{const a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=Q(s);u.onlineState=a;let c=!1;u.queries.forEach((d,h)=>{for(const p of h.j_)p.Z_(a)&&(c=!0)}),c&&ND(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Rue(n,e,t){return GD.apply(this,arguments)}function GD(){return(GD=I(function*(n,e,t){const r=Q(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new ct(J.comparator);s=s.insert(o,gt.newNoDocument(o,oe.min()));const a=ye().add(o),u=new lh(oe.min(),new Map,new ct(pe),s,a);yield lj(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),ZD(r)}else yield dc(r.localStore,e,!1).then(()=>vc(r,e,t)).catch(Fo)})).apply(this,arguments)}function Mue(n,e){return qD.apply(this,arguments)}function qD(){return(qD=I(function*(n,e){const t=Q(n),r=e.batch.batchId;try{const i=yield function qae(n,e){const t=Q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,d){const h=c.batch,p=h.keys();let m=N.resolve();return p.forEach(_=>{m=m.next(()=>d.getEntry(u,_)).next(v=>{const b=c.docVersions.get(_);ie(null!==b),v.version.compareTo(b)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),d.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(u,h))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ye();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);YD(t,r,null),QD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ro(t,i)}catch(i){yield Fo(i)}})).apply(this,arguments)}function xue(n,e,t){return WD.apply(this,arguments)}function WD(){return(WD=I(function*(n,e,t){const r=Q(n);try{const i=yield function(s,a){const u=Q(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,a).next(h=>(ie(null!==h),d=h.keys(),u.mutationQueue.removeMutationBatch(c,h))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);YD(r,e,t),QD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ro(r,i)}catch(i){yield Fo(i)}})).apply(this,arguments)}function QD(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function YD(n,e,t){const r=Q(n);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function vc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||hj(n,r)})}function hj(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(fc(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),ZD(n))}function JD(n,e,t){for(const r of t)r instanceof sj?(n.La.addReference(r.key,e),Oue(n,r)):r instanceof aj?(z("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||hj(n,r.key)):te()}function Oue(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(z("SyncEngine","New document in limbo: "+t),n.xa.add(r),ZD(n))}function ZD(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new J(Ae.fromString(e)),r=n.qa.next();n.Na.set(r,new wue(t)),n.Oa=n.Oa.insert(t,r),Jm(n.remoteStore,new no(An(Ju(t.path)),r,"TargetPurposeLimboResolution",mr.oe))}}function ro(n,e,t){return XD.apply(this,arguments)}function XD(){return XD=I(function*(n,e,t){const r=Q(n),i=[],o=[],s=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(c=>{var d;if((c||t)&&r.isPrimaryClient){const h=c?!c.fromCache:null===(d=t?.targetChanges.get(u.targetId))||void 0===d?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){i.push(c);const h=XT.Wi(u.targetId,c);o.push(h)}}))}),yield Promise.all(s),r.Ca.d_(i),yield(a=I(function*(c,d){const h=Q(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>N.forEach(d,m=>N.forEach(m.$i,_=>h.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>N.forEach(m.Ui,_=>h.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!Lo(p))throw p;z("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const m=p.targetId;if(!p.fromCache){const _=h.os.get(m),b=_.withLastLimboFreeSnapshotVersion(_.snapshotVersion);h.os=h.os.insert(m,b)}}}),function u(c,d){return a.apply(this,arguments)})(r.localStore,o))}),XD.apply(this,arguments)}function kue(n,e){return e0.apply(this,arguments)}function e0(){return(e0=I(function*(n,e){const t=Q(n);if(!t.currentUser.isEqual(e)){z("SyncEngine","User change. New user:",e.toKey());const r=yield FB(t.localStore,e);t.currentUser=e,(o=t).ka.forEach(a=>{a.forEach(u=>{u.reject(new H(V.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ro(t,r.hs)}var o})).apply(this,arguments)}function Vue(n,e){const t=Q(n),r=t.Na.get(e);if(r&&r.va)return ye().add(r.key);{let i=ye();const o=t.Ma.get(e);if(!o)return i;for(const s of o){const a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function Xm(n){const e=Q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=lj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vue.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Rue.bind(null,e),e.Ca.d_=yue.bind(null,e.eventManager),e.Ca.$a=vue.bind(null,e.eventManager),e}let Ic=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return I(function*(){r.serializer=Eh(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return function VB(n,e,t,r){return new Gae(n,e,t,r)}(this.persistence,new kB,t.initialUser,this.serializer)}Ga(t){return new QT(zm.Zr,this.serializer)}Wa(t){return new GB}terminate(){var t=this;return I(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})(),Ec=(()=>{class n{initialize(t,r){var i=this;return I(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=o=>dj(i.syncEngine,o,1),i.remoteStore.remoteSyncer.handleCredentialChange=kue.bind(null,i.syncEngine),yield DD(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new _ue}createDatastore(t){const r=Eh(t.databaseInfo.databaseId),i=new eue(t.databaseInfo);return new rue(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,o=this.datastore,s=t.asyncQueue,a=r=>dj(this.syncEngine,r,0),u=qB.D()?new qB:new Jae,new oue(i,o,s,a,u);var i,o,s,a,u}createSyncEngine(t,r){return function(o,s,a,u,c,d,h){const p=new Cue(o,s,a,u,c,d);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return I(function*(){var r,i,o;yield(o=I(function*(a){const u=Q(a);z("RemoteStore","RemoteStore shutting down."),u.L_.add(5),yield hc(u),u.k_.shutdown(),u.q_.set("Unknown")}),function s(a){return o.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();class e_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ft("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Que{constructor(e,t,r,i,o){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=on.UNAUTHENTICATED,this.clientId=A2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,function(){var a=I(function*(u){z("FirestoreClient","Received user=",u.uid),yield s.authCredentialListener(u),s.user=u});return function(u){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(z("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(I(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=mc(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function d0(n,e){return h0.apply(this,arguments)}function h0(){return h0=I(function*(n,e){n.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=I(function*(o){r.isEqual(o)||(yield FB(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),h0.apply(this,arguments)}function _j(n,e){return f0.apply(this,arguments)}function f0(){return(f0=I(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function p0(n){return g0.apply(this,arguments)}(n);z("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ej(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>ej(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function g0(){return(g0=I(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){z("FirestoreClient","Using user provided OfflineComponentProvider");try{yield d0(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Pr("Error using user provided cache. Falling back to memory cache: "+e),yield d0(n,new Ic)}}else z("FirestoreClient","Using default OfflineComponentProvider"),yield d0(n,new Ic);var i;return n._offlineComponents})).apply(this,arguments)}function t_(n){return m0.apply(this,arguments)}function m0(){return(m0=I(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(z("FirestoreClient","Using user provided OnlineComponentProvider"),yield _j(n,n._uninitializedComponentsProvider._online)):(z("FirestoreClient","Using default OnlineComponentProvider"),yield _j(n,new Ec))),n._onlineComponents})).apply(this,arguments)}function wc(n){return y0.apply(this,arguments)}function y0(){return(y0=I(function*(n){const e=yield t_(n),t=e.eventManager;return t.onListen=Tue.bind(null,e.syncEngine),t.onUnlisten=Aue.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Due.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Sue.bind(null,e.syncEngine),t})).apply(this,arguments)}function wj(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const Cj=new Map;function v0(n,e,t){if(!t)throw new H(V.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Tj(n){if(!J.isDocumentKey(n))throw new H(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Dj(n){if(J.isDocumentKey(n))throw new H(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function n_(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":te()}function Te(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new H(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=n_(n);throw new H(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class Sj{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new H(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new H(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function ace(n,e,t,r){if(!0===e&&!0===r)throw new H(V.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=wj(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wh{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sj({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new H(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sj(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new ese;switch(r.type){case"firstParty":return new ise(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return I(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Cj.get(t);r&&(z("ComponentProvider","Removing Datastore"),Cj.delete(t),r.terminate())}(this),Promise.resolve()}}class pn{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pn(this.firestore,e,this._query)}}class Ut{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}}class Ci extends pn{constructor(e,t,r){super(e,t,Ju(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new J(e))}withConverter(e){return new Ci(this.firestore,e,this._path)}}function cce(n,e,...t){if(n=kt(n),v0("collection","path",e),n instanceof wh){const r=Ae.fromString(e,...t);return Dj(r),new Ci(n,null,r)}{if(!(n instanceof Ut||n instanceof Ci))throw new H(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ae.fromString(e,...t));return Dj(r),new Ci(n.firestore,null,r)}}function Pj(n,e,...t){if(n=kt(n),1===arguments.length&&(e=A2.newId()),v0("doc","path",e),n instanceof wh){const r=Ae.fromString(e,...t);return Tj(r),new Ut(n,null,new J(r))}{if(!(n instanceof Ut||n instanceof Ci))throw new H(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ae.fromString(e,...t));return Tj(r),new Ut(n.firestore,n instanceof Ci?n.converter:null,new J(r))}}class Mj{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new cD(this,"async_queue_retry"),this.Vu=()=>{const r=Ym();r&&z("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Ym();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Ym();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new sn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return I(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!Lo(t))throw t;z("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,Ft("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=SD.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&te()}verifyOperationInProgress(){}wu(){var e=this;return I(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function I0(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(n)}class tt extends wh{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Mj,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return I(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new Mj(t),e._firestoreClient=void 0,yield t}})()}}function dce(n,e){const r="string"==typeof n?n:e||"(default)",i=Jg("object"==typeof n?n:Kb(),"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(n=>{const e=SF("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})();o&&function uce(n,e,t,r={}){var i;const o=(n=Te(n,wh))._getSettings(),s=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&Pr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=on.MOCK_USER;else{a=function tte(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Gg(JSON.stringify({alg:"none",type:"JWT"})),Gg(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new H(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new on(c)}n._authCredentials=new tse(new T2(a,u))}}(i,...o)}return i}function wt(n){if(n._terminated)throw new H(V.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||function xj(n){var e,t,r;const i=n._freezeSettings(),o=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Ose(n._databaseId,u,n._persistenceKey,(d=i).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,wj(d.experimentalLongPollingOptions),d.useFetchStreams));var u,d;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Que(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}(n),n._firestoreClient}class ea{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ea(Dt.fromBase64String(e))}catch(t){throw new H(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ea(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ta{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new H(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cc{constructor(e){this._methodName=e}}class b0{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new H(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new H(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}}class r_{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}const fce=/^__.*__$/;class pce{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new to(e,this.data,this.fieldMask,t,this.fieldTransforms):new nc(e,this.data,t,this.fieldTransforms)}}class Oj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new to(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function kj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class i_{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new i_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return a_(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(kj(this.Cu)&&fce.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class gce{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Eh(e)}Qu(e,t,r,i=!1){return new i_({Cu:e,methodName:t,qu:r,path:vt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function na(n){const e=n._freezeSettings(),t=Eh(n._databaseId);return new gce(n._databaseId,!!e.ignoreUndefinedProperties,t)}function o_(n,e,t,r,i,o={}){const s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);P0("Data must be an object, but it was:",s,r);const a=Lj(r,s);let u,c;if(o.merge)u=new er(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const h of o.mergeFields){const p=Dh(e,h,t);if(!s.contains(p))throw new H(V.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Bj(d,p)||d.push(p)}u=new er(d),c=s.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=s.fieldTransforms;return new pce(new fn(a),u,c)}class Th extends Cc{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Th}}class D0 extends Cc{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new tc(e.serializer,CU(e.serializer,this.$u));return new ah(e.path,t)}isEqual(e){return e instanceof D0&&this.$u===e.$u}}function ra(n,e){if(Uj(n=kt(n)))return P0("Unsupported field value:",e,n),Lj(n,e);if(n instanceof Cc)return function(r,i){if(!kj(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=ra(a,i.Lu(s));null==u&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if(null===(r=kt(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return CU(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Ze.fromDate(r);return{timestampValue:ic(i.serializer,o)}}if(r instanceof Ze){const o=new Ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ic(i.serializer,o)}}if(r instanceof b0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ea)return{bytesValue:qU(i.serializer,r._byteString)};if(r instanceof Ut){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:FT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof r_)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(u=>{if("number"!=typeof u)throw a.Bu("VectorValues must only contain numeric values.");return RT(a.serializer,u)})}}}}};var a;throw i.Bu(`Unsupported field value: ${n_(r)}`)}(n,e)}function Lj(n,e){const t={};return H2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Uo(n,(r,i)=>{const o=ra(i,e.Mu(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function Uj(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ze||n instanceof b0||n instanceof ea||n instanceof Ut||n instanceof Cc||n instanceof r_)}function P0(n,e,t){if(!Uj(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=n_(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function Dh(n,e,t){if((e=kt(e))instanceof ta)return e._internalPath;if("string"==typeof e)return s_(n,e);throw a_("Field path arguments must be of type string or ",n,!1,void 0,t)}const mce=new RegExp("[~\\*/\\[\\]]");function s_(n,e,t){if(e.search(mce)>=0)throw a_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ta(...e.split("."))._internalPath}catch{throw a_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function a_(n,e,t,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new H(V.INVALID_ARGUMENT,a+n+u)}function Bj(n,e){return n.some(t=>t.isEqual(e))}class Ah{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _ce(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(u_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _ce extends Ah{data(){return super.data()}}function u_(n,e){return"string"==typeof e?s_(n,e):e instanceof ta?e._internalPath:e._delegate._internalPath}function jj(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new H(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class R0{}class Sh extends R0{}function yce(n,e,...t){let r=[];e instanceof R0&&r.push(e),r=r.concat(t),function(o){const s=o.filter(u=>u instanceof Tc).length,a=o.filter(u=>u instanceof Ph).length;if(s>1||s>0&&a>0)throw new H(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Ph extends Sh{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ph(e,t,r)}_apply(e){const t=this._parse(e);return Gj(e._query,t),new pn(e.firestore,e.converter,ST(e._query,t))}_parse(e){const t=na(e.firestore);return function(o,s,a,u,c,d,h){let p;if(c.isKeyField()){if("array-contains"===d||"array-contains-any"===d)throw new H(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if("in"===d||"not-in"===d){Hj(h,d);const m=[];for(const _ of h)m.push(zj(u,o,_));p={arrayValue:{values:m}}}else p=zj(u,o,h)}else"in"!==d&&"not-in"!==d&&"array-contains-any"!==d||Hj(h,d),p=function Fj(n,e,t,r=!1){return ra(t,n.Qu(r?4:3,e))}(a,"where",h,"in"===d||"not-in"===d);return Se.create(c,d,p)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function vce(n,e,t){const r=e,i=u_("where",n);return Ph._create(i,r,t)}class Tc extends R0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Tc(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Ke.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)Gj(s,u),s=ST(s,u)}(e._query,t),new pn(e.firestore,e.converter,ST(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class M0 extends Sh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new M0(e,t)}_apply(e){const t=function(i,o,s){if(null!==i.startAt)throw new H(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new H(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new th(o,s)}(e._query,this._field,this._direction);return new pn(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Xi(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function Ice(n,e="asc"){const t=e,r=u_("orderBy",n);return M0._create(r,t)}function zj(n,e,t){if("string"==typeof(t=kt(t))){if(""===t)throw new H(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AT(e)&&-1!==t.indexOf("/"))throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ae.fromString(t));if(!J.isDocumentKey(r))throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zs(n,new J(r))}if(t instanceof Ut)return zs(n,t._key);throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${n_(t)}.`)}function Hj(n,e){if(!Array.isArray(n)||0===n.length)throw new H(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Gj(n,e){const t=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new H(V.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Wj{convertValue(e,t="none"){switch(jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Uo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;const o=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(s=>It(s.doubleValue));return new r_(o)}convertGeoPoint(e){return new b0(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=bm(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jd(e));default:return null}}convertTimestamp(e){const t=Ji(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ae.fromString(e);ie(iB(r));const i=new $s(r.get(1),r.get(3)),o=new J(r.popFirst(5));return i.isEqual(t)||Ft(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function h_(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class ia{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dc extends Ah{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new f_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(u_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class f_ extends Dc{data(e={}){return super.data(e)}}class Ac{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ia(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new f_(this._firestore,this._userDataWriter,r.key,r,new ia(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new H(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new f_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ia(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const u=new f_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ia(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return 0!==a.type&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:wce(a.type),doc:u,oldIndex:c,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function wce(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}function Cce(n){n=Te(n,Ut);const e=Te(n.firestore,tt);return function Ej(n,e,t={}){const r=new sn;return n.asyncQueue.enqueueAndForget(I(function*(){return function(o,s,a,u,c){const d=new e_({next:p=>{d.Za(),s.enqueueAndForget(()=>MD(o,h));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new H(V.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&u&&"server"===u.source?c.reject(new H(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new kD(Ju(a.path),d,{includeMetadataChanges:!0,_a:!0});return PD(o,h)}(yield wc(n),n.asyncQueue,e,t,r)})),r.promise}(wt(e),n._key).then(t=>x0(e,n,t))}class Yo extends Wj{constructor(e){super(),this.firestore=e}convertBytes(e){return new ea(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,t)}}function Tce(n){n=Te(n,pn);const e=Te(n.firestore,tt),t=wt(e),r=new Yo(e);return jj(n._query),function bj(n,e,t={}){const r=new sn;return n.asyncQueue.enqueueAndForget(I(function*(){return function(o,s,a,u,c){const d=new e_({next:p=>{d.Za(),s.enqueueAndForget(()=>MD(o,h)),p.fromCache&&"server"===u.source?c.reject(new H(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new kD(a,d,{includeMetadataChanges:!0,_a:!0});return PD(o,h)}(yield wc(n),n.asyncQueue,e,t,r)})),r.promise}(t,n._query).then(i=>new Ac(e,r,n,i))}function Dce(n,e,t){n=Te(n,Ut);const r=Te(n.firestore,tt),i=h_(n.converter,e,t);return Rh(r,[o_(na(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Et.none())])}function Ace(n,e,t,...r){n=Te(n,Ut);const i=Te(n.firestore,tt),o=na(i);let s;return s="string"==typeof(e=kt(e))||e instanceof ta?function S0(n,e,t,r,i,o){const s=n.Qu(1,e,t),a=[Dh(e,r,t)],u=[i];if(o.length%2!=0)throw new H(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<o.length;p+=2)a.push(Dh(e,o[p])),u.push(o[p+1]);const c=[],d=fn.empty();for(let p=a.length-1;p>=0;--p)if(!Bj(c,a[p])){const m=a[p];let _=u[p];_=kt(_);const v=s.Nu(m);if(_ instanceof Th)c.push(m);else{const b=ra(_,v);null!=b&&(c.push(m),d.set(m,b))}}const h=new er(c);return new Oj(d,h,s.fieldTransforms)}(o,"updateDoc",n._key,e,t,r):function A0(n,e,t,r){const i=n.Qu(1,e,t);P0("Data must be an object, but it was:",i,r);const o=[],s=fn.empty();Uo(r,(u,c)=>{const d=s_(e,u,t);c=kt(c);const h=i.Nu(d);if(c instanceof Th)o.push(d);else{const p=ra(c,h);null!=p&&(o.push(d),s.set(d,p))}});const a=new er(o);return new Oj(s,a,i.fieldTransforms)}(o,"updateDoc",n._key,e),Rh(i,[s.toMutation(n._key,Et.exists(!0))])}function Sce(n){return Rh(Te(n.firestore,tt),[new rc(n._key,Et.none())])}function Pce(n,e){const t=Te(n.firestore,tt),r=Pj(n),i=h_(n.converter,e);return Rh(t,[o_(na(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Et.exists(!1))]).then(()=>r)}function Rce(n,...e){var t,r,i;n=kt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof e[s]||I0(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(I0(e[s])){const h=e[s];e[s]=null===(t=h.next)||void 0===t?void 0:t.bind(h),e[s+1]=null===(r=h.error)||void 0===r?void 0:r.bind(h),e[s+2]=null===(i=h.complete)||void 0===i?void 0:i.bind(h)}let u,c,d;if(n instanceof Ut)c=Te(n.firestore,tt),d=Ju(n._key.path),u={next:h=>{e[s]&&e[s](x0(c,n,h))},error:e[s+1],complete:e[s+2]};else{const h=Te(n,pn);c=Te(h.firestore,tt),d=h._query;const p=new Yo(c);u={next:m=>{e[s]&&e[s](new Ac(c,p,h,m))},error:e[s+1],complete:e[s+2]},jj(n._query)}return function(p,m,_,v){const b=new e_(v),D=new kD(m,b,_);return p.asyncQueue.enqueueAndForget(I(function*(){return PD(yield wc(p),D)})),()=>{b.Za(),p.asyncQueue.enqueueAndForget(I(function*(){return MD(yield wc(p),D)}))}}(wt(c),d,a,u)}function Rh(n,e){return function(r,i){const o=new sn;return r.asyncQueue.enqueueAndForget(I(function*(){return function Pue(n,e,t){return zD.apply(this,arguments)}(yield function _0(n){return t_(n).then(e=>e.syncEngine)}(r),i,o)})),o.promise}(wt(n),e)}function x0(n,e,t){const r=t.docs.get(e._key),i=new Yo(n);return new Dc(n,i,e._key,r,new ia(t.hasPendingWrites,t.fromCache),e.converter)}function $ce(n){return new D0("increment",n)}!function(e,t=!0){zu=Vu,ku(new xs("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new tt(new nse(r.getProvider("auth-internal")),new ose(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new H(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $s(c.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Zn(C2,"4.7.3",e),Zn(C2,"4.7.3","esm2017")}();class oa{constructor(e){return e}}const Jj="firestore",O0=new ee("angularfire2.firestore-instances");function qce(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new oa(r)}}const Wce={provide:class Hce{constructor(){return Xb(Jj)}},deps:[[new ir,O0]]},Kce={provide:oa,useFactory:function Gce(n,e){const t=eL(Jj,n,e);return t&&new oa(t)},deps:[[new ir,O0],Pd]};function Qce(n,...e){return Zn("angularfire",Xg.full,"fst"),us([Kce,Wce,{provide:O0,useFactory:qce(n),multi:!0,deps:[Ne,tn,ew,tw,[new ir,g2],[new ir,tL],...e]}])}const Zj=zt(Pce,!0),Mh=zt(cce,!0),k0=zt(Sce,!0),_r=zt(Pj,!0),g_=zt(Cce,!0),Xj=zt(Tce,!0),Yce=zt(dce,!0),m_=zt($ce,!0),Jce=zt(Rce,!0),V0=zt(Ice,!0),F0=zt(yce,!0),__=zt(Dce,!0),sa=zt(Ace,!0),e$=zt(vce,!0);let xh=(()=>{class n{constructor(t){this.firestore=t,this.collectionName="publicaciones"}crearPublicacion(t){const r=Mh(this.firestore,this.collectionName);return ht(Zj(r,t)).pipe(Re(i=>i.id))}obtenerPublicaciones(){const t=Mh(this.firestore,this.collectionName),r=F0(t,V0("fechaCreacion","desc"));return ht(Xj(r)).pipe(Re(i=>i.docs.map(o=>({id:o.id,...o.data(),fechaCreacion:o.data().fechaCreacion instanceof Ze?o.data().fechaCreacion.toDate():new Date(o.data().fechaCreacion)}))))}obtenerPublicacionesPorAutor(t){const r=Mh(this.firestore,this.collectionName),i=F0(r,e$("autorId","==",t),V0("fechaCreacion","desc"));return ht(Xj(i)).pipe(Re(o=>o.docs.map(s=>({id:s.id,...s.data(),fechaCreacion:s.data().fechaCreacion instanceof Ze?s.data().fechaCreacion.toDate():new Date(s.data().fechaCreacion)}))))}obtenerPublicacionPorId(t){const r=_r(this.firestore,this.collectionName,t);return ht(g_(r)).pipe(Re(i=>{if(i.exists()){const o=i.data();return{id:i.id,titulo:o.titulo||"",contenido:o.contenido||"",tipo:o.tipo||"queja",autorId:o.autorId||"",autorNombre:o.autorNombre||"",estado:o.estado||"pendiente",fechaCreacion:o.fechaCreacion instanceof Ze?o.fechaCreacion.toDate():new Date(o.fechaCreacion),votosPositivos:o.votosPositivos??0,votosNegativos:o.votosNegativos??0,totalComentarios:o.totalComentarios??0}}return null}))}actualizarPublicacion(t,r){const i=_r(this.firestore,this.collectionName,t);return ht(sa(i,r))}eliminarPublicacion(t){const r=_r(this.firestore,this.collectionName,t);return ht(k0(r))}static{this.\u0275fac=function(r){return new(r||n)(se(oa))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Rr=function(n){return n.ESTUDIANTE="estudiante",n.PROFESOR="profesor",n.AUTORIDAD="autoridad",n}(Rr||{});let qr=(()=>{class n{constructor(t,r){var i=this;this.auth=t,this.firestore=r,this.user$=Koe(this.auth),this.currentUserSubject=new Hn(null),this.user$.subscribe(function(){var o=I(function*(s){if(s){console.log("Usuario Firebase detectado:",s.uid),console.log("Email de Firebase Auth:",s.email);try{let a=yield i.getUserData(s.uid);if(a){let u=!1;(!a.email||""===a.email.trim())&&(a.email=s.email||"",u=!0,console.log("Email corregido:",a.email)),(!a.nombre||""===a.nombre.trim())&&(a.nombre=s.displayName||s.email?.split("@")[0]||`Usuario_${s.uid.substring(0,6)}`,u=!0,console.log("Nombre corregido:",a.nombre)),u&&(yield sa(_r(i.firestore,"usuarios",s.uid),{email:a.email,nombre:a.nombre}),console.log("Datos del usuario actualizados en Firestore"))}else{console.log("No se encontraron datos del usuario, creando perfil b\xe1sico...");const u=s.displayName||s.email?.split("@")[0]||`Usuario_${s.uid.substring(0,6)}`;a={id:s.uid,email:s.email||"",nombre:u,rol:Rr.ESTUDIANTE,fechaRegistro:new Date},yield __(_r(i.firestore,"usuarios",s.uid),a),console.log("Perfil b\xe1sico creado:",a)}console.log("Datos del usuario finales:",a),i.currentUserSubject.next(a)}catch(a){console.error("Error al cargar datos del usuario:",a);const u=s.displayName||s.email?.split("@")[0]||`Usuario_${s.uid.substring(0,6)}`,c={id:s.uid,email:s.email||"",nombre:u,rol:Rr.ESTUDIANTE,fechaRegistro:new Date};console.log("Usando usuario fallback:",c),i.currentUserSubject.next(c)}}else console.log("No hay usuario autenticado"),i.currentUserSubject.next(null)});return function(s){return o.apply(this,arguments)}}())}login(t,r){var i=this;return I(function*(){try{const o=yield Joe(i.auth,t,r);console.log("Login exitoso:",o.user.uid)}catch(o){throw console.error("Error en login:",o),o}})()}register(t,r,i,o){var s=this;return I(function*(){try{const a=yield Qoe(s.auth,t,r),u=i.trim()||t.split("@")[0]||`Usuario_${a.user.uid.substring(0,6)}`,c={id:a.user.uid,email:t,nombre:u,rol:o,fechaRegistro:new Date};yield __(_r(s.firestore,"usuarios",a.user.uid),c),console.log("Registro exitoso:",a.user.uid,"con nombre:",u)}catch(a){throw console.error("Error en registro:",a),a}})()}actualizarPerfil(t,r){var i=this;return I(function*(){const o=i.auth.currentUser;if(!o)throw new Error("No hay usuario autenticado");try{yield sa(_r(i.firestore,"usuarios",o.uid),{nombre:t.trim(),email:r.trim()});const s=i.currentUserSubject.value;s&&i.currentUserSubject.next({...s,nombre:t.trim(),email:r.trim()}),console.log("Perfil actualizado exitosamente")}catch(s){throw console.error("Error al actualizar perfil:",s),s}})()}logout(){var t=this;return I(function*(){try{yield Zoe(t.auth),t.currentUserSubject.next(null),console.log("Logout exitoso")}catch(r){throw console.error("Error en logout:",r),r}})()}getCurrentUser(){return this.currentUserSubject.asObservable()}getUserData(t){var r=this;return I(function*(){try{const i=yield g_(_r(r.firestore,"usuarios",t));if(i.exists()){const o=i.data();return{id:i.id,email:o.email||"",nombre:o.nombre||"",rol:o.rol||Rr.ESTUDIANTE,fechaRegistro:o.fechaRegistro?.toDate()||new Date}}return null}catch(i){return console.error("Error al obtener datos del usuario:",i),null}})()}isAuthenticated(){return this.currentUserSubject.asObservable().pipe(zr(t=>fe(null!==t)))}getCurrentUserSync(){return this.currentUserSubject.value}reloadUserData(){var t=this;return I(function*(){const r=t.auth.currentUser;if(r){const i=yield t.getUserData(r.uid);t.currentUserSubject.next(i)}})()}static{this.\u0275fac=function(r){return new(r||n)(se(gm),se(oa))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Zce(n,e){1&n&&(R(0,"a",13),k(1," \u{1f680} \xdanete Ahora "),P())}function Xce(n,e){1&n&&(R(0,"a",14),k(1," \u2728 Crear Publicaci\xf3n "),P())}let ele=(()=>{class n{get tiposPublicacion(){return Object.keys(this.estadisticas.publicacionesPorTipo)}constructor(t,r){this.publicacionesService=t,this.authService=r,this.estadisticas={totalPublicaciones:0,totalUsuarios:0,totalVotos:0,totalComentarios:0,publicacionesPorTipo:{}},this.usuario=null,this.loading=!0}ngOnInit(){var t=this;return I(function*(){t.authService.getCurrentUser().subscribe(r=>{t.usuario=r}),yield t.cargarEstadisticas()})()}cargarEstadisticas(){var t=this;return I(function*(){try{t.estadisticas={totalPublicaciones:0,totalUsuarios:1,totalVotos:0,totalComentarios:0,publicacionesPorTipo:{[Je.PROPUESTA]:0,[Je.QUEJA]:0,[Je.SUGERENCIA]:0,[Je.IDEA]:0}},console.log("Estad\xedsticas cargadas:",t.estadisticas)}catch(r){console.error("Error al cargar estad\xedsticas:",r)}finally{t.loading=!1}})()}getTipoLabel(t){return{[Je.QUEJA]:"Quejas",[Je.PROPUESTA]:"Propuestas",[Je.SUGERENCIA]:"Sugerencias",[Je.IDEA]:"Ideas"}[t]||t}static{this.\u0275fac=function(r){return new(r||n)(j(xh),j(qr))}}static{this.\u0275cmp=sr({type:n,selectors:[["app-home"]],decls:56,vars:6,consts:[[1,"hero"],[1,"hero-content"],[1,"hero-buttons"],["routerLink","/publicaciones",1,"btn","btn-primary"],["routerLink","/register","class","btn btn-outline",4,"ngIf"],["routerLink","/nueva-publicacion","class","btn btn-outline",4,"ngIf"],[1,"features"],[1,"features-grid"],[1,"feature-card","animate-fade-in"],[1,"feature-icon"],[1,"stats"],[1,"stats-grid"],[1,"stat-item"],["routerLink","/register",1,"btn","btn-outline"],["routerLink","/nueva-publicacion",1,"btn","btn-outline"]],template:function(r,i){1&r&&(R(0,"div",0)(1,"div",1)(2,"h1"),k(3,"\u{1f393} Bienvenido a Campus Voz"),P(),R(4,"p"),k(5,"La plataforma donde tu voz estudiantil importa. Comparte ideas, propuestas y participa en la mejora de tu universidad."),P(),R(6,"div",2)(7,"a",3),k(8," \u{1f4dd} Ver Publicaciones "),P(),je(9,Zce,2,0,"a",4)(10,Xce,2,0,"a",5),P()()(),R(11,"section",6)(12,"div",7)(13,"div",8)(14,"div",9),k(15,"\u{1f4a1}"),P(),R(16,"h3"),k(17,"Comparte Ideas"),P(),R(18,"p"),k(19,"Expresa tus ideas y propuestas para mejorar la experiencia universitaria de todos los estudiantes."),P()(),R(20,"div",8)(21,"div",9),k(22,"\u{1f5f3}\ufe0f"),P(),R(23,"h3"),k(24,"Vota y Participa"),P(),R(25,"p"),k(26,"Apoya las mejores propuestas con tu voto y ayuda a que las ideas m\xe1s populares lleguen a las autoridades."),P()(),R(27,"div",8)(28,"div",9),k(29,"\u{1f4ac}"),P(),R(30,"h3"),k(31,"Debate Constructivo"),P(),R(32,"p"),k(33,"Participa en discusiones constructivas y enriquece las propuestas con tus comentarios y sugerencias."),P()()()(),R(34,"section",10)(35,"div",11)(36,"div",12)(37,"h3"),k(38),P(),R(39,"p"),k(40,"Publicaciones Creadas"),P()(),R(41,"div",12)(42,"h3"),k(43),P(),R(44,"p"),k(45,"Estudiantes Activos"),P()(),R(46,"div",12)(47,"h3"),k(48),P(),R(49,"p"),k(50,"Votos Emitidos"),P()(),R(51,"div",12)(52,"h3"),k(53),P(),R(54,"p"),k(55,"Comentarios"),P()()()()),2&r&&(L(9),X("ngIf",!i.usuario),L(),X("ngIf",i.usuario),L(28),$e(i.estadisticas.totalPublicaciones),L(5),$e(i.estadisticas.totalUsuarios),L(5),$e(i.estadisticas.totalVotos),L(5),$e(i.estadisticas.totalComentarios))},dependencies:[ci,Gr],styles:['.hero[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%);color:#fff;padding:6rem 0;text-align:center;position:relative;overflow:hidden}.hero[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="rgba(255,255,255,0.1)"><polygon points="0,0 1000,100 1000,0"/></svg>\');background-size:cover}.hero-content[_ngcontent-%COMP%]{position:relative;z-index:1;max-width:800px;margin:0 auto;padding:0 2rem}.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:800;margin-bottom:1.5rem;line-height:1.2;animation:fadeIn 1s ease-out}.hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:2rem;opacity:.9;animation:fadeIn 1s ease-out .2s both}.hero-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;flex-wrap:wrap;animation:fadeIn 1s ease-out .4s both}.hero-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:1rem 2rem;font-size:1.1rem;font-weight:600}.features[_ngcontent-%COMP%]{padding:6rem 0;background:#fff}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:3rem;max-width:1200px;margin:0 auto;padding:0 2rem}.feature-card[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem;border-radius:var(--radius-2xl);background:var(--gray-50);transition:all .3s ease;border:1px solid var(--gray-200)}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:var(--shadow-xl);background:#fff}.feature-icon[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto 2rem;background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;color:#fff}.feature-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:1rem;color:var(--gray-800)}.feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--gray-600);line-height:1.6}.stats[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--gray-800) 0%,var(--gray-900) 100%);color:#fff;padding:4rem 0}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:2rem;max-width:1000px;margin:0 auto;padding:0 2rem;text-align:center}.stat-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:3rem;font-weight:800;margin-bottom:.5rem;background:linear-gradient(135deg,var(--accent) 0%,white 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.stat-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;opacity:.8}@media (max-width: 768px){.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem}.hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem}.hero-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.features[_ngcontent-%COMP%]{padding:4rem 0}.features-grid[_ngcontent-%COMP%]{gap:2rem}.feature-card[_ngcontent-%COMP%]{padding:2rem 1.5rem}}']})}}return n})();function tle(n,e){if(1&n&&(R(0,"div",15),k(1),P()),2&n){const t=be();L(),Oe(" ",t.error," ")}}function nle(n,e){1&n&&(R(0,"span"),k(1,"Iniciando sesi\xf3n..."),P())}function rle(n,e){1&n&&(R(0,"span"),k(1,"Iniciar Sesi\xf3n"),P())}let ile=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.email="",this.password="",this.loading=!1,this.error=""}onSubmit(){var t=this;return I(function*(){if(t.email&&t.password){t.loading=!0,t.error="";try{yield t.authService.login(t.email,t.password),t.router.navigate(["/publicaciones"])}catch(r){t.error="Error al iniciar sesi\xf3n. Intenta nuevamente.",console.error("Error de login:",r)}finally{t.loading=!1}}else t.error="Por favor completa todos los campos"})()}static{this.\u0275fac=function(r){return new(r||n)(j(qr),j(nn))}}static{this.\u0275cmp=sr({type:n,selectors:[["app-login"]],decls:25,vars:6,consts:[["loginForm","ngForm"],[1,"auth-container"],[1,"auth-card"],[1,"auth-subtitle"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","","email","","placeholder","tu@universidad.edu",1,"form-control",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","","minlength","6","placeholder","Tu contrase\xf1a",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-full",3,"disabled"],[4,"ngIf"],[1,"auth-footer"],["routerLink","/register"],[1,"error-message"]],template:function(r,i){if(1&r){const o=br();R(0,"div",1)(1,"div",2)(2,"h2"),k(3,"Iniciar Sesi\xf3n"),P(),R(4,"p",3),k(5,"Accede a Campus Voz"),P(),R(6,"form",4,0),Fe("ngSubmit",function(){return He(o),Ge(i.onSubmit())}),R(8,"div",5)(9,"label",6),k(10,"Correo Electr\xf3nico"),P(),R(11,"input",7),dn("ngModelChange",function(a){return He(o),bn(i.email,a)||(i.email=a),Ge(a)}),P()(),R(12,"div",5)(13,"label",8),k(14,"Contrase\xf1a"),P(),R(15,"input",9),dn("ngModelChange",function(a){return He(o),bn(i.password,a)||(i.password=a),Ge(a)}),P()(),je(16,tle,2,1,"div",10),R(17,"button",11),je(18,nle,2,0,"span",12)(19,rle,2,0,"span",12),P()(),R(20,"div",13)(21,"p"),k(22,"\xbfNo tienes cuenta? "),R(23,"a",14),k(24,"Reg\xedstrate aqu\xed"),P()()()()()}if(2&r){const o=cu(7);L(11),ln("ngModel",i.email),L(4),ln("ngModel",i.password),L(),X("ngIf",i.error),L(),X("disabled",i.loading||o.invalid),L(),X("ngIf",i.loading),L(),X("ngIf",!i.loading)}},dependencies:[ci,Gr,od,To,Ts,ed,Ss,Ag,Dg,Po,Ds],styles:[".auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.auth-card[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:10px;box-shadow:0 10px 25px #0000001a;width:100%;max-width:400px}.auth-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px;color:#333}.auth-subtitle[_ngcontent-%COMP%]{text-align:center;color:#666;margin-bottom:30px}.btn-full[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px}.error-message[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;padding:10px;border-radius:5px;margin-bottom:20px;text-align:center}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}}return n})();function ole(n,e){if(1&n&&(R(0,"option",22),k(1),P()),2&n){const t=e.$implicit,r=be();X("value",t),L(),Oe(" ",r.getRolLabel(t)," ")}}function sle(n,e){if(1&n&&(R(0,"div",23),k(1),P()),2&n){const t=be();L(),Oe(" ",t.error," ")}}function ale(n,e){1&n&&(R(0,"span"),k(1,"Registrando..."),P())}function ule(n,e){1&n&&(R(0,"span"),k(1,"Registrarse"),P())}let cle=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.email="",this.password="",this.confirmPassword="",this.nombre="",this.rol=Rr.ESTUDIANTE,this.loading=!1,this.error="",this.roles=Object.values(Rr)}onSubmit(){var t=this;return I(function*(){if(t.email&&t.password&&t.nombre)if(t.password===t.confirmPassword)if(t.password.length<6)t.error="La contrase\xf1a debe tener al menos 6 caracteres";else{t.loading=!0,t.error="";try{yield t.authService.register(t.email,t.password,t.nombre,t.rol),t.router.navigate(["/publicaciones"])}catch(r){t.error="Error al registrarse. Intenta nuevamente.",console.error("Error de registro:",r)}finally{t.loading=!1}}else t.error="Las contrase\xf1as no coinciden";else t.error="Por favor completa todos los campos"})()}getRolLabel(t){return{[Rr.ESTUDIANTE]:"Estudiante",[Rr.PROFESOR]:"Profesor",[Rr.AUTORIDAD]:"Autoridad"}[t]}static{this.\u0275fac=function(r){return new(r||n)(j(qr),j(nn))}}static{this.\u0275cmp=sr({type:n,selectors:[["app-register"]],decls:38,vars:10,consts:[["registerForm","ngForm"],[1,"auth-container"],[1,"auth-card"],[1,"auth-subtitle"],[3,"ngSubmit"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","name","nombre","required","","placeholder","Tu nombre completo",1,"form-control",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email","required","","email","","placeholder","tu@universidad.edu",1,"form-control",3,"ngModelChange","ngModel"],["for","rol"],["id","rol","name","rol","required","",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","password"],["type","password","id","password","name","password","required","","minlength","6","placeholder","M\xednimo 6 caracteres",1,"form-control",3,"ngModelChange","ngModel"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","required","","placeholder","Confirma tu contrase\xf1a",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-full",3,"disabled"],[4,"ngIf"],[1,"auth-footer"],["routerLink","/login"],[3,"value"],[1,"error-message"]],template:function(r,i){if(1&r){const o=br();R(0,"div",1)(1,"div",2)(2,"h2"),k(3,"Registro"),P(),R(4,"p",3),k(5,"\xdanete a Campus Voz"),P(),R(6,"form",4,0),Fe("ngSubmit",function(){return He(o),Ge(i.onSubmit())}),R(8,"div",5)(9,"label",6),k(10,"Nombre Completo"),P(),R(11,"input",7),dn("ngModelChange",function(a){return He(o),bn(i.nombre,a)||(i.nombre=a),Ge(a)}),P()(),R(12,"div",5)(13,"label",8),k(14,"Correo Electr\xf3nico"),P(),R(15,"input",9),dn("ngModelChange",function(a){return He(o),bn(i.email,a)||(i.email=a),Ge(a)}),P()(),R(16,"div",5)(17,"label",10),k(18,"Rol"),P(),R(19,"select",11),dn("ngModelChange",function(a){return He(o),bn(i.rol,a)||(i.rol=a),Ge(a)}),je(20,ole,2,2,"option",12),P()(),R(21,"div",5)(22,"label",13),k(23,"Contrase\xf1a"),P(),R(24,"input",14),dn("ngModelChange",function(a){return He(o),bn(i.password,a)||(i.password=a),Ge(a)}),P()(),R(25,"div",5)(26,"label",15),k(27,"Confirmar Contrase\xf1a"),P(),R(28,"input",16),dn("ngModelChange",function(a){return He(o),bn(i.confirmPassword,a)||(i.confirmPassword=a),Ge(a)}),P()(),je(29,sle,2,1,"div",17),R(30,"button",18),je(31,ale,2,0,"span",19)(32,ule,2,0,"span",19),P()(),R(33,"div",20)(34,"p"),k(35,"\xbfYa tienes cuenta? "),R(36,"a",21),k(37,"Inicia sesi\xf3n aqu\xed"),P()()()()()}if(2&r){const o=cu(7);L(11),ln("ngModel",i.nombre),L(4),ln("ngModel",i.email),L(4),ln("ngModel",i.rol),L(),X("ngForOf",i.roles),L(4),ln("ngModel",i.password),L(4),ln("ngModel",i.confirmPassword),L(),X("ngIf",i.error),L(),X("disabled",i.loading||o.invalid),L(),X("ngIf",i.loading),L(),X("ngIf",!i.loading)}},dependencies:[_u,ci,Gr,od,Cg,Tg,To,Iu,Ts,ed,Ss,Ag,Dg,Po,Ds],styles:[".auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.auth-card[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:10px;box-shadow:0 10px 25px #0000001a;width:100%;max-width:400px}.auth-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px;color:#333}.auth-subtitle[_ngcontent-%COMP%]{text-align:center;color:#666;margin-bottom:30px}.btn-full[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px}.error-message[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;padding:10px;border-radius:5px;margin-bottom:20px;text-align:center}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}}return n})(),lle=(()=>{class n{constructor(t){this.firestore=t}votar(t,r,i){var o=this;return I(function*(){const s=`${t}_${r}`,a=_r(o.firestore,"votos",s),u=_r(o.firestore,"publicaciones",t);try{const c=yield g_(a);if(c.exists()){const d=c.data();if(d.tipo===i)yield k0(a),yield sa(u,{["positivo"===i?"votosPositivos":"votosNegativos"]:m_(-1)});else{yield __(a,{id:s,publicacionId:t,usuarioId:r,tipo:i,fechaVoto:new Date});const h="positivo"===d.tipo?"votosPositivos":"votosNegativos",p="positivo"===i?"votosPositivos":"votosNegativos";yield sa(u,{[h]:m_(-1),[p]:m_(1)})}}else yield __(a,{id:s,publicacionId:t,usuarioId:r,tipo:i,fechaVoto:new Date}),yield sa(u,{["positivo"===i?"votosPositivos":"votosNegativos"]:m_(1)})}catch(c){throw console.error("Error al votar:",c),c}})()}obtenerVotoUsuario(t,r){return ht(g_(_r(this.firestore,"votos",`${t}_${r}`)).then(o=>o.exists()?{...o.data(),id:o.id}:null))}static{this.\u0275fac=function(r){return new(r||n)(se(oa))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),t$=(()=>{class n{constructor(t,r){this.votosService=t,this.authService=r,this.votosPositivos=0,this.votosNegativos=0,this.usuario=null,this.votoUsuario=null,this.loading=!1,this.subscriptions=[]}ngOnInit(){const t=this.authService.getCurrentUser().subscribe(r=>{this.usuario=r,r&&this.publicacionId&&this.cargarVotoUsuario()});this.subscriptions.push(t)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}cargarVotoUsuario(){if(!this.usuario||!this.publicacionId)return;const t=this.votosService.obtenerVotoUsuario(this.publicacionId,this.usuario.id).subscribe(r=>{this.votoUsuario=r});this.subscriptions.push(t)}votar(t){var r=this;return I(function*(){if(r.usuario&&!r.loading){r.loading=!0;try{yield r.votosService.votar(r.publicacionId,r.usuario.id,t),r.votoUsuario?.tipo===t?("positivo"===t?r.votosPositivos--:r.votosNegativos--,r.votoUsuario=null):r.votoUsuario?("positivo"===r.votoUsuario.tipo?(r.votosPositivos--,r.votosNegativos++):(r.votosNegativos--,r.votosPositivos++),r.votoUsuario.tipo=t):("positivo"===t?r.votosPositivos++:r.votosNegativos++,r.votoUsuario={id:`${r.publicacionId}_${r.usuario.id}`,publicacionId:r.publicacionId,usuarioId:r.usuario.id,tipo:t,fechaVoto:new Date})}catch(i){console.error("Error al votar:",i)}finally{r.loading=!1}}})()}static{this.\u0275fac=function(r){return new(r||n)(j(lle),j(qr))}}static{this.\u0275cmp=sr({type:n,selectors:[["app-votos"]],inputs:{publicacionId:"publicacionId",votosPositivos:"votosPositivos",votosNegativos:"votosNegativos"},decls:5,vars:8,consts:[[1,"votos-container"],[1,"voto-btn","positivo",3,"click","disabled"],[1,"voto-btn","negativo",3,"click","disabled"]],template:function(r,i){1&r&&(R(0,"div",0)(1,"button",1),Fe("click",function(){return i.votar("positivo")}),k(2),P(),R(3,"button",2),Fe("click",function(){return i.votar("negativo")}),k(4),P()()),2&r&&(L(),Io("activo","positivo"===(null==i.votoUsuario?null:i.votoUsuario.tipo)),X("disabled",!i.usuario||i.loading),L(),Oe(" \u{1f44d} ",i.votosPositivos," "),L(),Io("activo","negativo"===(null==i.votoUsuario?null:i.votoUsuario.tipo)),X("disabled",!i.usuario||i.loading),L(),Oe(" \u{1f44e} ",i.votosNegativos," "))},styles:[".votos-container[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.voto-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;padding:8px 12px;border:2px solid #ddd;background:#fff;border-radius:20px;cursor:pointer;transition:all .2s;font-size:14px}.voto-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 4px #0000001a}.voto-btn.positivo.activo[_ngcontent-%COMP%]{background:#4caf50;color:#fff;border-color:#4caf50}.voto-btn.negativo.activo[_ngcontent-%COMP%]{background:#f44336;color:#fff;border-color:#f44336}.voto-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"]})}}return n})();const dle=n=>["/publicacion",n];function hle(n,e){if(1&n&&(R(0,"div",18)(1,"div",19)(2,"span",20),k(3),P(),R(4,"span",21),k(5),P()(),R(6,"h3",22),k(7),P(),R(8,"p",23),k(9),lu(10,"slice"),P(),R(11,"div",24)(12,"span",25),k(13),P(),R(14,"span",26),k(15),lu(16,"date"),P()(),R(17,"div",27),hr(18,"app-votos",28),R(19,"button",29),k(20),P()()()),2&n){const t=e.$implicit,r=be(2);L(2),X("ngClass","tipo-"+t.tipo),L(),Oe(" ",r.getTipoLabel(t.tipo)," "),L(),X("ngClass","estado-"+t.estado),L(),Oe(" ",r.getEstadoLabel(t.estado)," "),L(2),$e(t.titulo),L(2),Oe("",function J1(n,e,t,r,i){const o=n+me,s=U(),a=Aa(s,o);return jl(s,o)?K1(s,Vn(),e,a.transform,t,r,i,a):a.transform(t,r,i)}(10,13,t.contenido,0,150),"..."),L(4),Oe("Por: ",t.autorNombre,""),L(2),$e(Bl(16,17,t.fechaCreacion,"short")),L(3),X("publicacionId",t.id)("votosPositivos",t.votosPositivos)("votosNegativos",t.votosNegativos),L(),X("routerLink",Op(20,dle,t.id)),L(),Oe(" \u{1f4ac} ",t.totalComentarios," comentarios ")}}function fle(n,e){if(1&n&&(R(0,"div",16),je(1,hle,21,22,"div",17),P()),2&n){const t=be();L(),X("ngForOf",t.publicacionesFiltradas)}}function ple(n,e){1&n&&(R(0,"div",30)(1,"p"),k(2,"No hay publicaciones que mostrar"),P(),R(3,"button",2),k(4," Crear la primera publicaci\xf3n "),P()())}let gle=(()=>{class n{constructor(t,r){this.publicacionesService=t,this.authService=r,this.publicaciones=[],this.publicacionesFiltradas=[],this.usuario=null,this.loading=!0,this.error="",this.filtroTipo="todos",this.filtroEstado="todos",this.busqueda="",this.tiposPublicacion=Object.values(Je),this.estadosPublicacion=Object.values(jn),this.subscriptions=[]}ngOnInit(){const t=this.authService.getCurrentUser().subscribe(r=>{this.usuario=r});this.subscriptions.push(t),this.cargarPublicaciones()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}cargarPublicaciones(){this.loading=!0,this.error="";const t=this.publicacionesService.obtenerPublicaciones().subscribe({next:r=>{this.publicaciones=r,this.aplicarFiltros(),this.loading=!1,console.log("Publicaciones cargadas:",r.length)},error:r=>{console.error("Error al cargar publicaciones:",r),this.error="Error al cargar las publicaciones",this.loading=!1}});this.subscriptions.push(t)}aplicarFiltros(){let t=[...this.publicaciones];if("todos"!==this.filtroTipo&&(t=t.filter(r=>r.tipo===this.filtroTipo)),"todos"!==this.filtroEstado&&(t=t.filter(r=>r.estado===this.filtroEstado)),this.busqueda.trim()){const r=this.busqueda.toLowerCase().trim();t=t.filter(i=>i.titulo.toLowerCase().includes(r)||i.contenido.toLowerCase().includes(r)||i.autorNombre.toLowerCase().includes(r))}this.publicacionesFiltradas=t}onFiltroChange(){this.aplicarFiltros()}onBusquedaChange(){this.aplicarFiltros()}limpiarFiltros(){this.filtroTipo="todos",this.filtroEstado="todos",this.busqueda="",this.aplicarFiltros()}getTipoLabel(t){return{[Je.QUEJA]:"Queja",[Je.PROPUESTA]:"Propuesta",[Je.SUGERENCIA]:"Sugerencia",[Je.IDEA]:"Idea"}[t]}getTipoClass(t){return{[Je.QUEJA]:"tipo-queja",[Je.PROPUESTA]:"tipo-propuesta",[Je.SUGERENCIA]:"tipo-sugerencia",[Je.IDEA]:"tipo-idea"}[t]}getEstadoLabel(t){return{[jn.PENDIENTE]:"Pendiente",[jn.APROBADA]:"Aprobada",[jn.RECHAZADA]:"Rechazada",[jn.IMPLEMENTADA]:"Implementada"}[t]}getEstadoClass(t){return{[jn.PENDIENTE]:"estado-pendiente",[jn.APROBADA]:"estado-aprobada",[jn.RECHAZADA]:"estado-rechazada",[jn.IMPLEMENTADA]:"estado-implementada"}[t]}formatearFecha(t){return t.toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})}trackByPublicacion(t,r){return r.id}static{this.\u0275fac=function(r){return new(r||n)(j(xh),j(qr))}}static{this.\u0275cmp=sr({type:n,selectors:[["app-lista-publicaciones"]],decls:31,vars:4,consts:[[1,"publicaciones-container"],[1,"header"],["routerLink","/nueva-publicacion",1,"btn","btn-primary"],[1,"filtros"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],["value","queja"],["value","propuesta"],["value","sugerencia"],["value","idea"],["value","pendiente"],["value","en_revision"],["value","aprobada"],["value","rechazada"],["class","publicaciones-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"publicaciones-grid"],["class","publicacion-card",4,"ngFor","ngForOf"],[1,"publicacion-card"],[1,"card-header"],[1,"tipo-badge",3,"ngClass"],[1,"estado-badge",3,"ngClass"],[1,"titulo"],[1,"contenido"],[1,"card-meta"],[1,"autor"],[1,"fecha"],[1,"card-actions"],[3,"publicacionId","votosPositivos","votosNegativos"],[1,"btn","btn-outline",3,"routerLink"],[1,"empty-state"]],template:function(r,i){1&r&&(R(0,"div",0)(1,"div",1)(2,"h2"),k(3,"Publicaciones de Campus Voz"),P(),R(4,"button",2),k(5," \u2795 Nueva Publicaci\xf3n "),P()(),R(6,"div",3)(7,"select",4),dn("ngModelChange",function(s){return bn(i.filtroTipo,s)||(i.filtroTipo=s),s}),Fe("change",function(){return i.aplicarFiltros()}),R(8,"option",5),k(9,"Todos los tipos"),P(),R(10,"option",6),k(11,"Quejas"),P(),R(12,"option",7),k(13,"Propuestas"),P(),R(14,"option",8),k(15,"Sugerencias"),P(),R(16,"option",9),k(17,"Ideas"),P()(),R(18,"select",4),dn("ngModelChange",function(s){return bn(i.filtroEstado,s)||(i.filtroEstado=s),s}),Fe("change",function(){return i.aplicarFiltros()}),R(19,"option",5),k(20,"Todos los estados"),P(),R(21,"option",10),k(22,"Pendientes"),P(),R(23,"option",11),k(24,"En Revisi\xf3n"),P(),R(25,"option",12),k(26,"Aprobadas"),P(),R(27,"option",13),k(28,"Rechazadas"),P()()(),je(29,fle,2,1,"div",14)(30,ple,5,0,"div",15),P()),2&r&&(L(7),ln("ngModel",i.filtroTipo),L(11),ln("ngModel",i.filtroEstado),L(11),X("ngIf",i.publicacionesFiltradas.length>0),L(),X("ngIf",0===i.publicacionesFiltradas.length))},dependencies:[og,_u,ci,Gr,Cg,Tg,Iu,Ts,Po,t$,RO,sg],styles:['.publicaciones-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:3rem;flex-wrap:wrap;gap:1rem}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:800;background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.filtros[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:2rem;flex-wrap:wrap}.filtros[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.75rem 1rem;border:2px solid var(--gray-200);border-radius:var(--radius-lg);background:#fff;font-size:.875rem;cursor:pointer;transition:all .2s ease}.filtros[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px #667eea1a}.publicaciones-grid[_ngcontent-%COMP%]{display:grid;gap:2rem;animation:fadeIn .5s ease-out}.publicacion-card[_ngcontent-%COMP%]{background:#fff;border-radius:var(--radius-2xl);padding:2rem;box-shadow:var(--shadow-md);transition:all .3s ease;border:1px solid var(--gray-200);position:relative;overflow:hidden}.publicacion-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%)}.publicacion-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-xl)}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap;gap:.5rem}.tipo-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:var(--radius);font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:.05em}.tipo-queja[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fee2e2,#fecaca);color:#991b1b}.tipo-propuesta[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dcfce7,#bbf7d0);color:#166534}.tipo-sugerencia[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef3c7,#fde68a);color:#92400e}.tipo-idea[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);color:#1e40af}.estado-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:var(--radius);font-size:.75rem;font-weight:600}.estado-pendiente[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.estado-en_revision[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.estado-aprobada[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.estado-rechazada[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.titulo[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:1rem;color:var(--gray-800);line-height:1.3}.contenido[_ngcontent-%COMP%]{color:var(--gray-600);line-height:1.6;margin-bottom:1.5rem}.card-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;font-size:.875rem;color:var(--gray-500);flex-wrap:wrap;gap:.5rem}.autor[_ngcontent-%COMP%]{font-weight:600}.card-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#fff;border-radius:var(--radius-2xl);box-shadow:var(--shadow-md)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--gray-600);margin-bottom:2rem}@media (max-width: 768px){.publicaciones-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;text-align:center}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.filtros[_ngcontent-%COMP%]{justify-content:center}.publicacion-card[_ngcontent-%COMP%]{padding:1.5rem}.card-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}']})}}return n})();function mle(n,e){if(1&n&&(R(0,"span"),k(1),hr(2,"br"),k(3),hr(4,"br"),k(5),P()),2&n){const t=be();L(),Oe(" ID: ",t.usuario.id,""),L(2),Oe(" Nombre: ",t.usuario.nombre,""),L(2),Oe(" Email: ",t.usuario.email," ")}}function _le(n,e){if(1&n&&(R(0,"option",21),k(1),P()),2&n){const t=e.$implicit,r=be();X("value",t),L(),Oe(" ",r.getTipoLabel(t)," ")}}function yle(n,e){if(1&n&&(R(0,"div",22),k(1),P()),2&n){const t=be();L(),Oe(" \u2705 ",t.success," ")}}function vle(n,e){if(1&n&&(R(0,"div",23),k(1),P()),2&n){const t=be();L(),Oe(" \u274c ",t.error," ")}}function Ile(n,e){if(1&n&&(R(0,"span"),k(1),P()),2&n){const t=be();L(),$e(t.esEdicion?"Actualizando...":"Publicando...")}}function Ele(n,e){if(1&n&&(R(0,"span"),k(1),P()),2&n){const t=be();L(),$e(t.esEdicion?"Actualizar":"Publicar")}}let n$=(()=>{class n{constructor(t,r,i,o){this.route=t,this.router=r,this.publicacionesService=i,this.authService=o,this.publicacion={titulo:"",contenido:"",tipo:Je.PROPUESTA},this.tiposPublicacion=Object.values(Je),this.loading=!1,this.error="",this.success="",this.esEdicion=!1,this.usuario=null,this.subscriptions=[]}ngOnInit(){var t=this;return I(function*(){console.log("Iniciando FormularioPublicacionComponent...");const r=t.authService.getCurrentUser().subscribe(i=>{console.log("Usuario recibido en formulario:",i),t.usuario=i,i||(console.log("No hay usuario autenticado, redirigiendo a login..."),t.router.navigate(["/login"]))});t.subscriptions.push(r),t.publicacionId=t.route.snapshot.params.id,t.esEdicion=!!t.publicacionId,t.esEdicion&&t.publicacionId&&(yield t.cargarPublicacion())})()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}cargarPublicacion(){var t=this;return I(function*(){if(t.publicacionId)try{t.loading=!0;const r=t.publicacionesService.obtenerPublicacionPorId(t.publicacionId).subscribe({next:i=>{i?(t.publicacion=i,console.log("Publicaci\xf3n cargada para edici\xf3n:",i)):t.error="Publicaci\xf3n no encontrada",t.loading=!1},error:i=>{console.error("Error al cargar publicaci\xf3n:",i),t.error="Error al cargar la publicaci\xf3n",t.loading=!1}});t.subscriptions.push(r)}catch(r){console.error("Error al cargar publicaci\xf3n:",r),t.error="Error al cargar la publicaci\xf3n",t.loading=!1}})()}onSubmit(){var t=this;return I(function*(){if(console.log("Iniciando env\xedo del formulario..."),console.log("Usuario actual:",t.usuario),t.publicacion.titulo?.trim())if(t.publicacion.contenido?.trim()){if(!t.usuario){console.error("No hay usuario autenticado"),t.error="No se pudo obtener el nombre del usuario autenticado.";try{if(yield t.authService.reloadUserData(),t.usuario=t.authService.getCurrentUserSync(),!t.usuario)return t.error="Debes estar autenticado para realizar esta acci\xf3n. Por favor, inicia sesi\xf3n nuevamente.",void t.router.navigate(["/login"])}catch(i){return console.error("Error al recargar datos del usuario:",i),t.error="Error de autenticaci\xf3n. Por favor, inicia sesi\xf3n nuevamente.",void t.router.navigate(["/login"])}}if(!t.usuario.id||!t.usuario.nombre)return console.error("Datos del usuario incompletos:",t.usuario),t.error="Los datos del usuario est\xe1n incompletos. Por favor, inicia sesi\xf3n nuevamente.",void t.router.navigate(["/login"]);t.usuario.nombre.trim()||t.usuario.email?.split("@")[0]||t.usuario.id.substring(0,6),t.loading=!0,t.error="",t.success="";try{if(t.esEdicion&&t.publicacionId){console.log("Actualizando publicaci\xf3n...");const i={titulo:t.publicacion.titulo.trim(),contenido:t.publicacion.contenido.trim(),tipo:t.publicacion.tipo},o=t.publicacionesService.actualizarPublicacion(t.publicacionId,i).subscribe({next:()=>{t.success="Publicaci\xf3n actualizada exitosamente",console.log("Publicaci\xf3n actualizada"),setTimeout(()=>{t.router.navigate(["/publicaciones"])},1500)},error:s=>{console.error("Error al actualizar publicaci\xf3n:",s),t.error="Error al actualizar la publicaci\xf3n. Por favor, intenta nuevamente.",t.loading=!1}});t.subscriptions.push(o)}else{console.log("Creando nueva publicaci\xf3n..."),console.log("Usuario actual:",t.usuario);const i=t.usuario?.nombre||t.usuario?.email?.split("@")[0]||"Usuario An\xf3nimo";console.log("Nombre de autor a usar:",i);const o={titulo:t.publicacion.titulo.trim(),contenido:t.publicacion.contenido.trim(),tipo:t.publicacion.tipo,autorId:t.usuario.id,autorNombre:i,estado:jn.PENDIENTE,fechaCreacion:new Date,votosPositivos:0,votosNegativos:0,totalComentarios:0};if(console.log("Datos de la nueva publicaci\xf3n:",o),Object.entries(o).some(([u,c])=>void 0===c&&(console.error(`Campo ${u} es undefined`),!0)))return t.error="Error en los datos de la publicaci\xf3n. Por favor, intenta nuevamente.",void(t.loading=!1);const a=t.publicacionesService.crearPublicacion(o).subscribe({next:u=>{console.log("Publicaci\xf3n creada con ID:",u),t.success="Publicaci\xf3n creada exitosamente",setTimeout(()=>{t.router.navigate(["/publicaciones"])},1500)},error:u=>{console.error("Error al crear publicaci\xf3n:",u),t.error="Error al crear la publicaci\xf3n. Por favor, intenta nuevamente.",t.loading=!1}});t.subscriptions.push(a)}}catch(i){console.error("Error al guardar publicaci\xf3n:",i),t.error="Error al guardar la publicaci\xf3n. Por favor, intenta nuevamente.",t.loading=!1}}else t.error="El contenido es obligatorio";else t.error="El t\xedtulo es obligatorio"})()}cancelar(){this.router.navigate(["/publicaciones"])}getTipoLabel(t){return{[Je.QUEJA]:"Queja",[Je.PROPUESTA]:"Propuesta",[Je.SUGERENCIA]:"Sugerencia",[Je.IDEA]:"Idea"}[t]}static{this.\u0275fac=function(r){return new(r||n)(j(xo),j(nn),j(xh),j(qr))}}static{this.\u0275cmp=sr({type:n,selectors:[["app-formulario-publicacion"]],decls:38,vars:17,consts:[["publicacionForm","ngForm"],[1,"formulario-container"],[1,"formulario-card"],[1,"formulario-subtitle"],[1,"debug-info",2,"background","#f0f0f0","padding","10px","margin-bottom","20px","border-radius","5px","font-size","12px"],[4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["for","titulo"],["type","text","id","titulo","name","titulo","required","","maxlength","100","placeholder","Escribe un t\xedtulo descriptivo",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","tipo"],["id","tipo","name","tipo","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],["for","contenido"],["id","contenido","name","contenido","required","","rows","8","maxlength","2000","placeholder","Describe tu propuesta, queja, sugerencia o idea de manera detallada...",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"char-counter"],["class","success-message",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"value"],[1,"success-message"],[1,"error-message"]],template:function(r,i){if(1&r){const o=br();R(0,"div",1)(1,"div",2)(2,"h2"),k(3),P(),R(4,"p",3),k(5,"Comparte tu voz en Campus Voz"),P(),R(6,"div",4)(7,"strong"),k(8,"Debug Info:"),P(),hr(9,"br"),k(10),hr(11,"br"),je(12,mle,6,3,"span",5),P(),R(13,"form",6,0),Fe("ngSubmit",function(){return He(o),Ge(i.onSubmit())}),R(15,"div",7)(16,"label",8),k(17,"T\xedtulo *"),P(),R(18,"input",9),dn("ngModelChange",function(a){return He(o),bn(i.publicacion.titulo,a)||(i.publicacion.titulo=a),Ge(a)}),P()(),R(19,"div",7)(20,"label",10),k(21,"Tipo de Publicaci\xf3n *"),P(),R(22,"select",11),dn("ngModelChange",function(a){return He(o),bn(i.publicacion.tipo,a)||(i.publicacion.tipo=a),Ge(a)}),je(23,_le,2,2,"option",12),P()(),R(24,"div",7)(25,"label",13),k(26,"Contenido *"),P(),R(27,"textarea",14),dn("ngModelChange",function(a){return He(o),bn(i.publicacion.contenido,a)||(i.publicacion.contenido=a),Ge(a)}),P(),R(28,"small",15),k(29),P()(),je(30,yle,2,1,"div",16)(31,vle,2,1,"div",17),R(32,"div",18)(33,"button",19),Fe("click",function(){return He(o),Ge(i.cancelar())}),k(34," Cancelar "),P(),R(35,"button",20),je(36,Ile,2,1,"span",5)(37,Ele,2,1,"span",5),P()()()()()}if(2&r){const o=cu(14);L(3),$e(i.esEdicion?"Editar Publicaci\xf3n":"Nueva Publicaci\xf3n"),L(7),Oe(" Usuario autenticado: ",i.usuario?"S\xed":"No",""),L(2),X("ngIf",i.usuario),L(6),ln("ngModel",i.publicacion.titulo),X("disabled",i.loading),L(4),ln("ngModel",i.publicacion.tipo),X("disabled",i.loading),L(),X("ngForOf",i.tiposPublicacion),L(4),ln("ngModel",i.publicacion.contenido),X("disabled",i.loading),L(2),Oe(" ",(null==i.publicacion.contenido?null:i.publicacion.contenido.length)||0,"/2000 caracteres "),L(),X("ngIf",i.success),L(),X("ngIf",i.error),L(2),X("disabled",i.loading),L(2),X("disabled",i.loading||o.invalid||!i.usuario),L(),X("ngIf",i.loading),L(),X("ngIf",!i.loading)}},dependencies:[_u,ci,od,Cg,Tg,To,Iu,Ts,ed,Ss,rb,Po,Ds],styles:[".formulario-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.formulario-card[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:15px;box-shadow:0 15px 35px #0000001a;width:100%;max-width:600px}.formulario-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px;color:#2c3e50;font-size:2rem}.formulario-subtitle[_ngcontent-%COMP%]{text-align:center;color:#7f8c8d;margin-bottom:30px;font-size:1.1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:25px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#34495e;font-size:14px}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 15px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px;transition:border-color .3s ease;font-family:inherit}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.form-control[_ngcontent-%COMP%]:disabled{background-color:#f8f9fa;opacity:.7}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:120px}.char-counter[_ngcontent-%COMP%]{display:block;text-align:right;color:#7f8c8d;font-size:12px;margin-top:5px}.success-message[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;padding:12px 15px;border-radius:8px;margin-bottom:20px;text-align:center;border:1px solid #c3e6cb;font-weight:500}.error-message[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;padding:12px 15px;border-radius:8px;margin-bottom:20px;text-align:center;border:1px solid #f5c6cb;font-weight:500}.form-actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:flex-end;margin-top:30px}.btn[_ngcontent-%COMP%]{padding:12px 25px;border:none;border-radius:8px;cursor:pointer;font-size:14px;font-weight:600;text-decoration:none;display:inline-block;transition:all .3s ease;min-width:120px}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn-primary[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2980b9;transform:translateY(-2px)}.btn-secondary[_ngcontent-%COMP%]{background-color:#95a5a6;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#7f8c8d}@media (max-width: 768px){.formulario-container[_ngcontent-%COMP%]{padding:15px}.formulario-card[_ngcontent-%COMP%]{padding:25px}.formulario-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%}}"]})}}return n})(),ble=(()=>{class n{constructor(t){this.firestore=t,this.comentariosSubject=new Hn([])}obtenerComentariosPorPublicacion(t){const r=Mh(this.firestore,"comentarios"),i=F0(r,e$("publicacionId","==",t),V0("fechaCreacion","asc"));return new Ct(o=>{const s=Jce(i,a=>{const u=[];a.forEach(c=>{const d=c.data(),h={id:c.id,publicacionId:d.publicacionId,autorId:d.autorId,autorNombre:d.autorNombre,contenido:d.contenido,fechaCreacion:d.fechaCreacion?.toDate()||new Date,editado:d.editado||!1,fechaEdicion:d.fechaEdicion?.toDate()};u.push(h)}),o.next(u)},a=>{o.error(a)});return()=>s()})}crearComentario(t){var r=this;return I(function*(){try{const i=Mh(r.firestore,"comentarios"),o={publicacionId:t.publicacionId,autorId:t.autorId,autorNombre:t.autorNombre,contenido:t.contenido,fechaCreacion:Ze.fromDate(new Date),editado:!1},s=yield Zj(i,o);return console.log("Comentario creado con ID:",s.id),s.id}catch(i){throw console.error("Error al crear comentario:",i),i}})()}eliminarComentario(t){var r=this;return I(function*(){try{const i=_r(r.firestore,"comentarios",t);yield k0(i),console.log("Comentario eliminado:",t)}catch(i){throw console.error("Error al eliminar comentario:",i),i}})()}editarComentario(t,r){var i=this;return I(function*(){try{const o=_r(i.firestore,"comentarios",t);yield sa(o,{contenido:r,editado:!0,fechaEdicion:Ze.fromDate(new Date)}),console.log("Comentario editado:",t)}catch(o){throw console.error("Error al editar comentario:",o),o}})()}static{this.\u0275fac=function(r){return new(r||n)(se(oa))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function wle(n,e){if(1&n){const t=br();R(0,"div",6)(1,"textarea",7),dn("ngModelChange",function(i){He(t);const o=be();return bn(o.nuevoComentario,i)||(o.nuevoComentario=i),Ge(i)}),P(),R(2,"button",8),Fe("click",function(){return He(t),Ge(be().enviarComentario())}),k(3),P()()}if(2&n){const t=be();L(),ln("ngModel",t.nuevoComentario),L(),X("disabled",!t.nuevoComentario.trim()||t.loading),L(),Oe(" ",t.loading?"Enviando...":"Comentar"," ")}}function Cle(n,e){1&n&&(R(0,"div")(1,"p")(2,"a",9),k(3,"Inicia sesi\xf3n"),P(),k(4," para comentar"),P()())}function Tle(n,e){if(1&n){const t=br();R(0,"div")(1,"button",11),Fe("click",function(){He(t);const i=be().$implicit;return Ge(be().eliminarComentario(i.id))}),k(2,"Eliminar"),P()()}}function Dle(n,e){if(1&n&&(R(0,"div",10)(1,"strong"),k(2),P(),R(3,"small"),k(4),P(),R(5,"p"),k(6),P(),je(7,Tle,3,0,"div",2),P()),2&n){const t=e.$implicit,r=be();L(2),$e(t.autorNombre),L(2),$e(r.formatearFecha(t.fechaCreacion)),L(2),$e(t.contenido),L(),X("ngIf",r.puedeEditarComentario(t))}}function Ale(n,e){1&n&&(R(0,"div")(1,"p"),k(2,"No hay comentarios a\xfan."),P()())}function Sle(n,e){if(1&n&&(R(0,"div",12),k(1),P()),2&n){const t=be();L(),$e(t.error)}}let Ple=(()=>{class n{constructor(t,r){this.comentariosService=t,this.authService=r,this.comentarios=[],this.nuevoComentario="",this.usuario=null,this.loading=!1,this.error="",this.editandoComentario=null,this.contenidoEditado="",this.subscriptions=[]}ngOnInit(){const t=this.authService.getCurrentUser().subscribe(r=>{this.usuario=r});this.subscriptions.push(t),this.cargarComentarios()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}cargarComentarios(){if(!this.publicacionId)return;const t=this.comentariosService.obtenerComentariosPorPublicacion(this.publicacionId).subscribe({next:r=>{this.comentarios=r,console.log("Comentarios cargados:",r.length)},error:r=>{console.error("Error al cargar comentarios:",r),this.error="Error al cargar los comentarios"}});this.subscriptions.push(t)}enviarComentario(){var t=this;return I(function*(){if(t.nuevoComentario.trim()&&t.usuario){t.loading=!0,t.error="";try{const r={contenido:t.nuevoComentario.trim(),autorId:t.usuario.id,autorNombre:t.usuario.nombre,publicacionId:t.publicacionId,fechaCreacion:new Date,editado:!1};yield t.comentariosService.crearComentario(r),t.nuevoComentario="",console.log("Comentario enviado exitosamente")}catch(r){console.error("Error al enviar comentario:",r),t.error="Error al enviar el comentario"}finally{t.loading=!1}}})()}iniciarEdicion(t){this.editandoComentario=t.id,this.contenidoEditado=t.contenido}cancelarEdicion(){this.editandoComentario=null,this.contenidoEditado=""}guardarEdicion(t){var r=this;return I(function*(){if(r.contenidoEditado.trim()){r.loading=!0,r.error="";try{yield r.comentariosService.editarComentario(t,r.contenidoEditado.trim()),r.editandoComentario=null,r.contenidoEditado="",console.log("Comentario editado exitosamente")}catch(i){console.error("Error al editar comentario:",i),r.error="Error al editar el comentario"}finally{r.loading=!1}}})()}eliminarComentario(t){var r=this;return I(function*(){if(confirm("\xbfEst\xe1s seguro de que quieres eliminar este comentario?")){r.loading=!0,r.error="";try{yield r.comentariosService.eliminarComentario(t),console.log("Comentario eliminado exitosamente")}catch(i){console.error("Error al eliminar comentario:",i),r.error="Error al eliminar el comentario"}finally{r.loading=!1}}})()}puedeEditarComentario(t){return this.usuario?.id===t.autorId}formatearFecha(t){return t.toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}trackByComentario(t,r){return r.id}static{this.\u0275fac=function(r){return new(r||n)(j(ble),j(qr))}}static{this.\u0275cmp=sr({type:n,selectors:[["app-comentarios"]],inputs:{publicacionId:"publicacionId"},decls:9,vars:6,consts:[[1,"comentarios-container"],["class","nuevo-comentario",4,"ngIf"],[4,"ngIf"],[1,"comentarios-lista"],["class","comentario-item",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],[1,"nuevo-comentario"],["placeholder","Escribe tu comentario...","rows","3",3,"ngModelChange","ngModel"],[3,"click","disabled"],["routerLink","/login"],[1,"comentario-item"],[3,"click"],[1,"error"]],template:function(r,i){1&r&&(R(0,"div",0)(1,"h3"),k(2),P(),je(3,wle,4,3,"div",1)(4,Cle,5,0,"div",2),R(5,"div",3),je(6,Dle,8,4,"div",4)(7,Ale,3,0,"div",2),P(),je(8,Sle,2,1,"div",5),P()),2&r&&(L(2),Oe("Comentarios (",i.comentarios.length,")"),L(),X("ngIf",i.usuario),L(),X("ngIf",!i.usuario),L(2),X("ngForOf",i.comentarios),L(),X("ngIf",0===i.comentarios.length),L(),X("ngIf",i.error))},dependencies:[_u,ci,Gr,To,Ts,Po],styles:[".comentarios-container[_ngcontent-%COMP%]{margin-top:20px;padding:20px;background-color:#f8f9fa;border-radius:8px}.nuevo-comentario[_ngcontent-%COMP%]{margin-bottom:20px}.nuevo-comentario[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;margin-bottom:10px}.nuevo-comentario[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer}.nuevo-comentario[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.comentario-item[_ngcontent-%COMP%]{background:#fff;padding:15px;margin-bottom:10px;border-radius:4px;border-left:3px solid #007bff}.comentario-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.comentario-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;margin-left:10px}.comentario-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;color:#555}.error[_ngcontent-%COMP%]{color:red;margin-top:10px}"]})}}return n})();const Rle=n=>["/editar-publicacion",n];function Mle(n,e){if(1&n){const t=br();R(0,"div",17)(1,"button",18),k(2," \u270f\ufe0f Editar "),P(),R(3,"button",19),Fe("click",function(){return He(t),Ge(be(2).eliminarPublicacion())}),k(4," \u{1f5d1}\ufe0f Eliminar "),P()()}if(2&n){const t=be(2);L(),X("routerLink",Op(1,Rle,t.publicacion.id))}}function xle(n,e){if(1&n&&(R(0,"div",3)(1,"div",4)(2,"div",5)(3,"span",6),k(4),P(),R(5,"span",7),k(6),P()(),R(7,"h1",8),k(8),P(),R(9,"div",9)(10,"span",10),k(11),P(),R(12,"span",11),k(13),lu(14,"date"),P()(),R(15,"div",12)(16,"p"),k(17),P()(),R(18,"div",13),hr(19,"app-votos",14),je(20,Mle,5,3,"div",15),P()(),hr(21,"app-comentarios",16),P()),2&n){const t=be();L(3),X("ngClass","tipo-"+t.publicacion.tipo),L(),Oe(" ",t.getTipoLabel(t.publicacion.tipo)," "),L(),X("ngClass","estado-"+t.publicacion.estado),L(),Oe(" ",t.getEstadoLabel(t.publicacion.estado)," "),L(2),$e(t.publicacion.titulo),L(3),Oe("Por: ",t.publicacion.autorNombre,""),L(2),$e(Bl(14,13,t.publicacion.fechaCreacion,"medium")),L(4),$e(t.publicacion.contenido),L(2),X("publicacionId",t.publicacion.id)("votosPositivos",t.publicacion.votosPositivos)("votosNegativos",t.publicacion.votosNegativos),L(),X("ngIf",t.esAutor||t.esAdmin),L(),X("publicacionId",t.publicacion.id)}}function Nle(n,e){1&n&&(R(0,"div",20)(1,"p"),k(2,"Cargando publicaci\xf3n..."),P()())}function Ole(n,e){if(1&n&&(R(0,"div",21)(1,"p"),k(2),P(),R(3,"button",22),k(4,"Volver a publicaciones"),P()()),2&n){const t=be();L(2),$e(t.error)}}let kle=(()=>{class n{constructor(t,r,i,o){this.route=t,this.router=r,this.publicacionesService=i,this.authService=o,this.publicacion=null,this.usuario=null,this.loading=!0,this.error="",this.esAutor=!1,this.esAdmin=!1,this.subscriptions=[]}ngOnInit(){const t=this.authService.getCurrentUser().subscribe(i=>{this.usuario=i});this.subscriptions.push(t);const r=this.route.snapshot.params.id;r?this.cargarPublicacion(r):(this.error="ID de publicaci\xf3n no v\xe1lido",this.loading=!1)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}cargarPublicacion(t){const r=this.publicacionesService.obtenerPublicacionPorId(t).subscribe({next:i=>{i?(this.publicacion=i,console.log("Publicaci\xf3n cargada:",i),this.esAutor=!(!this.usuario||!this.publicacion||this.usuario.id!==this.publicacion.autorId),this.esAdmin=!(!this.usuario||!this.usuario.rol||"admin"!==this.usuario.rol.toLowerCase())):this.error="Publicaci\xf3n no encontrada",this.loading=!1},error:i=>{console.error("Error al cargar publicaci\xf3n:",i),this.error="Error al cargar la publicaci\xf3n",this.loading=!1}});this.subscriptions.push(r)}getTipoLabel(t){return{[Je.QUEJA]:"Queja",[Je.PROPUESTA]:"Propuesta",[Je.SUGERENCIA]:"Sugerencia",[Je.IDEA]:"Idea"}[t]}getEstadoLabel(t){return{[jn.PENDIENTE]:"Pendiente",[jn.APROBADA]:"Aprobada",[jn.RECHAZADA]:"Rechazada",[jn.IMPLEMENTADA]:"Implementada"}[t]}formatearFecha(t){return t.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}puedeEditarPublicacion(){return!(!this.usuario||!this.publicacion)&&this.usuario.id===this.publicacion.autorId}eliminarPublicacion(){var t=this;return I(function*(){if(t.publicacion?.id&&confirm("\xbfEst\xe1s seguro de que quieres eliminar esta publicaci\xf3n?"))try{yield t.publicacionesService.eliminarPublicacion(t.publicacion.id),t.router.navigate(["/publicaciones"])}catch(r){console.error("Error al eliminar publicaci\xf3n:",r),t.error="Error al eliminar la publicaci\xf3n"}})()}static{this.\u0275fac=function(r){return new(r||n)(j(xo),j(nn),j(xh),j(qr))}}static{this.\u0275cmp=sr({type:n,selectors:[["app-detalle-publicacion"]],decls:3,vars:3,consts:[["class","detalle-container",4,"ngIf"],["class","loading",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"detalle-container"],[1,"detalle-card"],[1,"card-header"],[1,"tipo-badge",3,"ngClass"],[1,"estado-badge",3,"ngClass"],[1,"titulo"],[1,"meta-info"],[1,"autor"],[1,"fecha"],[1,"contenido"],[1,"acciones"],[3,"publicacionId","votosPositivos","votosNegativos"],["class","botones",4,"ngIf"],[3,"publicacionId"],[1,"botones"],[1,"btn","btn-outline",3,"routerLink"],[1,"btn","btn-danger",3,"click"],[1,"loading"],[1,"error-message"],["routerLink","/publicaciones",1,"btn","btn-primary"]],template:function(r,i){1&r&&je(0,xle,22,16,"div",0)(1,Nle,3,0,"div",1)(2,Ole,5,1,"div",2),2&r&&(X("ngIf",i.publicacion),L(),X("ngIf",i.loading),L(),X("ngIf",i.error))},dependencies:[og,ci,Gr,Ple,t$,sg],styles:[".detalle-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}.detalle-header[_ngcontent-%COMP%]{margin-bottom:20px}.btn-back[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #dee2e6;padding:10px 20px;border-radius:8px;cursor:pointer;text-decoration:none;color:#495057;font-weight:500;transition:all .3s ease}.btn-back[_ngcontent-%COMP%]:hover{background:#e9ecef;transform:translate(-5px)}.publicacion-detalle[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:30px;box-shadow:0 10px 30px #0000001a}.publicacion-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px;flex-wrap:wrap;gap:15px}.titulo-badges[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 10px;color:#2c3e50;font-size:2rem;line-height:1.3}.badges[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.badge-tipo[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.estado-pendiente[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.estado-revision[_ngcontent-%COMP%]{background-color:#9b59b6;color:#fff}.estado-respondida[_ngcontent-%COMP%]{background-color:#27ae60;color:#fff}.estado-cerrada[_ngcontent-%COMP%]{background-color:#95a5a6;color:#fff}.acciones[_ngcontent-%COMP%]{display:flex;gap:10px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;text-decoration:none;display:inline-block;transition:all .3s ease}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#545b62}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.publicacion-meta[_ngcontent-%COMP%]{padding:15px 0;border-bottom:1px solid #ecf0f1;margin-bottom:25px}.autor-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;color:#7f8c8d}.fecha[_ngcontent-%COMP%]{font-size:14px}.publicacion-contenido[_ngcontent-%COMP%]{margin-bottom:30px;line-height:1.8;font-size:16px;color:#2c3e50}.votacion-section[_ngcontent-%COMP%]{background:#f8f9fa;padding:25px;border-radius:10px;margin-bottom:30px}.votacion-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;color:#2c3e50}.botones-voto[_ngcontent-%COMP%]{display:flex;gap:15px;flex-wrap:wrap}.btn-voto[_ngcontent-%COMP%]{padding:12px 20px;border:2px solid transparent;border-radius:8px;cursor:pointer;font-weight:600;transition:all .3s ease;background:#fff}.btn-voto[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-voto-positivo[_ngcontent-%COMP%]{color:#27ae60;border-color:#27ae60}.btn-voto-positivo[_ngcontent-%COMP%]:hover:not(:disabled){background:#27ae60;color:#fff}.btn-voto-negativo[_ngcontent-%COMP%]{color:#e74c3c;border-color:#e74c3c}.btn-voto-negativo[_ngcontent-%COMP%]:hover:not(:disabled){background:#e74c3c;color:#fff}.voto-positivo-activo[_ngcontent-%COMP%]{background:#27ae60!important;color:#fff!important}.voto-negativo-activo[_ngcontent-%COMP%]{background:#e74c3c!important;color:#fff!important}.comentarios-section[_ngcontent-%COMP%]{border-top:1px solid #ecf0f1;padding-top:30px}.comentarios-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#2c3e50}.nuevo-comentario[_ngcontent-%COMP%]{margin-bottom:30px}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ddd;border-radius:8px;font-size:14px;font-family:inherit;resize:vertical}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px #007bff40}.comentario-acciones[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:10px}.char-counter[_ngcontent-%COMP%]{color:#7f8c8d;font-size:12px}.lista-comentarios[_ngcontent-%COMP%]{margin-top:20px}.comentario-item[_ngcontent-%COMP%]{background:#f8f9fa;padding:20px;border-radius:10px;margin-bottom:15px}.comentario-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.comentario-header[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2c3e50}.comentario-fecha[_ngcontent-%COMP%]{color:#7f8c8d;font-size:14px}.comentario-contenido[_ngcontent-%COMP%]{margin:0;line-height:1.6;color:#495057}.no-comentarios[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#7f8c8d}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px;color:#7f8c8d}@media (max-width: 768px){.detalle-container[_ngcontent-%COMP%]{padding:15px}.publicacion-detalle[_ngcontent-%COMP%]{padding:20px}.publicacion-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.titulo-badges[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.botones-voto[_ngcontent-%COMP%]{flex-direction:column}.btn-voto[_ngcontent-%COMP%]{width:100%;text-align:center}.comentario-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:5px}}"]})}}return n})();const Vle=n=>["/publicacion",n];function Fle(n,e){if(1&n){const t=br();R(0,"button",25),Fe("click",function(){return He(t),Ge(be(2).iniciarEdicion())}),k(1," \u270f\ufe0f Editar "),P()}}function Lle(n,e){if(1&n&&(R(0,"div",26)(1,"div",27)(2,"label"),k(3,"Nombre:"),P(),R(4,"span"),k(5),P()(),R(6,"div",27)(7,"label"),k(8,"Email:"),P(),R(9,"span"),k(10),P()(),R(11,"div",27)(12,"label"),k(13,"Rol:"),P(),R(14,"span"),k(15),P()()()),2&n){const t=be(2);L(5),$e(t.usuario.nombre),L(5),$e(t.usuario.email),L(5),$e(t.getRolLabel(t.usuario.rol))}}function Ule(n,e){1&n&&(R(0,"span"),k(1,"Guardando..."),P())}function Ble(n,e){1&n&&(R(0,"span"),k(1,"Guardar"),P())}function jle(n,e){if(1&n){const t=br();R(0,"form",28,0),Fe("ngSubmit",function(){return He(t),Ge(be(2).guardarCambios())}),R(2,"div",29)(3,"label",30),k(4,"Nombre *"),P(),R(5,"input",31),dn("ngModelChange",function(i){He(t);const o=be(2);return bn(o.datosEdicion.nombre,i)||(o.datosEdicion.nombre=i),Ge(i)}),P()(),R(6,"div",29)(7,"label",32),k(8,"Email *"),P(),R(9,"input",33),dn("ngModelChange",function(i){He(t);const o=be(2);return bn(o.datosEdicion.email,i)||(o.datosEdicion.email=i),Ge(i)}),P()(),R(10,"div",34)(11,"button",35),Fe("click",function(){return He(t),Ge(be(2).cancelarEdicion())}),k(12," Cancelar "),P(),R(13,"button",36),je(14,Ule,2,0,"span",37)(15,Ble,2,0,"span",37),P()()()}if(2&n){const t=cu(1),r=be(2);L(5),ln("ngModel",r.datosEdicion.nombre),X("disabled",r.loading),L(4),ln("ngModel",r.datosEdicion.email),X("disabled",r.loading),L(2),X("disabled",r.loading),L(2),X("disabled",r.loading||t.invalid),L(),X("ngIf",r.loading),L(),X("ngIf",!r.loading)}}function $le(n,e){if(1&n&&(R(0,"div",38),k(1),P()),2&n){const t=be(2);L(),Oe(" \u2705 ",t.success," ")}}function zle(n,e){if(1&n&&(R(0,"div",39),k(1),P()),2&n){const t=be(2);L(),Oe(" \u274c ",t.error," ")}}function Hle(n,e){if(1&n&&(R(0,"div",42)(1,"div",43)(2,"span",44),k(3),P(),R(4,"span",45),k(5),lu(6,"date"),P()(),R(7,"h3",46),k(8),P(),R(9,"div",47)(10,"span",48),k(11),P(),R(12,"span",49),k(13),P()()()),2&n){const t=e.$implicit;L(2),X("ngClass","tipo-"+t.tipo),L(),Oe(" ",t.tipo," "),L(2),$e(Bl(6,8,t.fechaCreacion,"short")),L(2),X("routerLink",Op(11,Vle,t.id)),L(),Oe(" ",t.titulo," "),L(3),LI("\u{1f44d} ",t.votosPositivos," \u{1f44e} ",t.votosNegativos,""),L(2),Oe("\u{1f4ac} ",t.totalComentarios,"")}}function Gle(n,e){if(1&n&&(R(0,"div",40),je(1,Hle,14,13,"div",41),P()),2&n){const t=be(2);L(),X("ngForOf",t.misPublicaciones)}}function qle(n,e){1&n&&(R(0,"div",50)(1,"p"),k(2,"A\xfan no has creado ninguna publicaci\xf3n"),P(),R(3,"button",51),k(4," Crear mi primera publicaci\xf3n "),P()())}function Wle(n,e){if(1&n){const t=br();R(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),k(4),P()(),R(5,"div",6)(6,"h1"),k(7),P(),R(8,"p",7),k(9),P(),R(10,"p",8),k(11),lu(12,"date"),P()()(),R(13,"div",9)(14,"div",10)(15,"div",11),k(16),P(),R(17,"div",12),k(18,"Publicaciones"),P()(),R(19,"div",10)(20,"div",11),k(21),P(),R(22,"div",12),k(23,"Votos Positivos"),P()(),R(24,"div",10)(25,"div",11),k(26),P(),R(27,"div",12),k(28,"Total Votos"),P()()(),R(29,"div",13)(30,"div",14)(31,"div",15)(32,"h2"),k(33,"Informaci\xf3n Personal"),P(),je(34,Fle,2,0,"button",16),P(),je(35,Lle,16,3,"div",17)(36,jle,16,8,"form",18)(37,$le,2,1,"div",19)(38,zle,2,1,"div",20),P(),R(39,"div",14)(40,"h2"),k(41,"Mis Publicaciones"),P(),je(42,Gle,2,1,"div",21)(43,qle,5,0,"div",22),P()(),R(44,"div",23)(45,"button",24),Fe("click",function(){return He(t),Ge(be().cerrarSesion())}),k(46," \u{1f6aa} Cerrar Sesi\xf3n "),P()()()}if(2&n){const t=be();L(4),Oe(" ",t.usuario.nombre.charAt(0).toUpperCase()," "),L(3),$e(t.usuario.nombre),L(2),$e(t.getRolLabel(t.usuario.rol)),L(2),Oe(" Miembro desde ",Bl(12,14,t.usuario.fechaRegistro,"MMMM yyyy")," "),L(5),$e(t.misPublicaciones.length),L(5),$e(t.getVotosPositivos()),L(5),$e(t.getTotalVotos()),L(8),X("ngIf",!t.editando),L(),X("ngIf",!t.editando),L(),X("ngIf",t.editando),L(),X("ngIf",t.success),L(),X("ngIf",t.error),L(4),X("ngIf",t.misPublicaciones.length>0),L(),X("ngIf",0===t.misPublicaciones.length)}}let Kle=(()=>{class n{constructor(t,r,i){this.authService=t,this.publicacionesService=r,this.router=i,this.usuario=null,this.misPublicaciones=[],this.loading=!1,this.error="",this.success="",this.editando=!1,this.datosEdicion={nombre:"",email:""},this.subscriptions=[]}ngOnInit(){const t=this.authService.getCurrentUser().subscribe(r=>{this.usuario=r,r?(this.datosEdicion={nombre:r.nombre,email:r.email},this.cargarMisPublicaciones()):this.router.navigate(["/login"])});this.subscriptions.push(t)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}cargarMisPublicaciones(){if(!this.usuario)return;this.loading=!0;const t=this.publicacionesService.obtenerPublicacionesPorAutor(this.usuario.id).subscribe({next:r=>{this.misPublicaciones=r,this.loading=!1},error:r=>{console.error("Error al cargar publicaciones:",r),this.error="Error al cargar tus publicaciones",this.loading=!1}});this.subscriptions.push(t)}iniciarEdicion(){this.editando=!0,this.error="",this.success=""}cancelarEdicion(){this.editando=!1,this.usuario&&(this.datosEdicion={nombre:this.usuario.nombre,email:this.usuario.email})}guardarCambios(){var t=this;return I(function*(){if(t.usuario){if(!t.datosEdicion.nombre.trim())return void(t.error="El nombre es obligatorio");if(!t.datosEdicion.email.trim())return void(t.error="El email es obligatorio");t.loading=!0,t.error="";try{yield t.authService.actualizarPerfil(t.datosEdicion.nombre.trim(),t.datosEdicion.email.trim()),t.success="Perfil actualizado exitosamente",t.editando=!1,t.loading=!1}catch(r){console.error("Error al actualizar perfil:",r),t.error="Error al actualizar el perfil",t.loading=!1}}})()}cerrarSesion(){var t=this;return I(function*(){try{yield t.authService.logout(),t.router.navigate(["/"])}catch(r){console.error("Error al cerrar sesi\xf3n:",r)}})()}getRolLabel(t){return{[Rr.ESTUDIANTE]:"Estudiante",[Rr.PROFESOR]:"Profesor",[Rr.AUTORIDAD]:"Autoridad"}[t]}getTotalVotos(){return this.misPublicaciones.reduce((t,r)=>t+r.votosPositivos+r.votosNegativos,0)}getVotosPositivos(){return this.misPublicaciones.reduce((t,r)=>t+r.votosPositivos,0)}static{this.\u0275fac=function(r){return new(r||n)(j(qr),j(xh),j(nn))}}static{this.\u0275cmp=sr({type:n,selectors:[["app-perfil"]],decls:1,vars:1,consts:[["perfilForm","ngForm"],["class","perfil-container",4,"ngIf"],[1,"perfil-container"],[1,"perfil-header"],[1,"avatar"],[1,"avatar-circle"],[1,"info-basica"],[1,"rol"],[1,"fecha-registro"],[1,"perfil-stats"],[1,"stat-card"],[1,"stat-number"],[1,"stat-label"],[1,"perfil-content"],[1,"section-card"],[1,"section-header"],["class","btn btn-outline",3,"click",4,"ngIf"],["class","info-display",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],["class","success-message",4,"ngIf"],["class","error-message",4,"ngIf"],["class","publicaciones-lista",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"perfil-actions"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-outline",3,"click"],[1,"info-display"],[1,"info-item"],[3,"ngSubmit"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","name","nombre","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","email"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],[1,"success-message"],[1,"error-message"],[1,"publicaciones-lista"],["class","publicacion-item",4,"ngFor","ngForOf"],[1,"publicacion-item"],[1,"publicacion-header"],[1,"tipo-badge",3,"ngClass"],[1,"fecha"],[1,"publicacion-titulo",3,"routerLink"],[1,"publicacion-stats"],[1,"votos"],[1,"comentarios"],[1,"empty-state"],["routerLink","/nueva-publicacion",1,"btn","btn-primary"]],template:function(r,i){1&r&&je(0,Wle,47,17,"div",1),2&r&&X("ngIf",i.usuario)},dependencies:[og,_u,ci,Gr,od,To,Ts,ed,Ss,Po,Ds,sg],styles:[".perfil-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:20px}.perfil-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-bottom:30px;padding:20px;background:#fff;border-radius:10px;box-shadow:0 2px 10px #0000001a}.avatar-circle[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;color:#fff;font-size:32px;font-weight:700}.info-basica[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#333}.rol[_ngcontent-%COMP%]{color:#666;font-weight:500;margin:0 0 5px}.fecha-registro[_ngcontent-%COMP%]{color:#888;font-size:14px;margin:0}.perfil-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:10px;box-shadow:0 2px 10px #0000001a;text-align:center}.stat-number[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#667eea;margin-bottom:5px}.stat-label[_ngcontent-%COMP%]{color:#666;font-size:14px}.perfil-content[_ngcontent-%COMP%]{display:grid;gap:30px}.section-card[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:10px;box-shadow:0 2px 10px #0000001a}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.info-display[_ngcontent-%COMP%]{display:grid;gap:15px}.info-item[_ngcontent-%COMP%]{display:flex;gap:10px}.info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#555;min-width:80px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:600;color:#555}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px;border:2px solid #ddd;border-radius:5px;font-size:16px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.form-actions[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;font-size:16px;transition:all .2s}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-outline[_ngcontent-%COMP%]{background:transparent;border:2px solid #667eea;color:#667eea}.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 4px #0003}.publicaciones-lista[_ngcontent-%COMP%]{display:grid;gap:15px}.publicacion-item[_ngcontent-%COMP%]{border:1px solid #eee;border-radius:8px;padding:15px;transition:all .2s}.publicacion-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #0000001a}.publicacion-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.tipo-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:600;text-transform:uppercase}.tipo-queja[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.tipo-propuesta[_ngcontent-%COMP%]{background:#e8f5e8;color:#2e7d32}.tipo-sugerencia[_ngcontent-%COMP%]{background:#fff3e0;color:#ef6c00}.tipo-idea[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.publicacion-titulo[_ngcontent-%COMP%]{margin:0 0 10px;cursor:pointer;color:#333}.publicacion-titulo[_ngcontent-%COMP%]:hover{color:#667eea}.publicacion-stats[_ngcontent-%COMP%]{display:flex;gap:15px;font-size:14px;color:#666}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.success-message[_ngcontent-%COMP%]{background:#d4edda;color:#155724;padding:10px;border-radius:5px;margin-top:15px}.error-message[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:10px;border-radius:5px;margin-top:15px}.perfil-actions[_ngcontent-%COMP%]{margin-top:30px;text-align:center}"]})}}return n})(),L0=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(){return this.authService.getCurrentUser().pipe(Ps(1),Re(t=>!!t||(this.router.navigate(["/login"]),!1)))}static{this.\u0275fac=function(r){return new(r||n)(se(qr),se(nn))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Qle=[{path:"",component:ele},{path:"login",component:ile},{path:"register",component:cle},{path:"publicaciones",component:gle},{path:"nueva-publicacion",component:n$,canActivate:[L0]},{path:"editar-publicacion/:id",component:n$,canActivate:[L0]},{path:"publicacion/:id",component:kle},{path:"perfil",component:Kle,canActivate:[L0]},{path:"**",redirectTo:""}];let Yle=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ai({type:n})}static{this.\u0275inj=Kr({imports:[wF.forRoot(Qle),wF]})}}return n})();const Jle=()=>({exact:!0});function Zle(n,e){if(1&n){const t=br();R(0,"div",10)(1,"a",11),k(2," \u2795 Nueva "),P(),R(3,"div",12)(4,"button",13),Fe("click",function(){return He(t),Ge(be().toggleMenu())}),R(5,"div",14),k(6),P(),R(7,"span"),k(8),P(),R(9,"span",15),k(10,"\u25bc"),P()(),R(11,"div",16)(12,"a",17),Fe("click",function(){return He(t),Ge(be().toggleMenu())}),k(13," \u{1f464} Mi Perfil "),P(),R(14,"button",18),Fe("click",function(){return He(t),Ge(be().logout())}),k(15," \u{1f6aa} Cerrar Sesi\xf3n "),P()()()()}if(2&n){const t=be();L(6),$e(t.usuario.nombre.charAt(0).toUpperCase()),L(2),$e(t.usuario.nombre),L(3),Io("show",t.menuAbierto)}}function Xle(n,e){1&n&&(R(0,"a",19),k(1," \u{1f511} Iniciar Sesi\xf3n "),P(),R(2,"a",20),k(3," \u{1f4dd} Registrarse "),P())}let ede=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.usuario=null,this.menuAbierto=!1}ngOnInit(){this.authService.getCurrentUser().subscribe(t=>{this.usuario=t})}logout(){var t=this;return I(function*(){try{yield t.authService.logout(),t.router.navigate(["/"])}catch(r){console.error("Error al cerrar sesi\xf3n:",r)}})()}toggleMenu(){this.menuAbierto=!this.menuAbierto}closeMenu(){this.menuAbierto=!1}static{this.\u0275fac=function(r){return new(r||n)(j(qr),j(nn))}}static{this.\u0275cmp=sr({type:n,selectors:[["app-navbar"]],decls:17,vars:6,consts:[["loginLinks",""],[1,"navbar"],[1,"nav-container"],[1,"nav-brand"],["routerLink","/",1,"brand-link"],[1,"nav-menu"],["routerLink","/","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/publicaciones","routerLinkActive","active",1,"nav-link"],["class","user-menu",4,"ngIf","ngIfElse"],[1,"menu-toggle",3,"click"],[1,"user-menu"],["routerLink","/nueva-publicacion",1,"nav-link","btn-primary"],[1,"dropdown"],[1,"user-button",3,"click"],[1,"user-avatar"],[1,"dropdown-arrow"],[1,"dropdown-menu"],["routerLink","/perfil",1,"dropdown-item",3,"click"],[1,"dropdown-item","logout-btn",3,"click"],["routerLink","/login","routerLinkActive","active",1,"nav-link"],["routerLink","/register","routerLinkActive","active",1,"nav-link","btn-primary"]],template:function(r,i){if(1&r){const o=br();R(0,"nav",1)(1,"div",2)(2,"div",3)(3,"a",4),k(4," \u{1f393} Campus Voz "),P()(),R(5,"div",5)(6,"a",6),k(7," \u{1f3e0} Inicio "),P(),R(8,"a",7),k(9," \u{1f4dd} Publicaciones "),P(),je(10,Zle,16,4,"div",8)(11,Xle,4,0,"ng-template",null,0,Z1),P(),R(13,"button",9),Fe("click",function(){return He(o),Ge(i.toggleMenu())}),hr(14,"span")(15,"span")(16,"span"),P()()()}if(2&r){const o=cu(12);L(5),Io("active",i.menuAbierto),L(),X("routerLinkActiveOptions",function G1(n,e,t){const r=Vn()+n,i=U();return i[r]===_e?oi(i,r,t?e.call(t):e()):function Al(n,e){return n[e]}(i,r)}(5,Jle)),L(4),X("ngIf",i.usuario)("ngIfElse",o)}},dependencies:[ci,Gr,gF],styles:[".navbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:1000;background:#fffffff2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,.2);box-shadow:0 8px 32px #0000001a;min-height:80px}.nav-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:1rem;display:flex;align-items:center;justify-content:space-between;min-height:80px}.nav-brand[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1.2}.brand-link[_ngcontent-%COMP%]{text-decoration:none;display:flex;align-items:center;gap:.5rem;padding:.5rem 0}.nav-menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;height:100%}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:var(--gray-700);font-weight:500;padding:.75rem 1rem;border-radius:var(--radius-lg);transition:all .2s ease;position:relative;white-space:nowrap;line-height:1.2;display:flex;align-items:center;min-height:44px}.nav-link[_ngcontent-%COMP%]:hover, .nav-link.active[_ngcontent-%COMP%]{color:var(--primary);background:#667eea1a}.nav-link.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;font-weight:600;font-size:.875rem}.nav-link.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:var(--shadow-lg)}.user-menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;height:100%}.dropdown[_ngcontent-%COMP%]{position:relative}.user-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#fff;border:2px solid var(--gray-200);border-radius:var(--radius-xl);padding:.75rem 1rem;cursor:pointer;transition:all .2s ease;font-weight:500;color:var(--gray-700);min-height:44px;white-space:nowrap}.user-button[_ngcontent-%COMP%]:hover{border-color:var(--primary);box-shadow:0 0 0 3px #667eea1a}.user-avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background:linear-gradient(135deg,var(--primary),var(--secondary));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:.875rem;flex-shrink:0}.dropdown-arrow[_ngcontent-%COMP%]{font-size:.75rem;transition:transform .2s ease}.dropdown.show[_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{transform:rotate(180deg)}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:calc(100% + .5rem);right:0;background:#fff;border-radius:var(--radius-xl);box-shadow:var(--shadow-xl);border:1px solid var(--gray-200);min-width:200px;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .2s ease;z-index:1000}.dropdown-menu.show[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.dropdown-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;width:100%;padding:.75rem 1rem;text-decoration:none;color:var(--gray-700);background:none;border:none;cursor:pointer;transition:all .2s ease;font-size:.875rem;white-space:nowrap}.dropdown-item[_ngcontent-%COMP%]:hover{background:var(--gray-50);color:var(--primary)}.dropdown-item[_ngcontent-%COMP%]:first-child{border-radius:var(--radius-xl) var(--radius-xl) 0 0}.dropdown-item[_ngcontent-%COMP%]:last-child{border-radius:0 0 var(--radius-xl) var(--radius-xl)}.logout-btn[_ngcontent-%COMP%]{color:var(--error);border-top:1px solid var(--gray-200)}.logout-btn[_ngcontent-%COMP%]:hover{background:#fef2f2;color:var(--error)}.menu-toggle[_ngcontent-%COMP%]{display:none;flex-direction:column;gap:4px;background:none;border:none;cursor:pointer;padding:.5rem}.menu-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:24px;height:3px;background:var(--gray-700);border-radius:2px;transition:all .3s ease}@media (max-width: 1024px){.nav-menu[_ngcontent-%COMP%]{gap:1rem}.nav-link[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.875rem}.nav-link.btn-primary[_ngcontent-%COMP%]{font-size:.8rem}}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{min-height:70px}.nav-container[_ngcontent-%COMP%]{min-height:70px;padding:.75rem 1rem}.nav-menu[_ngcontent-%COMP%]{position:fixed;top:70px;left:0;right:0;background:#fffffff2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);flex-direction:column;padding:2rem;gap:1rem;transform:translateY(-100%);opacity:0;visibility:hidden;transition:all .3s ease;min-height:auto}.nav-menu.active[_ngcontent-%COMP%]{transform:translateY(0);opacity:1;visibility:visible}.menu-toggle[_ngcontent-%COMP%]{display:flex}.user-menu[_ngcontent-%COMP%]{flex-direction:column;width:100%;gap:1rem}.dropdown-menu[_ngcontent-%COMP%]{position:static;opacity:1;visibility:visible;transform:none;box-shadow:none;border:1px solid var(--gray-200);margin-top:1rem}.nav-link[_ngcontent-%COMP%]{justify-content:center;width:100%}}@media (max-width: 480px){.nav-brand[_ngcontent-%COMP%]{font-size:1.25rem}.nav-link.btn-primary[_ngcontent-%COMP%]{font-size:.75rem;padding:.5rem .75rem}}"]})}}return n})(),tde=(()=>{class n{constructor(){this.title="Campus Voz"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=sr({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"main-content"]],template:function(r,i){1&r&&(hr(0,"app-navbar"),R(1,"main",0),hr(2,"router-outlet"),P())},dependencies:[Cb,ede],styles:[".main-content[_ngcontent-%COMP%]{min-height:calc(100vh - 60px);padding-top:20px}"]})}}return n})();const nde_firebase={apiKey:"AIzaSyA7dGDjoKUAK99gFAkgayyvm30qVeatcKs",authDomain:"campus-voz.firebaseapp.com",projectId:"campus-voz",storageBucket:"campus-voz.firebasestorage.app",messagingSenderId:"842660625592",appId:"1:842660625592:web:42583ee2437ac6a807484d"};let rde=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ai({type:n,bootstrap:[tde]})}static{this.\u0275inj=Kr({providers:[qne(()=>Wne(nde_firebase)),Woe(()=>Yoe()),Qce(()=>Yce())],imports:[bY,Yle,fZ]})}}return n})();IY().bootstrapModule(rde).catch(n=>console.error(n))}},xc=>{xc(xc.s=331)}]);